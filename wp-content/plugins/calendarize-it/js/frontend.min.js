function _rhc_check_visibility(){jQuery(document).ready(function(e){var t=!1;e(".fullCalendar").each(function(n,a){e(a).is(":visible")&&e(a).find(".fc-content").height()<10?e(a).fullCalendar("render"):e(a).find(".fc-content").height()<10&&(t=!0)}),t&&setTimeout("_rhc_check_visibility()",300)})}function _rhc_check_init_rhc(){jQuery(".rhc_holder").each(function(e,t){return!!jQuery(this).data("Calendarize")||(init_rhc(),!1)}),setTimeout("_rhc_check_init_rhc()",1e3)}function rhc_in_array(e,t){var n=jQuery.inArray(e,t);return null!=n&&-1!=n}function _rhc_widget_link_click(e,t){var n=jQuery(t).data("rhc_event")||!1;if(n&&n.fc_click_target)var a=n.fc_click_target;else a="_self";if(e.event_rdate||e.gotodate){jQuery("form#calendarizeit_repeat_instance").remove();jQuery('<form id="calendarizeit_repeat_instance" method="post"></form>').attr("action",e.url).attr("target",a).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(t){t.stopPropagation();var n=e.url;return!(null==n||n.indexOf("javascript:void(0);")>0)}).submit()}else{var r=e.url;if(null!=r&&0==r.indexOf("javascript:void(0);"))return!1;"_blank"==a?window.open(r):location.href=r}return!1}function _rhc_sort_events(e,t){return e.start>t.start?1:e.start<t.start?-1:0}jQuery(document).ready(function(e){RHC.visibility_check&&(jQuery(".fullCalendar").length>0&&setTimeout("_rhc_check_visibility()",200),setTimeout("_rhc_check_init_rhc()",500))}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,a,r){return jQuery.easing[jQuery.easing.def](e,t,n,a,r)},easeInQuad:function(e,t,n,a,r){return a*(t/=r)*t+n},easeOutQuad:function(e,t,n,a,r){return-a*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t+n:-a/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,a,r){return a*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,a,r){return a*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t+n:a/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,a,r){return a*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,a,r){return-a*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t*t+n:-a/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,a,r){return a*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,a,r){return a*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t*t*t+n:a/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,a,r){return-a*Math.cos(t/r*(Math.PI/2))+a+n},easeOutSine:function(e,t,n,a,r){return a*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,a,r){return-a/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,a,r){return 0==t?n:a*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,a,r){return t==r?n+a:a*(1-Math.pow(2,-10*t/r))+n},easeInOutExpo:function(e,t,n,a,r){return 0==t?n:t==r?n+a:(t/=r/2)<1?a/2*Math.pow(2,10*(t-1))+n:a/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(e,t,n,a,r){return-a*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,a,r){return a*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,a,r){return(t/=r/2)<1?-a/2*(Math.sqrt(1-t*t)-1)+n:a/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(1==(t/=r))return n+a;if(o||(o=.3*r),s<Math.abs(a)){s=a;i=o/4}else i=o/(2*Math.PI)*Math.asin(a/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)+n},easeOutElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(1==(t/=r))return n+a;if(o||(o=.3*r),s<Math.abs(a)){s=a;i=o/4}else i=o/(2*Math.PI)*Math.asin(a/s);return s*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+a+n},easeInOutElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(2==(t/=r/2))return n+a;if(o||(o=r*(.3*1.5)),s<Math.abs(a)){s=a;i=o/4}else i=o/(2*Math.PI)*Math.asin(a/s);return t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*-.5+n:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*.5+a+n},easeInBack:function(e,t,n,a,r,i){return null==i&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+n},easeOutBack:function(e,t,n,a,r,i){return null==i&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+n},easeInOutBack:function(e,t,n,a,r,i){return null==i&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*((1+(i*=1.525))*t-i))+n:a/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+n},easeInBounce:function(e,t,n,a,r){return a-jQuery.easing.easeOutBounce(e,r-t,0,a,r)+n},easeOutBounce:function(e,t,n,a,r){return(t/=r)<1/2.75?a*(7.5625*t*t)+n:t<2/2.75?a*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?a*(7.5625*(t-=2.25/2.75)*t+.9375)+n:a*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,a,r){return t<r/2?.5*jQuery.easing.easeInBounce(e,2*t,0,a,r)+n:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,a,r)+.5*a+n}}),Scheduler=function(e,t,n){this.test_mode=!0===n,this.start_date=e;var a=this;t=t.replace(/(UNTIL=)([^\;]{8})(?!T)/,function(e,t,n,r){return y=n.substring(0,4),m=n.substring(4,6),d=n.substring(6,8),until=new Date(y,parseInt(m)-1,d,23,59,59),v=a.timeToUntilString(until),t+v}),this.exception_dates=[],this.repeat_dates=[],this.rule=null,t&&(this.rule=RRule.fromString("DTSTART="+this.timeToUntilString(e)+";"+t),this.rule.dtstart=e)},Scheduler.prototype.timeToUntilString=function(e){for(var t,n=new Date(e),a=[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),"T",n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),"Z"],r=0;r<a.length;r++)t=a[r],!/[TZ]/.test(t)&&t<10&&(a[r]="0"+String(t));return a.join("")},Scheduler.prototype.all_occurrences=function(e,t){if(null==this.rule)return[this.start_date];var n=[];if(n=this.rule.between(new Date(e),new Date(t)),this.repeat_dates.length>0){for(var a=0;a<this.repeat_dates.length;a++){var r=new Date(this.repeat_dates[a]);rhc_in_array(s,n)||n.push(r)}n.sort()}var i=n.length,o=[];for(a=0;a<i;a++){var s=(r=n[a]).getTime();rhc_in_array(s,this.exception_dates)||o.push(this.test_mode?s:r)}return o},Scheduler.prototype.occurrences_between=function(e,t){var n=e.getTime(),a=t.getTime();return this.all_occurrences(n,a)},Scheduler.prototype.limited_occurrences=function(e,t,n){var a=begin_date.getTime(),r=end_date.getTime();return this.all_occurrences(a,r).slice(0,n)},Scheduler.prototype.add_exception_dates=function(e){for(var t=e.length,n=0;n<t;n++)this.exception_dates.push(e[n].getTime());this.exception_dates.sort()},Scheduler.prototype.add_rdates=function(e){for(var t=e.length,n=0;n<t;n++)this.repeat_dates.push(e[n].getTime());this.repeat_dates.sort()},function(e){var t="undefined"!=typeof module&&module.exports,n=function(){if(!n._nlp)if(t)n._nlp=require("./nlp");else if(!(n._nlp=e._RRuleNLP))throw new Error("You need to include rrule/nlp.js for fromText/toText to work.");return n._nlp},a={MONTH_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31],ONE_DAY:864e5,MAXYEAR:9999,ORDINAL_BASE:new Date(1970,0,1),PY_WEEKDAYS:[6,0,1,2,3,4,5],getYearDay:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.ceil((t-new Date(e.getFullYear(),0,1))/a.ONE_DAY)+1},isLeapYear:function(e){return e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},tzOffset:function(e){return 60*e.getTimezoneOffset()*1e3},daysBetween:function(e,t){var n=e.getTime()-a.tzOffset(e),r=t.getTime()-a.tzOffset(t),i=Math.abs(n-r);return Math.round(i/a.ONE_DAY)},toOrdinal:function(e){return a.daysBetween(e,a.ORDINAL_BASE)},fromOrdinal:function(e){var t=e*a.ONE_DAY;return new Date(a.ORDINAL_BASE.getTime()-a.tzOffset(a.ORDINAL_BASE)+t+a.tzOffset(new Date(t)))},monthRange:function(e,t){var n=new Date(e,t,1);return[a.getWeekday(n),a.getMonthDays(n)]},getMonthDays:function(e){var t=e.getMonth();return 1==t&&a.isLeapYear(e)?29:a.MONTH_DAYS[t]},getWeekday:function(e){return a.PY_WEEKDAYS[e.getDay()]},combine:function(e,t){return t=t||e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},clone:function(e){var t=new Date(e.getTime());return t.setMilliseconds(0),t},cloneDates:function(e){for(var t=[],n=0;n<e.length;n++)t.push(a.clone(e[n]));return t},sort:function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},timeToUntilString:function(e){for(var t,n=new Date(e),a=[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),"T",n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),"Z"],r=0;r<a.length;r++)t=a[r],!/[TZ]/.test(t)&&t<10&&(a[r]="0"+String(t));return a.join("")},untilStringToDate:function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(e);if(!t)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5]||0,t[6]||0,t[7]||0))},Time:function(e,t,n){this.hour=e,this.minute=t,this.second=n}};a.Time.prototype={getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getTime:function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)}};var r=function(e,t){1===arguments.length&&(t=e,e=0);for(var n=[],a=e;a<t;a++)n.push(a);return n},i=function(e,t){var n=0,a=[];if(e instanceof Array)for(;n<t;n++)a[n]=[].concat(e);else for(;n<t;n++)a[n]=e;return a},o=function(e,t){var n=e%t;return n*t<0?n+t:n},s=function(e,t){return{div:Math.floor(e/t),mod:o(e,t)}},l=function(e){return!(e instanceof Array&&0==e.length)&&Boolean(e)},d=function(e,t){return-1!=e.indexOf(t)},c=[].concat(i(1,31),i(2,28),i(3,31),i(4,30),i(5,31),i(6,30),i(7,31),i(8,31),i(9,30),i(10,31),i(11,30),i(12,31),i(1,7)),f=[].concat(i(1,31),i(2,29),i(3,31),i(4,30),i(5,31),i(6,30),i(7,31),i(8,31),i(9,30),i(10,31),i(11,30),i(12,31),i(1,7)),u=r(1,29),h=r(1,30),p=r(1,31),m=r(1,32),v=[].concat(m,h,m,p,m,p,m,m,p,m,p,m,m.slice(0,7)),g=[].concat(m,u,m,p,m,p,m,m,p,m,p,m,m.slice(0,7));u=r(-28,0),h=r(-29,0),p=r(-30,0),m=r(-31,0);var y=[].concat(m,h,m,p,m,p,m,m,p,m,p,m,m.slice(0,7)),_=[].concat(m,u,m,p,m,p,m,m,p,m,p,m,m.slice(0,7)),w=[0,31,60,91,121,152,182,213,244,274,305,335,366],b=[0,31,59,90,120,151,181,212,243,273,304,334,365],k=function(){for(var e=[],t=0;t<55;t++)e=e.concat(r(7));return e}(),C=function(e,t){if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t};C.prototype={nth:function(e){return this.n==e?this:new C(this.weekday,e)},equals:function(e){return this.weekday==e.weekday&&this.n==e.n},toString:function(){var e=["MO","TU","WE","TH","FR","SA","SU"][this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},getJsWeekday:function(){return 6==this.weekday?0:this.weekday+1}};var x=function(e,t){this._string=null,e=e||{},this._cache=t?null:{all:!1,before:[],after:[],between:[]},this.origOptions={};var n=[],r=Object.keys(e),i=Object.keys(x.DEFAULT_OPTIONS);if(r.forEach(function(t){this.origOptions[t]=e[t],d(i,t)||n.push(t)},this),n.length)throw new Error("Invalid options: "+n.join(", "));if(!x.FREQUENCIES[e.freq]&&null===e.byeaster)throw new Error("Invalid frequency: "+String(e.freq));i.forEach(function(t){d(r,t)||(e[t]=x.DEFAULT_OPTIONS[t])});var o=this.options=e;if(null!==o.byeaster&&(o.freq=x.YEARLY),o.dtstart||(o.dtstart=new Date,o.dtstart.setMilliseconds(0)),null===o.wkst?o.wkst=x.MO.weekday:"number"==typeof o.wkst||(o.wkst=o.wkst.weekday),null!==o.bysetpos){"number"==typeof o.bysetpos&&(o.bysetpos=[o.bysetpos]);for(var s=0;s<o.bysetpos.length;s++){if(0==(u=o.bysetpos[s])||!(-366<=u&&u<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(l(o.byweekno)||l(o.byyearday)||l(o.bymonthday)||null!==o.byweekday||null!==o.byeaster))switch(o.freq){case x.YEARLY:o.bymonth||(o.bymonth=o.dtstart.getMonth()+1),o.bymonthday=o.dtstart.getDate();break;case x.MONTHLY:o.bymonthday=o.dtstart.getDate();break;case x.WEEKLY:o.byweekday=a.getWeekday(o.dtstart)}if(null===o.bymonth||o.bymonth instanceof Array||(o.bymonth=[o.bymonth]),null===o.byyearday||o.byyearday instanceof Array||(o.byyearday=[o.byyearday]),null===o.bymonthday)o.bymonthday=[],o.bynmonthday=[];else if(o.bymonthday instanceof Array){var c=[],f=[];for(s=0;s<o.bymonthday.length;s++){var u;(u=o.bymonthday[s])>0?c.push(u):u<0&&f.push(u)}o.bymonthday=c,o.bynmonthday=f}else o.bymonthday<0?(o.bynmonthday=[o.bymonthday],o.bymonthday=[]):(o.bynmonthday=[],o.bymonthday=[o.bymonthday]);if(null===o.byweekno||o.byweekno instanceof Array||(o.byweekno=[o.byweekno]),null===o.byweekday)o.bynweekday=null;else if("number"==typeof o.byweekday)o.byweekday=[o.byweekday],o.bynweekday=null;else if(o.byweekday instanceof C)!o.byweekday.n||o.freq>x.MONTHLY?(o.byweekday=[o.byweekday.weekday],o.bynweekday=null):(o.bynweekday=[[o.byweekday.weekday,o.byweekday.n]],o.byweekday=null);else{var h=[],p=[];for(s=0;s<o.byweekday.length;s++){var m=o.byweekday[s];"number"==typeof m?h.push(m):!m.n||o.freq>x.MONTHLY?h.push(m.weekday):p.push([m.weekday,m.n])}o.byweekday=l(h)?h:null,o.bynweekday=l(p)?p:null}if(null===o.byhour?o.byhour=o.freq<x.HOURLY?[o.dtstart.getHours()]:null:"number"==typeof o.byhour&&(o.byhour=[o.byhour]),null===o.byminute?o.byminute=o.freq<x.MINUTELY?[o.dtstart.getMinutes()]:null:"number"==typeof o.byminute&&(o.byminute=[o.byminute]),null===o.bysecond?o.bysecond=o.freq<x.SECONDLY?[o.dtstart.getSeconds()]:null:"number"==typeof o.bysecond&&(o.bysecond=[o.bysecond]),o.freq>=x.HOURLY)this.timeset=null;else{for(this.timeset=[],s=0;s<o.byhour.length;s++)for(var v=o.byhour[s],g=0;g<o.byminute.length;g++)for(var y=o.byminute[g],_=0;_<o.bysecond.length;_++){var w=o.bysecond[_];this.timeset.push(new a.Time(v,y,w))}a.sort(this.timeset)}};x.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],x.YEARLY=0,x.MONTHLY=1,x.WEEKLY=2,x.DAILY=3,x.HOURLY=4,x.MINUTELY=5,x.SECONDLY=6,x.MO=new C(0),x.TU=new C(1),x.WE=new C(2),x.TH=new C(3),x.FR=new C(4),x.SA=new C(5),x.SU=new C(6),x.DEFAULT_OPTIONS={freq:null,dtstart:null,interval:1,wkst:x.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},x.parseText=function(e,t){return n().parseText(e,t)},x.fromText=function(e,t){return n().fromText(e,t)},x.optionsToString=function(e){var t,n,r,i,o,s=[];n=Object.keys(e),r=Object.keys(x.DEFAULT_OPTIONS);for(var l=0;l<n.length;l++)if(d(r,n[l])&&(t=n[l].toUpperCase(),o=[],!(null===(i=e[n[l]])||i instanceof Array&&!i.length))){switch(t){case"FREQ":i=x.FREQUENCIES[e.freq];break;case"WKST":i=i.toString();break;case"BYWEEKDAY":t="BYDAY",i instanceof Array||(i=[i]);for(var c,f=0;f<i.length;f++)(c=i[f])instanceof C||(c=c instanceof Array?new C(c[0],c[1]):new C(c)),o[f]=c.toString();i=o;break;case"DTSTART":case"UNTIL":i=a.timeToUntilString(i);break;default:if(i instanceof Array){for(f=0;f<i.length;f++)o[f]=String(i[f]);i=o}else i=String(i)}s.push([t,i])}var u=[];for(l=0;l<s.length;l++){var h=s[l];u.push(h[0]+"="+h[1].toString())}return u.join(";")},x.prototype={all:function(e){if(e)return this._iter(new M("all",{},e));var t=this._cacheGet("all");return!1===t&&(t=this._iter(new T("all",{})),this._cacheAdd("all",t)),t},between:function(e,t,n,a){var r={before:t,after:e,inc:n};if(a)return this._iter(new M("between",r,a));var i=this._cacheGet("between",r);return!1===i&&(i=this._iter(new T("between",r)),this._cacheAdd("between",i,r)),i},before:function(e,t){var n={dt:e,inc:t},a=this._cacheGet("before",n);return!1===a&&(a=this._iter(new T("before",n)),this._cacheAdd("before",a,n)),a},after:function(e,t){var n={dt:e,inc:t},a=this._cacheGet("after",n);return!1===a&&(a=this._iter(new T("after",n)),this._cacheAdd("after",a,n)),a},count:function(){return this.all().length},toString:function(){return x.optionsToString(this.origOptions)},toText:function(e,t){return n().toText(this,e,t)},isFullyConvertibleToText:function(){return n().isFullyConvertible(this)},_cacheAdd:function(e,t,n){this._cache&&(t&&(t=t instanceof Date?a.clone(t):a.cloneDates(t)),"all"==e?this._cache.all=t:(n._value=t,this._cache[e].push(n)))},_cacheGet:function(e,t){if(!this._cache)return!1;var n=!1;if("all"==e)n=this._cache.all;else e:for(var r,i=0;i<this._cache[e].length;i++){for(var o in r=this._cache[e][i],t)if(t.hasOwnProperty(o)&&String(t[o])!=String(r[o]))continue e;n=r._value;break}if(!n&&this._cache.all){var s=new T(e,t);for(i=0;i<this._cache.all.length&&s.accept(this._cache.all[i]);i++);n=s.getValue(),this._cacheAdd(e,n,t)}return n instanceof Array?a.cloneDates(n):n instanceof Date?a.clone(n):n},clone:function(){return new x(this.origOptions)},_iter:function(e){var t=this.options.dtstart,n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),c=t.getHours(),f=t.getMinutes(),u=t.getSeconds(),h=a.getWeekday(t),p=(a.getYearDay(t),this.options.freq),m=this.options.interval,v=this.options.wkst,g=this.options.until,y=this.options.bymonth,_=this.options.byweekno,w=this.options.byyearday,b=this.options.byweekday,k=this.options.byeaster,C=this.options.bymonthday,T=this.options.bynmonthday,M=this.options.bysetpos,$=this.options.byhour,E=this.options.byminute,S=this.options.bysecond,L=new D(this);L.rebuild(n,r);var O,j={};if(j[x.YEARLY]=L.ydayset,j[x.MONTHLY]=L.mdayset,j[x.WEEKLY]=L.wdayset,j[x.DAILY]=L.ddayset,j[x.HOURLY]=L.ddayset,j[x.MINUTELY]=L.ddayset,j[x.SECONDLY]=L.ddayset,j=j[p],p<x.HOURLY)O=this.timeset;else{var R={};R[x.HOURLY]=L.htimeset,R[x.MINUTELY]=L.mtimeset,R[x.SECONDLY]=L.stimeset,R=R[p],O=p>=x.HOURLY&&l($)&&!d($,c)||p>=x.MINUTELY&&l(E)&&!d(E,f)||p>=x.SECONDLY&&l(S)&&!d(S,f)?[]:R.call(L,c,f,u)}for(var I,H,A,z,Y,N,Q,F,W,B,q,U,P=0,V=this.options.count;;){for(W=(F=j.call(L,n,r,i))[0],B=F[1],q=F[2],I=!1,A=B;A<q;A++)H=W[A],(l(y)&&!d(y,L.mmask[H])||l(_)&&!L.wnomask[H]||l(b)&&!d(b,L.wdaymask[H])||l(L.nwdaymask)&&!L.nwdaymask[H]||null!==k&&!d(L.eastermask,H)||(l(C)||l(T))&&!d(C,L.mdaymask[H])&&!d(T,L.nmdaymask[H])||l(w)&&(H<L.yearlen&&!d(w,H+1)&&!d(w,-L.yearlen+H)||H>=L.yearlen&&!d(w,H+1-L.yearlen)&&!d(w,-L.nextyearlen+H-L.yearlen)))&&(W[H]=null,I=!0);if(l(M)&&l(O)){var K,J,G=[];for(A=0;A<M.length;A++){var Z;(Z=M[A])<0?(K=Math.floor(Z/O.length),J=o(Z,O.length)):(K=Math.floor((Z-1)/O.length),J=o(Z-1,O.length));try{for(F=[],z=B;z<q;z++){var X=W[z];null!==X&&F.push(X)}H=K<0?F.slice(K)[0]:F[K];var ee=O[J],te=a.fromOrdinal(L.yearordinal+H),ne=a.combine(te,ee);d(G,ne)||G.push(ne)}catch(e){}}for(a.sort(G),A=0;A<G.length;A++){ne=G[A];if(g&&ne>g)return this._len=P,e.getValue();if(ne>=t){if(++P,!e.accept(ne))return e.getValue();if(V&&!--V)return this._len=P,e.getValue()}}}else for(A=B;A<q;A++)if(null!==(H=W[A])){te=a.fromOrdinal(L.yearordinal+H);for(z=0;z<O.length;z++){ee=O[z],ne=a.combine(te,ee);if(g&&ne>g)return this._len=P,e.getValue();if(ne>=t){if(++P,!e.accept(ne))return e.getValue();if(V&&!--V)return this._len=P,e.getValue()}}}if(U=!1,p==x.YEARLY){if((n+=m)>a.MAXYEAR)return this._len=P,e.getValue();L.rebuild(n,r)}else if(p==x.MONTHLY){if((r+=m)>12&&(n+=N=Math.floor(r/12),0==(r=Q=o(r,12))&&(r=12,--n),n>a.MAXYEAR))return this._len=P,e.getValue();L.rebuild(n,r)}else if(p==x.WEEKLY)i+=v>h?7*m-(h+1+(6-v)):7*m-(h-v),h=v,U=!0;else if(p==x.DAILY)i+=m,U=!0;else if(p==x.HOURLY){for(I&&(c+=Math.floor((23-c)/m)*m);N=(Y=s(c+=m,24)).div,Q=Y.mod,N&&(c=Q,i+=N,U=!0),l($)&&!d($,c););O=R.call(L,c,f,u)}else if(p==x.MINUTELY){for(I&&(f+=Math.floor((1439-(60*c+f))/m)*m);N=(Y=s(f+=m,60)).div,Q=Y.mod,N&&(f=Q,N=(Y=s(c+=N,24)).div,Q=Y.mod,N&&(c=Q,i+=N,U=!0,I=!1)),l($)&&!d($,c)||l(E)&&!d(E,f););O=R.call(L,c,f,u)}else if(p==x.SECONDLY){for(I&&(u+=Math.floor((86399-(3600*c+60*f+u))/m)*m);N=(Y=s(u+=m,60)).div,Q=Y.mod,N&&(u=Q,N=(Y=s(f+=N,60)).div,Q=Y.mod,N&&(f=Q,N=(Y=s(c+=N,24)).div,Q=Y.mod,N&&(c=Q,i+=N,U=!0))),l($)&&!d($,c)||l(E)&&!d(E,f)||l(S)&&!d(S,u););O=R.call(L,c,f,u)}if(U&&i>28){var ae=a.monthRange(n,r-1)[1];if(i>ae){for(;i>ae;){if(i-=ae,13==++r&&(r=1,++n>a.MAXYEAR))return this._len=P,e.getValue();ae=a.monthRange(n,r-1)[1]}L.rebuild(n,r)}}}}},x.parseString=function(e){if(!(e=e.replace(/^\s+|\s+$/,"")).length)return null;var t,n,r,i,o,s=e.split(";"),l={};for(t=0;t<s.length;t++)switch(r=(o=s[t].split("="))[0],i=o[1],r){case"FREQ":l.freq=x[i];break;case"WKST":l.wkst=x[i];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(-1!=i.indexOf(","))for(i=i.split(","),n=0;n<i.length;n++)/^[+-]?\d+$/.test(i[n])&&(i[n]=Number(i[n]));else/^[+-]?\d+$/.test(i)&&(i=Number(i));l[r=r.toLowerCase()]=i;break;case"BYDAY":var d,c,f,u=i.split(",");for(l.byweekday=[],n=0;n<u.length;n++)2==(f=u[n]).length?(c=x[f],l.byweekday.push(c)):(f=f.match(/^([+-]?\d)([A-Z]{2})$/),d=Number(f[1]),c=f[2],c=x[c].weekday,l.byweekday.push(new C(c,d)));break;case"DTSTART":l.dtstart=a.untilStringToDate(i);break;case"UNTIL":l.until=a.untilStringToDate(i);break;case"BYEASTER":l.byeaster=Number(i);break;default:throw new Error("Unknown RRULE property '"+r+"'")}return l},x.fromString=function(e){return new x(x.parseString(e))};var D=function(e){this.rrule=e,this.lastyear=null,this.lastmonth=null,this.yearlen=null,this.nextyearlen=null,this.yearordinal=null,this.yearweekday=null,this.mmask=null,this.mrange=null,this.mdaymask=null,this.nmdaymask=null,this.wdaymask=null,this.wnomask=null,this.nwdaymask=null,this.eastermask=null};D.prototype.easter=function(e,t){t=t||0;var n=e%19,a=Math.floor(e/100),r=e%100,i=Math.floor(a/4),o=a%4,s=Math.floor((a+8)/25),l=Math.floor((a-s+1)/3),d=Math.floor(19*n+a-i-l+15)%30,c=Math.floor(r/4),f=r%4,u=Math.floor(32+2*o+2*c-d-f)%7,h=Math.floor((n+11*d+22*u)/451),p=Math.floor((d+u-7*h+114)/31),m=(d+u-7*h+114)%31+1,v=Date.UTC(e,p-1,m+t),g=Date.UTC(e,0,1);return[Math.ceil((v-g)/864e5)]},D.prototype.rebuild=function(e,t){var n=this.rrule;if(e!=this.lastyear){this.yearlen=a.isLeapYear(e)?366:365,this.nextyearlen=a.isLeapYear(e+1)?366:365;var r=new Date(e,0,1);this.yearordinal=a.toOrdinal(r),this.yearweekday=a.getWeekday(r);var s=a.getWeekday(new Date(e,0,1));if(365==this.yearlen?(this.mmask=[].concat(c),this.mdaymask=[].concat(g),this.nmdaymask=[].concat(_),this.wdaymask=k.slice(s),this.mrange=[].concat(b)):(this.mmask=[].concat(f),this.mdaymask=[].concat(v),this.nmdaymask=[].concat(y),this.wdaymask=k.slice(s),this.mrange=[].concat(w)),l(n.options.byweekno)){var u,h,p;this.wnomask=i(0,this.yearlen+7),(u=h=o(7-this.yearweekday+n.options.wkst,7))>=4?(u=0,p=this.yearlen+o(this.yearweekday-n.options.wkst,7)):p=this.yearlen-u;for(var m=Math.floor(p/7),C=o(p,7),D=Math.floor(m+C/4),T=0;T<n.options.byweekno.length;T++)if((A=n.options.byweekno[T])<0&&(A+=D+1),0<A&&A<=D){A>1?($=u+7*(A-1),u!=h&&($-=7-h)):$=u;for(var M=0;M<7&&(this.wnomask[$]=1,$++,this.wdaymask[$]!=n.options.wkst);M++);}if(d(n.options.byweekno,1)){var $=u+7*D;if(u!=h&&($-=7-h),$<this.yearlen)for(T=0;T<7&&(this.wnomask[$]=1,$+=1,this.wdaymask[$]!=n.options.wkst);T++);}if(u){var E;if(d(n.options.byweekno,-1))E=-1;else{var S=a.getWeekday(new Date(e-1,0,1)),L=o(7-S+n.options.wkst,7),O=a.isLeapYear(e-1)?366:365;L>=4?(L=0,E=Math.floor(52+o(O+o(S-n.options.wkst,7),7)/4)):E=Math.floor(52+o(this.yearlen-u,7)/4)}if(d(n.options.byweekno,E))for($=0;$<u;$++)this.wnomask[$]=1}}else this.wnomask=null}if(l(n.options.bynweekday)&&(t!=this.lastmonth||e!=this.lastyear)){var j=[];if(n.options.freq==x.YEARLY)if(l(n.options.bymonth))for(T=0;T<n.options.bymonth.length;T++)t=n.options.bymonth[T],j.push(this.mrange.slice(t-1,t+1));else j=[[0,this.yearlen]];else n.options.freq==x.MONTHLY&&(j=[this.mrange.slice(t-1,t+1)]);if(l(j)){this.nwdaymask=i(0,this.yearlen);for(T=0;T<j.length;T++){var R=j[T],I=R[0],H=R[1];H-=1;for(M=0;M<n.options.bynweekday.length;M++){var A;s=n.options.bynweekday[M][0];(A=n.options.bynweekday[M][1])<0?($=H+7*(A+1),$-=o(this.wdaymask[$]-s,7)):($=I+7*(A-1),$+=o(7-this.wdaymask[$]+s,7)),I<=$&&$<=H&&(this.nwdaymask[$]=1)}}}this.lastyear=e,this.lastmonth=t}null!==n.options.byeaster&&(this.eastermask=this.easter(e,n.options.byeaster))},D.prototype.ydayset=function(e,t,n){return[r(this.yearlen),0,this.yearlen]},D.prototype.mdayset=function(e,t,n){for(var a=i(null,this.yearlen),r=this.mrange[t-1],o=this.mrange[t],s=r;s<o;s++)a[s]=s;return[a,r,o]},D.prototype.wdayset=function(e,t,n){for(var r=i(null,this.yearlen+7),o=a.toOrdinal(new Date(e,t-1,n))-this.yearordinal,s=o,l=0;l<7&&(r[o]=o,++o,this.wdaymask[o]!=this.rrule.options.wkst);l++);return[r,s,o]},D.prototype.ddayset=function(e,t,n){var r=i(null,this.yearlen),o=a.toOrdinal(new Date(e,t-1,n))-this.yearordinal;return r[o]=o,[r,o,o+1]},D.prototype.htimeset=function(e,t,n){for(var r=[],i=this.rrule,o=0;o<i.options.byminute.length;o++){t=i.options.byminute[o];for(var s=0;s<i.options.bysecond.length;s++)n=i.options.bysecond[s],r.push(new a.Time(e,t,n))}return a.sort(r),r},D.prototype.mtimeset=function(e,t,n){for(var r=[],i=this.rrule,o=0;o<i.options.bysecond.length;o++)n=i.options.bysecond[o],r.push(new a.Time(e,t,n));return a.sort(r),r},D.prototype.stimeset=function(e,t,n){return[new a.Time(e,t,n)]};var T=function(e,t){this.init(e,t)};T.prototype={init:function(e,t){this.method=e,this.args=t,this._result=[],this.minDate=null,this.maxDate=null,"between"==e?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):"before"==e?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):"after"==e&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))},accept:function(e){var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if("between"==this.method){if(t)return!0;if(n)return!1}else if("before"==this.method){if(n)return!1}else if("after"==this.method)return!!t||(this.add(e),!1);return this.add(e)},add:function(e){return this._result.push(e),!0},getValue:function(){switch(this.method){case"all":case"between":return this._result;case"before":case"after":return this._result.length?this._result[this._result.length-1]:null}}};var M=function(e,t,n){if(!d(["all","between"],e))throw new Error('Invalid method "'+e+'". Only all and between works with iterator.');this.add=function(e){return!!n(e,this._result.length)&&(this._result.push(e),!0)},this.init(e,t)};M.prototype=T.prototype,t&&(module.exports={RRule:x}),"undefined"==typeof ender&&(e.RRule=x),"function"==typeof define&&define.amd&&define("rrule",[],function(){return x})}(this),function(e){var t,n="undefined"!=typeof module&&module.exports;if(n)t=require("./rrule").RRule;else if(e.RRule)t=e.RRule;else{if("undefined"==typeof require)throw new Error("rrule.js is required for rrule/nlp.js to work");t||(t=require("rrule"))}var a=function(e,t){return-1!=e.indexOf(t)},r=function(e,t,n){if(this.gettext=t||function(e){return e},this.language=n||l,this.text="",this.rrule=e,this.freq=e.options.freq,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),r=[].concat(this.options.bynmonthday);a.sort(),r.sort(),r.reverse(),this.bymonthday=a.concat(r),this.bymonthday.length||(this.bymonthday=null)}if(this.origOptions.byweekday){var i=this.origOptions.byweekday instanceof Array?this.origOptions.byweekday:[this.origOptions.byweekday],o=String(i);this.byweekday={allWeeks:i.filter(function(e){return!Boolean(e.n)}),someWeeks:i.filter(function(e){return Boolean(e.n)}),isWeekdays:-1!=o.indexOf("MO")&&-1!=o.indexOf("TU")&&-1!=o.indexOf("WE")&&-1!=o.indexOf("TH")&&-1!=o.indexOf("FR")&&-1==o.indexOf("SA")&&-1==o.indexOf("SU")};var s=function(e,t){return e.weekday-t.weekday};this.byweekday.allWeeks.sort(s),this.byweekday.someWeeks.sort(s),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null},i=["count","until","interval","byweekday","bymonthday","bymonth"];(r.IMPLEMENTED=[])[t.DAILY]=i,r.IMPLEMENTED[t.WEEKLY]=i,r.IMPLEMENTED[t.MONTHLY]=i,r.IMPLEMENTED[t.YEARLY]=["byweekno","byyearday"].concat(i),r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED))return!1;if(e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(a(["dtstart","wkst","freq"],n))return!0;if(!a(r.IMPLEMENTED[e.options.freq],n))return t=!1,!1}return t},r.prototype={isFullyConvertible:function(){return r.isFullyConvertible(this.rrule)},toString:function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[t.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var n=this.options.until;this.add(this.language.monthNames[n.getMonth()]).add(n.getDate()+",").add(n.getFullYear())}else this.options.count&&this.add(e("for")).add(this.options.count).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},DAILY:function(){var e=this.gettext;1!=this.options.interval&&this.add(this.options.interval),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday()},WEEKLY:function(){var e=this.gettext;1!=this.options.interval&&this.add(this.options.interval).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?1==this.options.interval?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):(1==this.options.interval&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},MONTHLY:function(){var e=this.gettext;this.origOptions.bymonth?(1!=this.options.interval&&(this.add(this.options.interval).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(1!=this.options.interval&&this.add(this.options.interval),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},YEARLY:function(){var e=this.gettext;this.origOptions.bymonth?(1!=this.options.interval&&(this.add(this.options.interval),this.add(e("years"))),this._bymonth()):(1!=this.options.interval&&this.add(this.options.interval),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,null,e("and")))},_bymonthday:function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},_byweekday:function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},_bymonth:function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},nth:function(e){var t,n,a=this.gettext;if(-1==e)return a("last");switch(n=Math.abs(e)){case 1:case 21:case 31:t=n+a("st");break;case 2:case 22:t=n+a("nd");break;case 3:case 23:t=n+a("rd");break;default:t=n+a("th")}return e<0?t+" "+a("last"):t},monthtext:function(e){return this.language.monthNames[e-1]},weekdaytext:function(e){var t="number"==typeof e?e:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},plural:function(e){return e%100!=1},add:function(e){return this.text.push(" "),this.text.push(e),this},list:function(e,t,n,a){a=a||",",t=t||function(e){return e};var r=this,i=function(e){return t.call(r,e)};return n?function(e,t,n){for(var a="",r=0;r<e.length;r++)0!=r&&(r==e.length-1?a+=" "+n+" ":a+=t+" "),a+=e[r];return a}(e.map(i),a,n):e.map(i).join(a+" ")}};var o=function(e,n){var a=new s((n||l).tokens);if(!a.start(e))return null;var r={};return function(){var e;a.expect("every"),(e=a.accept("number"))&&(r.interval=parseInt(e[0]));if(a.isDone())throw new Error("Unexpected end");switch(a.symbol){case"day(s)":r.freq=t.DAILY,a.nextSymbol()&&(i(),f());break;case"weekday(s)":r.freq=t.WEEKLY,r.byweekday=[t.MO,t.TU,t.WE,t.TH,t.FR],a.nextSymbol(),f();break;case"week(s)":r.freq=t.WEEKLY,a.nextSymbol()&&(i(),f());break;case"month(s)":r.freq=t.MONTHLY,a.nextSymbol()&&(i(),f());break;case"year(s)":r.freq=t.YEARLY,a.nextSymbol()&&(i(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":if(r.freq=t.WEEKLY,r.byweekday=[t[a.symbol.substr(0,2).toUpperCase()]],!a.nextSymbol())return;for(;a.accept("comma");){if(a.isDone())throw new Error("Unexpected end");var n;if(!(n=d()))throw new Error("Unexpected symbol "+a.symbol+", expected weekday");r.byweekday.push(t[n]),a.nextSymbol()}!function(){var e;if(a.accept("on"),a.accept("the"),!(e=c()))return;r.bymonthday=[e],a.nextSymbol();for(;a.accept("comma");){if(!(e=c()))throw new Error("Unexpected symbol "+a.symbol+"; expected monthday");r.bymonthday.push(e),a.nextSymbol()}}(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=t.YEARLY,r.bymonth=[o()],!a.nextSymbol())return;for(;a.accept("comma");){if(a.isDone())throw new Error("Unexpected end");var s;if(!(s=o()))throw new Error("Unexpected symbol "+a.symbol+", expected month");r.bymonth.push(s),a.nextSymbol()}i(),f();break;default:throw new Error("Unknown symbol")}}(),r;function i(){var e=a.accept("on"),n=a.accept("the");if(e||n)do{var i,s,l;if(i=c())(s=d())?(a.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(t[s].nth(i))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(i),a.accept("day(s)"));else if(s=d())a.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(t[s]);else if("weekday(s)"==a.symbol)a.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(t.MO),r.byweekday.push(t.TU),r.byweekday.push(t.WE),r.byweekday.push(t.TH),r.byweekday.push(t.FR);else if("week(s)"==a.symbol){var f;if(a.nextSymbol(),!(f=a.accept("number")))throw new Error("Unexpected symbol "+a.symbol+", expected week number");for(r.byweekno=[f[0]];a.accept("comma");){if(!(f=a.accept("number")))throw new Error("Unexpected symbol "+a.symbol+"; expected monthday");r.byweekno.push(f[0])}}else{if(!(l=o()))return;a.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(l)}}while(a.accept("comma")||a.accept("the")||a.accept("on"))}function o(){switch(a.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function d(){switch(a.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return a.symbol.substr(0,2).toUpperCase();default:return!1}}function c(){switch(a.symbol){case"last":return a.nextSymbol(),-1;case"first":return a.nextSymbol(),1;case"second":return a.nextSymbol(),a.accept("last")?-2:2;case"third":return a.nextSymbol(),a.accept("last")?-3:3;case"nth":var e=parseInt(a.value[1]);if(e<-366||e>366)throw new Error("Nth out of range: "+e);return a.nextSymbol(),a.accept("last")?-e:e;default:return!1}}function f(){if("until"==a.symbol){var e=Date.parse(a.text);if(!e)throw new Error("Cannot parse until date:"+a.text);r.until=new Date(e)}else a.accept("for")&&(r.count=a.value[0],a.expect("number"))}},s=function(e){this.rules=e};s.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},s.prototype.isDone=function(){return this.done&&null==this.symbol},s.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n;for(var a in e=null,this.rules)(n=this.rules[a].exec(this.text))&&(null==e||n[0].length>e[0].length)&&(e=n,t=a);if(null!=e&&(this.text=this.text.substr(e[0].length),""==this.text&&(this.done=!0)),null==e)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"==t);return this.symbol=t,this.value=e,!0},s.prototype.accept=function(e){if(this.symbol==e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},s.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)};var l={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},d={fromText:function(e,n){return new t(o(e,n))},parseText:o,isFullyConvertible:r.isFullyConvertible,toText:function(e,t,n){return new r(e,t,n).toString()}};n?module.exports=d:e._RRuleNLP=d,"function"==typeof define&&define.amd&&define("rrule",[],function(){return t})}(this),function(e,t){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},i=e.fullCalendar={version:"1.6.4"},o=i.views={};function s(t){e.extend(!0,n,t)}e.fn.fullCalendar=function(a){if("string"==typeof a){var s,c=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[a])){var r=n[a].apply(n,c);s===t&&(s=r),"destroy"==a&&e.removeData(this,"fullCalendar")}}),s!==t?s:this}var f=(a=a||{}).eventSources||[];return delete a.eventSources,a.events&&(f.push(a.events),delete a.events),a=e.extend(!0,{},n,a.isRTL||a.isRTL===t&&n.isRTL?r:{},a),this.each(function(n,r){var s=e(r),c=new function(n,a,r){var s=this;s.options=a,s.render=function(t){u?j()&&(Q(),z(t)):function(){a.theme?"ui":"fc",n.addClass("fc"),a.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr");a.theme&&n.addClass("ui-widget");u=e("<div class='fc-content' style='position:relative'/>").prependTo(n),c=new function(t,n){var a=this;a.render=function(){if(r=n.theme?"ui":"fc",n.header)return i=e("<div class='fc-header'/>").append(e("<div class='fc-header-row' />").append(s("center")).append(s("left")).append(s("right")))},a.destroy=function(){i.remove()},a.updateTitle=function(e){i.find("h2").html(e)},a.activateButton=function(e){i.find("span.fc-button-"+e).addClass(r+"-state-active")},a.deactivateButton=function(e){i.find("span.fc-button-"+e).removeClass(r+"-state-active")},a.disableButton=function(e){i.find("span.fc-button-"+e).addClass(r+"-state-disabled")},a.enableButton=function(e){i.find("span.fc-button-"+e).removeClass(r+"-state-disabled")};var r,i=e([]);function s(a){var i=e("<div class='fc-header-cell fc-header-"+a+"'/>"),s=n.header[a];return s&&e.each(s.split(" "),function(a){var s;a>0&&i.append("<span class='fc-header-space'/>"),e.each(this.split(","),function(a,l){var d;if("title"==l)i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(r+"-corner-right"),s=null;else if(t[l]?d=t[l]:o[l]?d=function(){u.removeClass(r+"-state-hover"),t.changeView(l)}:(n[l]||n[l.replace("-","")])&&(d=function(){d=n[l]}),d){var c=n.theme?N(n.buttonIcons,l):null,f=N(n.buttonText,l);if(void 0===f)var f=N(n.buttonText,l.replace("-",""));var u=e("<span class='fc-button fc-button-"+l+" "+r+"-state-default'>"+(c?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+c+"'/></span>":f)+"</span>").click(function(){u.hasClass(r+"-state-disabled")||d(t,i)}).mousedown(function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")}).mouseup(function(){u.removeClass(r+"-state-down")}).hover(function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")},function(){u.removeClass(r+"-state-hover").removeClass(r+"-state-down")}).appendTo(i);F(u),s||u.addClass(r+"-corner-left"),s=u}}),s&&s.addClass(r+"-corner-right")}),i}}(s,a),(f=c.render())&&n.prepend(f);I(a.defaultView),a.handleWindowResize&&e(window).resize(B);R()||O()}()},s.destroy=function(){h&&(ee("viewDestroy",h,h,h.element),h.triggerEventDestroy());e(window).unbind("resize",B),c.destroy(),u.remove(),n.removeClass("fc fc-rtl ui-widget")},s.refetchEvents=function(){K(),J()},s.reportEvents=function(e){L=e,V()},s.reportEventChange=function(e){P(e)},s.rerenderEvents=P,s.changeView=I,s.select=function(e,n,a){h.select(e,n,a===t||a)},s.unselect=G,s.prev=function(){A(-1)},s.next=function(){A(1)},s.prevYear=function(){m(S,-1),A()},s.nextYear=function(){m(S,1),A()},s.today=function(){S=new Date,A()},s.gotoDate=function(e,t,n){e instanceof Date?S=b(e):x(S,e,t,n);A()},s.incrementDate=function(e,n,a){e!==t&&m(S,e);n!==t&&v(S,n);a!==t&&g(S,a);A()},s.formatDate=function(e,t){return $(e,t,a)},s.formatDates=function(e,t,n){return E(e,t,n,a)},s.getDate=function(){return b(S)},s.getView=function(){return h},s.option=function(e,n){if(n===t)return a[e];"height"!=e&&"contentHeight"!=e&&"aspectRatio"!=e||(a[e]=n,Y())},s.trigger=ee,s.rhc_search=function(t,n,a){e(C).find(".fc-filters-dialog").length>0&&(a||e(C).find(".fc-filters-dialog").is(":visible")?e(C).find(".fc-filters-dialog").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){e(this).hide()}):(jQuery(".fct-tooltip").trigger("close-tooltip"),e(C).find(".fc-filters-dialog").stop().show().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:1,top:0},"fast","linear",function(){e(this).find(".fbd-unchecked").css("overflow-y","auto")})))},function(n,a){var r=this;r.isFetchNeeded=function(e,t){return!o||e<o||t>s},r.fetchEvents=function(e,t){o=e,s=t,y=[];var n=++m,a=p.length;v=a;for(var r=0;r<a;r++)w(p[r],n)},r.addEventSource=function(e){(e=k(e))&&(v++,w(e,m))},r.removeEventSource=function(t){p=e.grep(p,function(e){return!M(e,t)}),y=e.grep(y,function(e){return!M(e.source,t)}),u(y)},r.updateEvent=function(e){var t,n,a=y.length,r=f().defaultEventEnd,i=e.start-e._start,o=e.end?e.end-(e._end||r(e)):0;for(t=0;t<a;t++)(n=y[t])._id==e._id&&n!=e&&(n.start=new Date(+n.start+i),e.end?n.end?n.end=new Date(+n.end+o):n.end=new Date(+r(n)+o):n.end=null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,T(n));T(e),u(y)},r.renderEvent=function(e,t){T(e),e.source||(t&&(h.events.push(e),e.source=h),y.push(e));u(y)},r.removeEvents=function(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}y=e.grep(y,t,!0);for(var a=0;a<p.length;a++)e.isArray(p[a].events)&&(p[a].events=e.grep(p[a].events,t,!0))}else{y=[];for(var a=0;a<p.length;a++)e.isArray(p[a].events)&&(p[a].events=[])}u(y)},r.clientEvents=function(t){{if(e.isFunction(t))return e.grep(y,t);if(t)return t+="",e.grep(y,function(e){return e._id==t})}return y},r.normalizeEvent=T,r.removeEventSources=function(){p=[],u(y=[])};for(var o,s,c=r.trigger,f=r.getView,u=r.reportEvents,h={events:[]},p=[h],m=0,v=0,g=0,y=[],_=0;_<a.length;_++)k(a[_]);function w(t,a){!function t(a,r){var d;var c=i.sourceFetchers;var f;for(d=0;d<c.length;d++){if(!0===(f=c[d](a,o,s,r)))return;if("object"==typeof f)return void t(f,r)}var u=a.events;if(u)e.isFunction(u)?(C(),u(b(o),b(s),function(e){r(e),x()})):e.isArray(u)?r(u):r();else{var h=a.url;if(h){var p,m=a.success,v=a.error,g=a.complete;p=e.isFunction(a.data)?a.data():a.data;var y=e.extend({},p||{}),_=U(a.startParam,n.startParam),w=U(a.endParam,n.endParam);_&&(y[_]=Math.round(+o/1e3)),w&&(y[w]=Math.round(+s/1e3)),C(),e.ajax(e.extend({},l,a,{data:y,success:function(t){t=t||[];var n=q(m,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){q(v,this,arguments),r()},complete:function(){q(g,this,arguments),x()}}))}else r()}}(t,function(r){if(a==m){if(r){n.eventDataTransform&&(r=e.map(r,n.eventDataTransform)),t.eventDataTransform&&(r=e.map(r,t.eventDataTransform));for(var i=0;i<r.length;i++)r[i].source=t,T(r[i]);y=y.concat(r)}--v||u(y)}})}function k(t){if(e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t)return function(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=i.sourceNormalizers,n=0;n<t.length;n++)t[n](e)}(t),p.push(t),t}function C(){g++||c("loading",null,!0,f())}function x(){--g||c("loading",null,!1,f())}function T(e){var a=e.source||{},r=U(a.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+d++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=b(e.start=D(e.start,r)),e.end=D(e.end,r),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?b(e.end):null,e.allDay===t&&(e.allDay=U(a.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function M(e,t){return e&&t&&$(e)==$(t)}function $(e){return("object"==typeof e?e.events||e.url:"")||e}}.call(s,a,r);var c,f,u,h,p,y,_,w=s.isFetchNeeded,k=s.fetchEvents,C=n[0],T=0,M=0,S=new Date,L=[];function O(){setTimeout(function(){!h.start&&R()&&A()},0)}function j(){return n.is(":visible")}function R(){return e("body").is(":visible")}function I(t){h&&t==h.name||function(t){firstTime=0==u.find(".fc-view").length,noTransition=!!(firstTime||s.options.transition.notransition&&1==parseInt(s.options.transition.notransition));var n=h;jQuery(".fct-tooltip").trigger("close-tooltip"),M++,h&&(ee("viewDestroy",h,h,h.element),G(),h.triggerEventDestroy(),Z(),noTransition&&h.element.remove(),c.deactivateButton(h.name));c.activateButton(t),h=new o[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(u),s),n&&n.viewLeave&&n.viewLeave(n,h,s);h.transitionStarted&&h.transitionStarted(n);{if(!noTransition){u.css("overflow","hidden");var a=u.width(),r=u.height(),i={rtl:{newView:{left:a,top:0},oldView:{left:-1*a,top:0}},ltr:{newView:{left:-1*a,top:0},oldView:{left:a,top:0}},ttb:{newView:{left:0,top:-1*r},oldView:{left:0,top:r}},btt:{newView:{left:0,top:r},oldView:{left:0,top:-1*r}}},l=s.options.transition.direction?s.options.transition.direction:"horizontal";if(n){if(0==e(".fc-button-"+t).length)var d="horizontal"==l?i.rtl:i.ttb;else if(e(".fc-button-"+n.name).length>0&&e(".fc-button-"+t).length>0&&e(".fc-button-"+n.name).position().left<e(".fc-button-"+t).position().left)var d="horizontal"==l?i.rtl:i.ttb;else var d="horizontal"==l?i.ltr:i.btt;h.lastView=n.name}else{var d="horizontal"==l?i.rtl:i.ttb;h.lastView=!1}return n&&n.element.css("z-index",0).css("position","absolute"),h.element.appendTo(u).css("left",d.newView.left).css("top",d.newView.top).css("opacity",0).css("z-index",1).show(),n.element.animate({opacity:0,left:d.oldView.left,top:d.oldView.top},s.options.transition.duration||"slow",s.options.transition.easing||"linear",function(){n.element.hide().css("position","relative").css("opacity",1).css("left",0)}),A(),Z(),void h.element.animate({opacity:1,left:0,top:0},s.options.transition.duration||"slow",s.options.transition.easing||"linear",function(){n.element.hide().css("position","relative"),h.transitionEnded&&h.transitionEnded(n),X(),M--,u.find(".fc-view:hidden").remove()})}h.transitionEnded&&h.transitionEnded(n)}A(),X(),M--}(t)}function A(e){(!h.start||e||S<h.start||S>=h.end)&&j()&&z(e)}function z(t){if(M++,h.start&&(ee("viewDestroy",h,h,h.element),G(),K()),Z(),h.render(S,t||0),s.options.skipMonths&&-1!=e.inArray(S.getMonth(),s.options.skipMonths)){increase=t||1;for(var n=0;n++<366;){if(-1==e.inArray(S.getMonth(),s.options.skipMonths)){h.render(S,0);break}S.setDate(S.getDate()+increase)}}var r;W(),X(),(h.afterRender||function(){})(),c.updateTitle(h.title),(r=new Date)>=h.start&&r<h.end?c.disableButton("today"):c.enableButton("today"),ee("viewRender",h,h,h.element),h.trigger("viewDisplay",C),M--,!a.lazyFetching||w(h.visStart,h.visEnd)?J():V()}function Y(){if(j()){if(G(),K(),Q(),W(),"rhc_event"==h.name)return;V()}}function Q(){y=a.contentHeight?a.contentHeight:a.height?a.height-(f?f.height():0)-H(u):Math.round(u.width()/Math.max(a.aspectRatio,.5))}function W(){y===t&&Q(),M++,h.setHeight(y),h.setWidth(u.width()),M--,p=n.outerWidth()}function B(){if(!M)if(h.start){var e=++T;setTimeout(function(){e==T&&!M&&j()&&p!=(p=n.outerWidth())&&(M++,Y(),h.trigger("windowResize",C),M--)},200)}else O()}function P(e){K(),V(e)}function V(e){j()&&(h.setEventData(L),h.renderEvents(L,e),h.trigger("eventAfterAllRender"))}function K(){h.triggerEventDestroy(),h.clearEvents(),h.clearEventData()}function J(){k(h.visStart,h.visEnd)}function G(){h&&h.unselect()}function Z(){u.css({width:"100%",height:u.height(),overflow:"hidden"})}function X(){u.css({width:"",height:"",overflow:""})}function ee(e,t){if(a[e])return a[e].apply(t||C,Array.prototype.slice.call(arguments,2))}s.date=S,x(S,a.year,a.month,a.date),a.droppable&&e(document).bind("dragstart",function(t,n){var r=t.target,i=e(r);if(!i.parents(".fc").length){var o=a.dropAccept;(e.isFunction(o)?o.call(r,i):i.is(o))&&(_=r,h.dragStart(_,t,n))}}).bind("dragstop",function(e,t){_&&(h.dragStop(_,e,t),_=null)})}(s,a,f);s.data("fullCalendar",c),c.render()}),this},i.sourceNormalizers=[],i.sourceFetchers=[];var l={dataType:"json",cache:!1},d=1;i.addDays=g,i.cloneDate=b,i.parseDate=D,i.parseISO8601=T,i.parseTime=M,i.formatDate=$,i.formatDates=E,i.addMonths=v;var c=["sun","mon","tue","wed","thu","fri","sat"],f=864e5,u=36e5,p=6e4;function m(e,t,n){return e.setFullYear(e.getFullYear()+t),n||w(e),e}function v(e,t,n){if(+e){var a=e.getMonth()+t,r=b(e);for(r.setDate(1),r.setMonth(a),e.setMonth(a),n||w(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(e<r?1:-1))}return e}function g(e,t,n){if(+e){var a=e.getDate()+t,r=b(e);r.setHours(9),r.setDate(a),e.setDate(a),n||w(e),y(e,r)}return e}function y(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(e<t?1:-1)*u)}function _(e,t){return e.setMinutes(e.getMinutes()+t),e}function w(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function b(e,t){return t?w(new Date(+e)):new Date(+e)}function k(){var e,t=0;do{e=new Date(1970,t++,1)}while(e.getHours());return e}function C(e,t){return Math.round((b(e,!0)-b(t,!0))/f)}function x(e,n,a,r){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),a!==t&&a!=e.getMonth()&&(e.setDate(1),e.setMonth(a)),r!==t&&e.setDate(r)}function D(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),T(e,n)||(e?new Date(e):null)):null}function T(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var a=new Date(n[1],0,1);if(t||!n[13]){var r=new Date(n[1],0,1,9,0);n[3]&&(a.setMonth(n[3]-1),r.setMonth(n[3]-1)),n[5]&&(a.setDate(n[5]),r.setDate(n[5])),y(a,r),n[7]&&a.setHours(n[7]),n[8]&&a.setMinutes(n[8]),n[10]&&a.setSeconds(n[10]),n[12]&&a.setMilliseconds(1e3*Number("0."+n[12])),y(a,r)}else if(a.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),a.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var i=60*Number(n[16])+(n[18]?Number(n[18]):0);i*="-"==n[15]?1:-1,a=new Date(+a+60*i*1e3)}return a}function M(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function $(e,t,n){return E(e,null,t,n)}function E(e,t,a,r){r=r||n;var i,o,s,l,d=e,c=t,f=a.length,u="";for(i=0;i<f;i++)if("'"==(o=a.charAt(i))){for(s=i+1;s<f;s++)if("'"==a.charAt(s)){d&&(u+=s==i+1?"'":a.substring(i+1,s),i=s);break}}else if("("==o){for(s=i+1;s<f;s++)if(")"==a.charAt(s)){var h=$(d,a.substring(i+1,s),r);parseInt(h.replace(/\D/,""),10)&&(u+=h),i=s;break}}else if("["==o){for(s=i+1;s<f;s++)if("]"==a.charAt(s)){var p=a.substring(i+1,s);(h=$(d,p,r))!=$(c,p,r)&&(u+=h),i=s;break}}else if("{"==o)d=t,c=e;else if("}"==o)d=e,c=t;else{for(s=f;s>i;s--)if(l=S[a.substring(i,s)]){d&&(u+=l(d,r)),i=s-1;break}s==i&&d&&(u+=o)}return u}var S={s:function(e){return e.getSeconds()},ss:function(e){return Y(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return Y(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return Y(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return Y(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return Y(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return Y(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return $(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&t<20?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return(n=new Date(e.getTime())).setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1;var t,n}};function L(e){return e.end?(t=e.end,n=e.allDay,t=b(t),n||t.getHours()||t.getMinutes()?g(t,1):w(t)):g(b(e.start),1);var t,n}function O(n,a,r){n.unbind("mouseover").mouseover(function(n){for(var i,o,s,l=n.target;l!=this;)i=l,l=l.parentNode;(o=i._fci)!==t&&(i._fci=t,s=a[o],r(s.event,s.element,s),e(n.target).trigger(n)),n.stopPropagation()})}function j(t,n,a){for(var r,i=0;i<t.length;i++)(r=e(t[i])).width(Math.max(0,n-I(r,a)))}function R(t,n,a){for(var r,i=0;i<t.length;i++)(r=e(t[i])).height(Math.max(0,n-H(r,a)))}function I(t,n){return i=t,(parseFloat(e.css(i[0],"paddingLeft",!0))||0)+(parseFloat(e.css(i[0],"paddingRight",!0))||0)+(r=t,(parseFloat(e.css(r[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(r[0],"borderRightWidth",!0))||0))+(n?(a=t,(parseFloat(e.css(a[0],"marginLeft",!0))||0)+(parseFloat(e.css(a[0],"marginRight",!0))||0)):0);var a,r,i}function H(t,n){return i=t,(parseFloat(e.css(i[0],"paddingTop",!0))||0)+(parseFloat(e.css(i[0],"paddingBottom",!0))||0)+(r=t,(parseFloat(e.css(r[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(r[0],"borderBottomWidth",!0))||0))+(n?(a=t,(parseFloat(e.css(a[0],"marginTop",!0))||0)+(parseFloat(e.css(a[0],"marginBottom",!0))||0)):0);var a,r,i}function A(e,t){return e-t}function z(e){return Math.max.apply(Math,e)}function Y(e){return(e<10?"0":"")+e}function N(e,n){if(e[n]!==t)return e[n];for(var a,r=n.split(/(?=[A-Z])/),i=r.length-1;i>=0;i--)if((a=e[r[i].toLowerCase()])!==t)return a;return e[""]}function Q(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function F(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function B(e,t){var n=e.source||{},a=e.color,r=n.color,i=t("eventColor"),o=e.backgroundColor||a||n.backgroundColor||r||t("eventBackgroundColor")||i,s=e.borderColor||a||n.borderColor||r||t("eventBorderColor")||i,l=e.textColor||n.textColor||t("eventTextColor"),d=[];return o&&d.push("background-color:"+o),s&&d.push("border-color:"+s),l&&d.push("color:"+l),d.join(";")}function q(t,n,a){if(e.isFunction(t)&&(t=[t]),t){var r,i;for(r=0;r<t.length;r++)i=t[r].apply(n,a)||i;return i}}function U(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function P(t,n,a){var r=this;r.renderBasic=function(n,a,v){k=n,C=a,x=v,S=A("theme")?"ui":"fc",L=A("columnFormat"),O=A("weekNumbers"),R=A("weekNumberTitle"),I="iso"!=A("weekNumberCalculation")?"w":"W",l||(m=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t));!function(){var n="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var e,t,n=S+"-widget-header",a="";for(a+="<thead><tr>",O&&(a+="<th class='fc-week-number "+n+"'>"+Q(R)+"</th>"),e=0;e<C;e++)t=q(0,e),a+="<th class='fc-day-header fc-"+c[t.getDay()]+" "+n+"'>"+Q(V(t,L))+"</th>";return a+="</tr></thead>"}()+function(){var e,t,n,a=S+"-widget-content",r="";for(r+="<tbody>",e=0;e<k;e++){for(r+="<tr class='fc-week'>",O&&(n=q(e,0),r+="<td class='fc-week-number "+a+"'><div>"+Q(V(n,I))+"</div></td>"),t=0;t<C;t++)n=q(e,t),r+=K(n);r+="</tr>"}return r+="</tbody>"}()+"</table>";i&&i.remove();i=e(n).appendTo(t),o=i.find("thead"),s=o.find(".fc-day-header"),l=i.find("tbody"),d=l.find("tr"),f=l.find(".fc-day"),u=d.find("td:first-child"),h=d.eq(0).find(".fc-day > div"),p=d.eq(0).find(".fc-day-content > div"),W(o.add(o.find("tr"))),W(d),d.eq(0).addClass("fc-first"),d.filter(":last").addClass("fc-last"),f.each(function(t,n){var a=q(Math.floor(t/C),t%C);z("dayRender",r,a,e(n))}),J(f)}()},r.setHeight=function(t){if(e(r.element).closest(".rhc_holder").is(".fc-small"))return;var n,a,i,s=t-o.height();"variable"==A("weekMode")?n=a=Math.floor(s/(1==k?2:6)):(n=Math.floor(s/k),a=s-n*(k-1));u.each(function(t,r){t<k&&(i=e(r)).find("> div").css("min-height",(t==k-1?a:n)-H(i))})},r.setWidth=function(e){v=e,$.clear(),E.clear(),_=0,O&&(_=o.find("th.fc-week-number").outerWidth());y=Math.floor((v-_)/C),j(s.slice(0,-1),y)},r.renderDayOverlay=Z,r.defaultSelectionEnd=function(e,t){return b(e)},r.renderSelection=function(e,t,n){Z(e,g(b(t),1),!0)},r.clearSelection=function(){N()},r.reportDayClick=function(e,t,n){var a=U(e),r=f[a.row*C+a.col];z("dayClick",r,e,t,n)},r.dragStart=function(e,t,n){M.start(function(e){N(),e&&X(e.row,e.col,e.row,e.col)},t)},r.dragStop=function(e,t,n){var a=M.stop();if(N(),a){var r=q(a);z("drop",e,r,!0,t,n)}},r.defaultEventEnd=function(e){return b(e.start)},r.getHoverListener=function(){return M},r.colLeft=function(e){return $.left(e)},r.colRight=function(e){return $.right(e)},r.colContentLeft=function(e){return E.left(e)},r.colContentRight=function(e){return E.right(e)},r.getIsCellAllDay=function(){return!0},r.allDayRow=function(e){return d.eq(e)},r.getRowCnt=function(){return k},r.getColCnt=function(){return C},r.getColWidth=function(){return y},r.getDaySegmentContainer=function(){return m},te.call(r,t,n,a),se.call(r),oe.call(r),function(){var e=this;e.renderEvents=function(t,n){e.renderDayEvents(t,n)},e.clearEvents=function(){e.getDaySegmentContainer().empty()},ne.call(e)}.call(r);var i,o,s,l,d,f,u,h,p,m,v,y,_,k,C,x,D,M,$,E,S,L,O,R,I,A=r.opt,z=r.trigger,Y=r.renderOverlay,N=r.clearOverlays,B=r.daySelectionMousedown,q=r.cellToDate,U=r.dateToCell,P=r.rangeToSegments,V=n.formatDate;function K(e){var t=S+"-widget-content",n=r.start.getMonth(),i=w(new Date),o="",s=["fc-day","fc-"+c[e.getDay()],t];if(e.getMonth()!=n&&s.push("fc-other-month"),+e==+i?s.push("fc-today",S+"-state-highlight"):e<i?s.push("fc-past"):s.push("fc-future"),o+="<td class='"+s.join(" ")+"' data-date='"+V(e,"yyyy-MM-dd")+"'><div>",x){switch(a){case"basicWeek":value=Q(V(e,L));break;case"month":value=e.getDate(),mobile_month_cell_num_format=A("mobile_month_cell_num_format"),mobile_month_cell_num_format&&1==parseInt(value)&&(value=Q(V(e,mobile_month_cell_num_format)));break;default:value=e.getDate()}o+="<div class='fc-day-number'>"+value+"</div>"}return o+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function J(e){e.click(G).mousedown(B)}function G(t){if(!A("selectable")){var n=T(e(this).data("date"));z("dayClick",this,n,!0,t)}}function Z(e,t,n){n&&D.build();for(var a=P(e,t,null),r=0;r<a.length;r++){var i=a[r];J(X(i.row,i.leftCol,i.row,i.rightCol))}}function X(e,n,a,r){var i=D.rect(e,n,a,r,t);return Y(i,t)}F(t.addClass("fc-grid")),D=new le(function(t,n){var a,r,i;s.each(function(t,o){a=e(o),r=a.offset().left,t&&(i[1]=r),i=[r],n[t]=i}),i[1]=r+a.outerWidth(),d.each(function(n,o){n<k&&(a=e(o),r=a.offset().top,n&&(i[1]=r),i=[r],t[n]=i)}),i[1]=r+a.outerHeight()}),M=new de(D),$=new ce(function(e){return h.eq(e)}),E=new ce(function(e){return p.eq(e)})}function V(n,a,r){var i=this;i.renderAgenda=function(t){X=t,he=be("theme")?"ui":"fc",pe=be("isRTL"),me=M(be("minTime")),ve=M(be("maxTime")),ge=be("columnFormat"),ye=be("weekNumbers"),_e=be("weekNumberTitle"),we="iso"!=be("weekNumberCalculation")?"w":"W",J=be("snapMinutes")||be("slotMinutes"),o?Re():function(){var t,a,r,i,o,s=he+"-widget-header",l=he+"-widget-content",d=be("slotMinutes")%15==0;Re(),y=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),be("allDaySlot")?(x=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(y),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+be("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",D=e(t).appendTo(y),Ie((T=D.find("tr")).find("td")),y.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):x=e([]);for($=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(y),E=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo($),S=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(E),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=k(),i=_(b(a),ve),_(a,me),ae=0,r=0;a<i;r++)o=a.getMinutes(),t+="<tr class='fc-slot"+r+" "+(o?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(d&&o?"&nbsp;":Oe(a,be("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",_(a,be("slotMinutes")),ae++;He((z=e(t+="</tbody></table>").appendTo(E)).find("td"))}()},i.setWidth=function(t){t,fe.clear(),ue.clear();var n=s.find("th:first");D&&(n=n.add(D.find("th:first")));n=n.add(z.find("th:first")),q=0,j(n.width("").each(function(t,n){q=Math.max(q,e(n).outerWidth())}),q);var a=o.find(".fc-agenda-gutter");D&&(a=a.add(D.find("th.fc-agenda-gutter")));var r=$[0].clientWidth;(P=$.width()-r)?(j(a,P),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");U=Math.floor((r-q)/X),j(l.slice(0,-1),U)},i.setHeight=function(e){e===t&&(e=N);N=e,je={};var n=d.position().top,a=$.position().top,r=Math.min(e-n,z.height()+a+1);v.height(r-H(m)),y.css("top",n),$.height(r-a-1),V=z.find("tr:first").height()+1,G=be("slotMinutes")/J,Z=V/G},i.afterRender=function(){!function(){var e=k(),t=b(e);t.setHours(be("firstHour"));var n=We(e,t)+1;function a(){$.scrollTop(n)}a(),setTimeout(a,0)}()},i.defaultEventEnd=function(e){var t=b(e.start);if(e.allDay)return t;return _(t,be("defaultEventMinutes"))},i.timePosition=We,i.getIsCellAllDay=Qe,i.allDayRow=function(e){return T},i.getCoordinateGrid=function(){return re},i.getHoverListener=function(){return ie},i.colLeft=function(e){return fe.left(e)},i.colRight=function(e){return fe.right(e)},i.colContentLeft=function(e){return ue.left(e)},i.colContentRight=function(e){return ue.right(e)},i.getDaySegmentContainer=function(){return x},i.getSlotSegmentContainer=function(){return S},i.getMinMinute=function(){return me},i.getMaxMinute=function(){return ve},i.getSlotContainer=function(){return E},i.getRowCnt=function(){return 1},i.getColCnt=function(){return X},i.getColWidth=function(){return U},i.getSnapHeight=function(){return Z},i.getSnapMinutes=function(){return J},i.defaultSelectionEnd=function(e,t){if(t)return b(e);return _(b(e),be("slotMinutes"))},i.renderDayOverlay=ze,i.renderSelection=function(e,t,n){n?be("allDaySlot")&&ze(e,g(b(t),1),!0):Be(e,t)},i.clearSelection=qe,i.reportDayClick=Pe,i.dragStart=function(e,t,n){ie.start(function(e){if(xe(),e)if(Qe(e))Ye(e.row,e.col,e.row,e.col);else{var t=Fe(e),n=_(b(t),be("defaultEventMinutes"));Ne(t,n)}},t)},i.dragStop=function(e,t,n){var a=ie.stop();xe(),a&&ke("drop",e,Fe(a),Qe(a),t,n)},te.call(i,n,a,r),se.call(i),oe.call(i),function(){var n=this;n.renderEvents=function(n,i){var o,s=n.length,l=[],c=[];for(o=0;o<s;o++)n[o].allDay?l.push(n[o]):c.push(n[o]);a("allDaySlot")&&(W(l,i),d());!function(n,i){var o,s,l,d,c,u,h,p,m,g,y,_,b,C,x,D,T=n.length,M="",$=f(),E=a("isRTL");for(o=0;o<T;o++)s=n[o],l=s.event,d=v(s.start,s.start),c=v(s.start,s.end),u=w(s.col),h=k(s.col),m=(p=(h-=.025*(p=h-u))-u)*(s.forwardCoord-s.backwardCoord),a("slotEventOverlap")&&(m=Math.max(2*(m-10),m)),E?(y=h-s.backwardCoord*p,g=y-m):(g=u+s.backwardCoord*p,y=g+m),g=Math.max(g,u),y=Math.min(y,h),m=y-g,e($[0]).closest(".rhcalendar").length>0&&e($[0]).closest(".rhcalendar").is(".rhc-timetable")&&(m+=5),s.top=d,s.left=g,s.outerWidth=m,s.outerHeight=c-d,M+=G(l,s);for($[0].innerHTML=M,_=$.children(),o=0;o<T;o++)s=n[o],l=s.event,b=e(_[o]),!1===(C=r("eventRender",l,l,b))?b.remove():(C&&!0!==C&&(b.remove(),b=e(C).css({position:"absolute",top:s.top,left:s.left}).appendTo($)),s.element=b,l._id===i?Z(l,b,s):b[0]._fci=o,S(l,b));for(O($,n,Z),o=0;o<T;o++)s=n[o],(b=s.element)&&(s.vsides=H(b,!0),s.hsides=I(b,!0),(x=b.find(".fc-event-title")).length&&(s.contentTop=x[0].offsetTop));for(o=0;o<T;o++)s=n[o],(b=s.element)&&(b[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",D=Math.max(0,s.outerHeight-s.vsides),b[0].style.height=D+"px",l=s.event,s.contentTop!==t&&D-s.contentTop<10&&(b.find("div.fc-event-time").text(U(l.start,a("timeFormat"))+" - "+l.title),b.find("div.fc-event-title").remove()),r("eventAfterRender",l,l,b))}(function(t){var n,a,r,i,o,s=D(),l=m(),d=h(),c=e.map(t,J),f=[];for(a=0;a<s;a++)for(_(n=x(0,a),l),o=K(o=V(t,c,n,_(b(n),d-l))),r=0;r<o.length;r++)(i=o[r]).col=a,f.push(i);return f}(c),i)},n.clearEvents=function(){c().empty(),f().empty()},n.slotSegHtml=G,ne.call(n);var a=n.opt,r=n.trigger,i=n.isEventDraggable,o=n.isEventResizable,s=n.eventEnd,l=n.eventElementHandlers,d=n.setHeight,c=n.getDaySegmentContainer,f=n.getSlotSegmentContainer,u=n.getHoverListener,h=n.getMaxMinute,m=n.getMinMinute,v=n.timePosition,y=n.getIsCellAllDay,w=n.colContentLeft,k=n.colContentRight,x=n.cellToDate,D=n.getColCnt,T=n.getColWidth,M=n.getSnapHeight,$=n.getSnapMinutes,E=n.getSlotContainer,S=n.reportEventElement,j=n.showEvents,A=n.hideEvents,z=n.eventDrop,Y=n.eventResize,N=n.renderDayOverlay,F=n.clearOverlays,W=n.renderDayEvents,q=n.calendar,U=q.formatDate,P=q.formatDates;function V(e,t,n,a){var r,i,o,s,l,d,c,f,u=[],h=e.length;for(r=0;r<h;r++)i=e[r],o=i.start,(s=t[r])>n&&o<a&&(o<n?(l=b(n),c=!1):(l=o,c=!0),s>a?(d=b(a),f=!1):(d=s,f=!0),u.push({event:i,start:l,end:d,isStart:c,isEnd:f}));return u.sort(ee)}function J(e){return e.end?b(e.end):_(b(e.start),a("defaultEventMinutes"))}function G(e,t){var n="<",r=e.url,s=B(e,a),l=["fc-event","fc-event-vert"];return i(e)&&l.push("fc-event-draggable"),t.isStart&&l.push("fc-event-start"),t.isEnd&&l.push("fc-event-end"),l=l.concat(e.className),e.source&&(l=l.concat(e.source.className||[])),n+=r?"a href='"+Q(e.url)+"'":"div",n+=" class='"+l.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+s+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Q(P(e.start,e.end,a("timeFormat")))+"</div><div class='fc-event-title'>"+Q(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&o(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function Z(e,t,d){var c,f,u,h,p,m,v,w=t.find("div.fc-event-time");i(e)&&function(e,t,i){var o,s,l,d,c,f,u,h,p,m,v,w=n.getCoordinateGrid(),k=D(),E=T(),S=M(),O=$();function R(){F(),l&&(c?(i.hide(),t.draggable("option","grid",null),N(g(b(e.start),p),g(L(e),p))):(!function(t){var n,r=_(b(e.start),t);e.end&&(n=_(b(e.end),t));i.text(P(r,n,a("timeFormat")))}(m),i.css("display",""),t.draggable("option","grid",[E,S])))}t.draggable({scroll:!1,grid:[E,S],axis:1==k&&"y",opacity:a("dragOpacity"),revertDuration:a("dragRevertDuration"),start:function(n,a){r("eventDragStart",t,e,n,a),A(e,t),w.build(),o=t.position(),s=w.cell(n.pageX,n.pageY),l=d=!0,c=f=y(s),u=h=0,p=0,m=v=0},drag:function(e,n){var a=w.cell(e.pageX,e.pageY);if(l=!!a){if(c=y(a),(u=Math.round((n.position.left-o.left)/E))!=h){var r=x(0,s.col),i=s.col+u;i=Math.max(0,i),i=Math.min(k-1,i);var g=x(0,i);p=C(g,r)}c||(m=Math.round((n.position.top-o.top)/S)*O)}l==d&&c==f&&u==h&&m==v||(R(),d=l,f=c,h=u,v=m),t.draggable("option","revert",!l)},stop:function(n,a){F(),r("eventDragStop",t,e,n,a),l&&(c||p||m)?z(this,e,p,c?0:m,c,n,a):(l=!0,c=!1,u=0,p=0,m=0,R(),t.css("filter",""),t.css(o),j(e,t))}})}(e,t,w),d.isEnd&&o(e)&&(c=e,f=t,u=w,m=M(),v=$(),f.resizable({handles:{s:".ui-resizable-handle"},grid:m,start:function(e,t){h=p=0,A(c,f),r("eventResizeStart",this,c,e,t)},resize:function(e,t){(h=Math.round((Math.max(m,f.height())-t.originalSize.height)/m))!=p&&(u.text(P(c.start,h||c.end?_(s(c),v*h):null,a("timeFormat"))),p=h)},stop:function(e,t){r("eventResizeStop",this,c,e,t),h?Y(this,c,0,v*h,e,t):j(c,f)}})),l(e,t)}n.draggableDayEvent=function(e,t,n){var i,o,s,l=n.isStart,d=!0,c=u(),f=T(),h=M(),v=$(),y=m();function _(){d||(t.width(i).height("").draggable("option","grid",null),d=!0)}t.draggable({opacity:a("dragOpacity","month"),revertDuration:a("dragRevertDuration"),start:function(n,u){r("eventDragStart",t,e,n,u),A(e,t),i=t.width(),c.start(function(n,r){if(F(),n){o=!1;var i=x(0,r.col),c=x(0,n.col);s=C(c,i),n.row?l?d&&(t.width(f-10),R(t,h*Math.round((e.end?(e.end-e.start)/p:a("defaultEventMinutes"))/v)),t.draggable("option","grid",[f,1]),d=!1):o=!0:(N(g(b(e.start),s),g(L(e),s)),_()),o=o||d&&!s}else _(),o=!0;t.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(c.stop(),F(),r("eventDragStop",t,e,n,a),o)_(),t.css("filter",""),j(e,t);else{var i=0;d||(i=Math.round((t.offset().top-E().offset().top)/h)*v+y-(60*e.start.getHours()+e.start.getMinutes())),z(this,e,s,i,d,n,a)}}})}}.call(i);var o,s,l,d,f,u,h,m,v,y,x,D,T,$,E,S,z,Y,N,q,U,P,V,J,G,Z,X,ae,re,ie,fe,ue,he,pe,me,ve,ge,ye,_e,we,be=i.opt,ke=i.trigger,Ce=i.renderOverlay,xe=i.clearOverlays,De=i.reportSelection,Te=i.unselect,Me=i.daySelectionMousedown,$e=i.slotSegHtml,Ee=i.cellToDate,Se=i.dateToCell,Le=i.rangeToSegments,Oe=a.formatDate,je={};function Re(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var e,t,n,a=he+"-widget-header",r="";for(r+="<thead><tr>",ye?(e=Ee(0,0),t=Oe(e,we),pe?t+=_e:t=_e+t,r+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+Q(t)+"</th>"):r+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;n<X;n++)e=Ee(0,n),r+="<th class='fc-"+c[e.getDay()]+" fc-col"+n+" "+a+"'>"+Q(Oe(e,ge))+"</th>";return r+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>"}()+function(){var e,t,n,a,r,i=he+"-widget-header",o=he+"-widget-content",s=w(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n="",t=0;t<X;t++)e=Ee(0,t),r=["fc-col"+t,"fc-"+c[e.getDay()],o],+e==+s?r.push(he+"-state-highlight","fc-today"):e<s?r.push("fc-past"):r.push("fc-future"),a="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=a;return l+=n,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}()+"</table>";o&&o.remove(),o=e(t).appendTo(n),s=o.find("thead"),l=s.find("th").slice(1,-1),d=o.find("tbody"),f=d.find("td").slice(0,-1),u=f.find("> div"),h=f.find(".fc-day-content > div"),m=f.eq(0),v=u.eq(0),W(s.add(s.find("tr"))),W(d.add(d.find("tr")))}function Ie(e){e.click(Ae).mousedown(Me)}function He(e){e.click(Ae).mousedown(Ue)}function Ae(e){if(!be("selectable")){var t=Math.min(X-1,Math.floor((e.pageX-o.offset().left-q)/U)),n=Ee(0,t),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var r=parseInt(a[1])*be("slotMinutes"),i=Math.floor(r/60);n.setHours(i),n.setMinutes(r%60+me),ke("dayClick",f[t],n,!1,e)}else ke("dayClick",f[t],n,!0,e)}}function ze(e,t,n){n&&re.build();for(var a=Le(e,t,null),r=0;r<a.length;r++){var i=a[r];Ie(Ye(i.row,i.leftCol,i.row,i.rightCol))}}function Ye(e,t,n,a){var r=re.rect(e,t,n,a,y);return Ce(r,y)}function Ne(e,t){for(var n=0;n<X;n++){var a=Ee(0,n),r=g(b(a),1),i=new Date(Math.max(a,e)),o=new Date(Math.min(r,t));if(i<o){var s=re.rect(0,n,0,n,E),l=We(a,i),d=We(a,o);s.top=l,s.height=d-l,He(Ce(s,E))}}}function Qe(e){return be("allDaySlot")&&!e.row}function Fe(e){var t=Ee(0,e.col),n=e.row;return be("allDaySlot")&&n--,n>=0&&_(t,me+n*J),t}function We(e,n){if(n<_(b(e=b(e,!0)),me))return 0;if(n>=_(b(e),ve))return z.height();var a=be("slotMinutes"),r=60*n.getHours()+n.getMinutes()-me,i=Math.floor(r/a),o=je[i];return o===t&&(o=je[i]=z.find("tr").eq(i).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+V*(r%a/a)))}function Be(t,n){var a=be("selectHelper");if(re.build(),a){var r=Se(t).col;if(r>=0&&r<X){var i=re.rect(0,r,0,r,E),o=We(t,t),s=We(t,n);if(s>o){if(i.top=o,i.height=s-o,i.left+=2,i.width-=5,e.isFunction(a)){var l=a(t,n);l&&(i.position="absolute",Y=e(l).css(i).appendTo(E))}else i.isStart=!0,i.isEnd=!0,(Y=e($e({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},i))).css("opacity",be("dragOpacity"));Y&&(He(Y),E.append(Y),j(Y,i.width,!0),R(Y,i.height,!0))}}}else Ne(t,n)}function qe(){xe(),Y&&(Y.remove(),Y=null)}function Ue(t){var n;1==t.which&&be("selectable")&&(Te(t),ie.start(function(e,t){if(qe(),e&&e.col==t.col&&!Qe(e)){var a=Fe(t),r=Fe(e);Be((n=[a,_(b(a),J),r,_(b(r),J)].sort(A))[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){ie.stop(),n&&(+n[0]==+n[1]&&Pe(n[0],!1,e),De(n[0],n[3],!1,e))}))}function Pe(e,t,n){ke("dayClick",f[Se(e).col],e,t,n)}F(n.addClass("fc-agenda")),re=new le(function(t,n){var a,r,i;l.each(function(t,o){a=e(o),r=a.offset().left,t&&(i[1]=r),i=[r],n[t]=i}),i[1]=r+a.outerWidth(),be("allDaySlot")&&(r=(a=T).offset().top,t[0]=[r,r+a.outerHeight()]);var o=E.offset().top,s=$.offset().top,d=s+$.outerHeight();function c(e){return Math.max(s,Math.min(d,e))}for(var f=0;f<ae*G;f++)t.push([c(o+Z*f),c(o+Z*(f+1))])}),ie=new de(re),fe=new ce(function(e){return u.eq(e)}),ue=new ce(function(e){return h.eq(e)})}function K(e){var t,n=function(e){var t,n,a,r=[];for(t=0;t<e.length;t++){for(n=e[t],a=0;a<r.length&&Z(n,r[a]).length;a++);(r[a]||(r[a]=[])).push(n)}return r}(e),a=n[0];if(function(e){var t,n,a,r,i;for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)for((r=n[a]).forwardSegs=[],i=t+1;i<e.length;i++)Z(r,e[i],r.forwardSegs)}(n),a){for(t=0;t<a.length;t++)J(a[t]);for(t=0;t<a.length;t++)G(a[t],0,0)}return function(e){var t,n,a,r=[];for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)r.push(n[a]);return r}(n)}function J(e){var n,a,r=e.forwardSegs,i=0;if(e.forwardPressure===t){for(n=0;n<r.length;n++)J(a=r[n]),i=Math.max(i,1+a.forwardPressure);e.forwardPressure=i}}function G(e,n,a){var r,i=e.forwardSegs;if(e.forwardCoord===t)for(i.length?(i.sort(X),G(i[0],n+1,a),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-a)/(n+1),r=0;r<i.length;r++)G(i[r],0,e.forwardCoord)}function Z(e,t,n){n=n||[];for(var a=0;a<t.length;a++)r=e,i=t[a],r.end>i.start&&r.start<i.end&&n.push(t[a]);var r,i;return n}function X(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ee(e,t)}function ee(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function te(n,r,i){var o=this;o.element=n,o.calendar=r,o.name=i,o.opt=p,o.trigger=m,o.isEventDraggable=function(e){var t=e.source||{};return U(e.startEditable,t.startEditable,p("eventStartEditable"),e.editable,t.editable,p("editable"))&&!p("disableDragging")},o.isEventResizable=function(e){var t=e.source||{};return U(e.durationEditable,t.durationEditable,p("eventDurationEditable"),e.editable,t.editable,p("editable"))&&!p("disableResizing")},o.setEventData=function(e){c={};var t,n,a=e.length;for(t=0;t<a;t++)n=e[t],c[n._id]?c[n._id].push(n):c[n._id]=[n]},o.clearEventData=function(){c={},f={},u=[]},o.eventEnd=v,o.reportEventElement=function(e,t){u.push({event:e,element:t}),f[e._id]?f[e._id].push(t):f[e._id]=[t]},o.triggerEventDestroy=function(){e.each(u,function(e,t){o.trigger("eventDestroy",t.event,t.event,t.element)})},o.eventElementHandlers=function(e,t){t.click(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return m("eventClick",this,e,n)}).hover(function(t){m("eventMouseover",this,e,t)},function(t){m("eventMouseout",this,e,t)})},o.showEvents=function(e,t){y(e,t,"show")},o.hideEvents=function(e,t){y(e,t,"hide")},o.eventDrop=function(e,t,n,a,r,i,o){var s=t.allDay,l=t._id;w(c[l],n,a,r),m("eventDrop",e,t,n,a,r,function(){w(c[l],-n,-a,s),d(l)},i,o),d(l)},o.eventResize=function(e,t,n,a,r,i){var o=t._id;k(c[o],n,a),m("eventResize",e,t,n,a,function(){k(c[o],-n,-a),d(o)},r,i),d(o)};var s=o.defaultEventEnd,l=r.normalizeEvent,d=r.reportEventChange,c={},f={},u=[],h=r.options;function p(t,n){var a=h[t];return e.isPlainObject(a)?N(a,n||i):a}function m(e,t){return r.trigger.apply(r,[e,t||o].concat(Array.prototype.slice.call(arguments,2),[o]))}function v(e){return e.end?b(e.end):s(e)}function y(e,t,n){var a,r=f[e._id],i=r.length;for(a=0;a<i;a++)t&&r[a][0]==t[0]||r[a][n]()}function w(e,n,a,r){a=a||0;for(var i,o=e.length,s=0;s<o;s++)i=e[s],r!==t&&(i.allDay=r),_(g(i.start,n,!0),a),i.end&&(i.end=_(g(i.end,n,!0),a)),l(i,h)}function k(e,t,n){n=n||0;for(var a,r=e.length,i=0;i<r;i++)(a=e[i]).end=_(g(v(a),t,!0),n),l(a,h)}o.isHiddenDay=function(e){"object"==typeof e&&(e=e.getDay());return T[e]},o.skipHiddenDays=function(e,t,n){t=t||1;for(;T[(e.getDay()+(n?t:0)+7)%7];)g(e,t)},o.getCellsPerWeek=function(){return x},o.dateToCell=function(e){return I(R(j(e)))},o.dateToDayOffset=j,o.dayOffsetToCellOffset=R,o.cellOffsetToCell=I,o.cellToDate=function(){return O(L(S.apply(null,arguments)))},o.cellToCellOffset=S,o.cellOffsetToDayOffset=L,o.dayOffsetToDate=O,o.rangeToSegments=function(t,n,r){var i=o.getRowCnt(),s=o.getColCnt(),l=[],d=j(t),c=j(n);nextDayThreshold=!(!h.nextDayThreshold||""==h.nextDayThreshold)&&parseInt(h.nextDayThreshold),r&&r.end&&r.end.getHours&&!1!==nextDayThreshold&&c-d>1&&r.end.getHours()<=nextDayThreshold&&(c-=1);for(var f=R(d),u=R(c)-1,p=0;p<i;p++){var m=p*s,v=m+s-1,g=Math.max(f,m),y=Math.min(u,v);if(g<=y){var _=I(g),w=I(y),b=[_.col,w.col].sort(),k=L(g)==d,C=L(y)+1==c;l.push({row:p,leftCol:b[0],rightCol:b[1],isStart:k,isEnd:C})}}if(e(o.element).parents(".rhcalendar.not-widget").hasClass("fc-small"))return new_segments=[],e.each(l,function(e,t){if(leftCol=t.leftCol,rightCol=t.rightCol,leftCol<rightCol)for(a=leftCol;a<=rightCol;a++){var n=jQuery.extend({},t);n.leftCol=a,n.rightCol=a,new_segments.push(n)}else new_segments.push(t)}),new_segments;return l};var x,D=p("hiddenDays")||[],T=[],M=[],$=[],E=p("isRTL");function S(e,t){var n=o.getColCnt(),a=E?-1:1,r=E?n-1:0;return"object"==typeof e&&(t=e.col,e=e.row),e*n+(t*a+r)}function L(e){var t=o.visStart.getDay();return e+=M[t],7*Math.floor(e/x)+$[(e%x+x)%x]-t}function O(e){var t=b(o.visStart);return g(t,e),t}function j(e){return C(e,o.visStart)}function R(e){var t=o.visStart.getDay();return e+=t,Math.floor(e/7)*x+M[(e%7+7)%7]-M[t]}function I(e){var t=o.getColCnt(),n=E?-1:1,a=E?t-1:0;return{row:Math.floor(e/t),col:(e%t+t)%t*n+a}}!function(){!1===p("weekends")&&D.push(0,6);for(var t=0,n=0;t<7;t++)M[t]=n,T[t]=-1!=e.inArray(t,D),T[t]||($[n]=t,n++);if(!(x=n))throw"invalid hiddenDays"}()}function ne(){var t=this;t.renderDayEvents=function(e,t){var n=W(e,!1,!0);re(n,function(e,t){s(e.event,t)}),r=n,i=t,o=x(),re(r,function(e,t,n){var a=e.event;a._id===i?V(a,t,e):t[0]._fci=n}),O(o,r,V),re(n,function(e,t){a("eventAfterRender",e.event,e.event,t)});var r,i,o},t.draggableDayEvent=function(e,t){var r,i=S();t.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,o){a("eventDragStart",t,e,n,o),c(e,t),i.start(function(n,a,i,o){if(t.draggable("option","revert",!n||!i&&!o),M(),n){var s=R(a),l=R(n);r=C(l,s),T(g(b(e.start),r),g(L(e),r))}else r=0},n,"drag")},stop:function(n,o){i.stop(),M(),a("eventDragStop",t,e,n,o),r?f(this,e,r,0,e.allDay,n,o):(t.css("filter",""),d(e,t))}})},t.resizableDayEvent=function(t,r,i){var s=n("isRTL")?"w":"e",l=r.find(".ui-resizable-"+s),f=!1;F(r),r.mousedown(function(e){e.preventDefault()}).click(function(e){f&&(e.preventDefault(),e.stopImmediatePropagation())}),l.mousedown(function(n){if(1==n.which){f=!0;var l,h,v=S(),y=(p(),m(),r.css("top")),_=e.extend({},t),w=N(Y(t.start));E(),e("body").css("cursor",s+"-resize").one("mouseup",function(n){a("eventResizeStop",this,t,n),e("body").css("cursor",""),v.stop(),M(),l&&u(this,t,l,0,n);setTimeout(function(){f=!1},0)}),a("eventResizeStart",this,t,n),v.start(function(n,a){if(n){var r=H(a),f=H(n);if(f=Math.max(f,w),l=A(f)-A(r)){_.end=g(o(t),l,!0);var u=h;p=_,m=i.row,v=y,b=W([p],!0,!1),k=[],re(b,function(e,t){e.row===m&&t.css("top",v),k.push(t[0])}),(h=e(h=k)).find("*").css("cursor",s+"-resize"),u&&u.remove(),c(t)}else h&&(d(t),h.remove(),h=null);M(),T(t.start,g(L(t),l))}var p,m,v,b,k},n)}})};var n=t.opt,a=t.trigger,r=t.isEventDraggable,i=t.isEventResizable,o=t.eventEnd,s=t.reportEventElement,l=t.eventElementHandlers,d=t.showEvents,c=t.hideEvents,f=t.eventDrop,u=t.eventResize,p=t.getRowCnt,m=t.getColCnt,v=(t.getColWidth,t.allDayRow),y=t.colLeft,_=t.colRight,w=t.colContentLeft,k=t.colContentRight,x=(t.dateToCell,t.getDaySegmentContainer),D=t.calendar.formatDates,T=t.renderDayOverlay,M=t.clearOverlays,E=t.clearSelection,S=t.getHoverListener,j=t.rangeToSegments,R=t.cellToDate,H=t.cellToCellOffset,A=t.cellOffsetToDayOffset,Y=t.dateToDayOffset,N=t.dayOffsetToCellOffset;function W(t,r,i){var o,s,l=x(),d=r?e("<div/>"):l,c=function(e){for(var t=[],n=0;n<e.length;n++){var a=q(e[n]);t.push.apply(t,a)}return t}(t);!function(e){for(var t=n("isRTL"),a=0;a<e.length;a++){var r=e[a],i=(t?r.isEnd:r.isStart)?w:y,o=(t?r.isStart:r.isEnd)?k:_,s=i(r.leftCol),l=o(r.rightCol);r.left=s,r.outerWidth=l-s}}(c),o=function(e){for(var t="",n=0;n<e.length;n++)t+=U(e[n]);return t}(c),d[0].innerHTML=o,s=d.children(),r&&l.append(s),function(t,n){for(var r=0;r<t.length;r++){var i=t[r],o=i.event,s=n.eq(r),l=a("eventRender",o,o,s);!1===l?s.remove():(l&&!0!==l&&(l=e(l).css({position:"absolute",left:i.left}),s.replaceWith(l),s=l),i.element=s)}}(c,s);var f=e(l).closest(".rhc_holder");return f.find(".fc-day").removeClass("has-event"),re(c,function(e,t){_date=$(e.event.start,"yyyy-MM-dd"),f.find('[data-date="'+_date+'"]').addClass("has-event")}),re(c,function(e,t){e.hsides=I(t,!0)}),re(c,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),re(c,function(e,t){e.outerHeight=t.outerHeight(!0)}),function(t,n){!function(e){for(var t=p(),n=m(),a=[],r=function(e){var t,n,a,r=p(),i=[];for(t=0;t<e.length;t++)n=e[t],a=n.row,n.element&&(i[a]?i[a].push(n):i[a]=[n]);for(a=0;a<r;a++)i[a]=P(i[a]||[]);return i}(e),i=0;i<t;i++){for(var o=r[i],s=[],l=0;l<n;l++)s.push(0);for(var d=0;d<o.length;d++){var c=o[d];c.top=z(s.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;l<=c.rightCol;l++)s[l]=c.top+c.outerHeight}a.push(z(s))}}(t);var a=function(){var e,t=p(),n=[];for(e=0;e<t;e++)n[e]=v(e).find("div.fc-day-content > div");return n}(),r=[];{var i=p(),o=(m(),[]);for(row=0;row<i;row++)o[row]=[],re(t,function(e,t){if(e.row==row&&!(e.leftCol>e.rightcol))for(col=e.leftCol;col<=e.rightCol;col++)o[row][col]=o[row][col]||0,o[row][col]+=e.outerHeight});if(n)for(var s=0;s<a.length;s++)if(a[s].length>=o[s].length)for(var l=0;l<a[s].length;l++)h=!(!o[s]||!o[s][l])&&o[s][l],!1===h?a[s].eq(l).addClass("fc-day-no-events"):a[s].eq(l).height(h);else new_h=0,e.each(o[s],function(e,t){new_h=t>new_h?t:new_h}),a[s].height(new_h);for(var s=0;s<a.length;s++)for(var l=0;l<a[s].length;l++)r[s]=r[s]||[],r[s][l]=a[s].eq(l).position().top;re(t,function(e,t){contentTop=r[e.row][e.leftCol]||r[e.row][0],t.css("top",contentTop+e.top)})}}(c,i),c}function q(e){for(var t=e.start,n=L(e),a=j(t,n,e),r=0;r<a.length;r++)a[r].event=e;return a}function U(e){var t="",a=n("isRTL"),o=e.event,s=o.url,l=["fc-event","fc-event-hori"];r(o)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-event-start"),e.isEnd&&l.push("fc-event-end"),l=l.concat(o.className),o.source&&(l=l.concat(o.source.className||[]));var d=B(o,n);return t+=s?"<a href='"+Q(s)+"'":"<div",t+=" class='"+l.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+d+"'><div class='fc-event-inner'>",!o.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+Q(D(o.start,o.end,n("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+Q(o.title||"")+"</span></div>",e.isEnd&&i(o)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(a?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(s?"a":"div")+">"}function P(e){for(var t=[],n=function(e){e.sort(ie);for(var t=[],n=0;n<e.length;n++){for(var a=e[n],r=0;r<t.length&&ae(a,t[r]);r++);t[r]?t[r].push(a):t[r]=[a]}return t}(e),a=0;a<n.length;a++)t.push.apply(t,n[a]);return t}function V(e,n,a){r(e)&&t.draggableDayEvent(e,n,a),a.isEnd&&i(e)&&t.resizableDayEvent(e,n,a),l(e,n)}}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.leftCol<=e.rightCol&&a.rightCol>=e.leftCol)return!0}return!1}function re(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.element;r&&t(a,r,n)}}function ie(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function oe(){var t=this;t.select=function(e,t,n){l(),t||(t=r(e,n));i(e,t,n),d(e,t,n)},t.unselect=l,t.reportSelection=d,t.daySelectionMousedown=function(a){var r=t.cellToDate,s=t.getIsCellAllDay,c=t.getHoverListener(),f=t.reportDayClick;if(1==a.which&&n("selectable")){l(a);var u;c.start(function(e,t){o(),e&&s(e)?(u=[r(t),r(e)].sort(A),i(u[0],u[1],!0)):u=null},a),e(document).one("mouseup",function(e){c.stop(),u&&(+u[0]==+u[1]&&f(u[0],!0,e),d(u[0],u[1],!0,e))})}};var n=t.opt,a=t.trigger,r=t.defaultSelectionEnd,i=t.renderSelection,o=t.clearSelection,s=!1;function l(e){s&&(s=!1,o(),a("unselect",null,e))}function d(e,t,n,r){s=!0,a("select",null,e,t,n,r)}n("selectable")&&n("unselectAuto")&&e(document).mousedown(function(t){var a=n("unselectCancel");a&&e(t.target).parents(a).length||l(t)})}function se(){this.renderOverlay=function(a,r){var i=n.shift();i||(i=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));i[0].parentNode!=r[0]&&i.appendTo(r);return t.push(i.css(a).show()),i},this.clearOverlays=function(){var e;for(;e=t.shift();)n.push(e.hide().unbind())};var t=[],n=[]}function le(e){var t,n;this.build=function(){e(t=[],n=[])},this.cell=function(e,a){var r,i=t.length,o=n.length,s=-1,l=-1;for(r=0;r<i;r++)if(a>=t[r][0]&&a<t[r][1]){s=r;break}for(r=0;r<o;r++)if(e>=n[r][0]&&e<n[r][1]){l=r;break}return s>=0&&l>=0?{row:s,col:l}:null},this.rect=function(e,a,r,i,o){var s=o.offset();return{top:t[e][0]-s.top,left:n[a][0]-s.left,width:n[i][1]-n[a][0],height:t[r][1]-t[e][0]}}}function de(n){var a,r,i,o;function s(e){var a;(a=e).pageX===t&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY);var s=n.cell(e.pageX,e.pageY);(!s!=!o||s&&(s.row!=o.row||s.col!=o.col))&&(s?(i||(i=s),r(s,i,s.row-i.row,s.col-i.col)):r(s,i),o=s)}this.start=function(t,l,d){r=t,i=o=null,n.build(),s(l),a=d||"mousemove",e(document).bind(a,s)},this.stop=function(){return e(document).unbind(a,s),o}}function ce(e){var n=this,a={},r={},i={};function o(t){return a[t]=a[t]||e(t)}n.left=function(e){return r[e]=r[e]===t?o(e).position().left:r[e]},n.right=function(e){return i[e]=i[e]===t?n.left(e)+o(e).width():i[e]},n.clear=function(){a={},r={},i={}}}i.dateFormatters=S,i.applyAll=q,o.month=function(e,t){var n=this;n.render=function(e,l){var d=a("left_trim_date")?Math.abs(parseInt(a("left_trim_date"))):0,c=a("right_trim_date")?Math.abs(parseInt(a("right_trim_date"))):0;c=c>28?28:c,(d=d>28?28:d)&&c&&d>c&&(_tmp=d,d=c,c=_tmp);var f=!1;a("upcoming")&&a("upcoming_trim_past")&&(f=0!=(f=parseInt(a("upcoming_trim_past"))));var u=new Date;l&&(v(e,l),e.setDate(1));var h=a("firstDay"),p=b(e,!0);if(p.setDate(1),end=v(b(p),1),f&&end.getTime()<u.getTime())return void t.next();(f=f&&p.getTime()<u.getTime())&&(p=new Date,e=b(p,!0),end=v(b(p),1),end.setDate(0),end.setHours(23,59,59));d&&p.setDate(d);c&&(end=b(p),end.setDate(c),end.setHours(23,59,59));var m=b(p);g(m,-(m.getDay()-h+7)%7),i(m);var y=b(end);g(y,(7-y.getDay()+h)%7),i(y,-1,!0);var _=o(),w=Math.ceil(C(y,m)/7);if("fixed"==a("weekMode")&&(_weeks_to_add=6-w,_weeks_to_add>0&&g(y,7*_weeks_to_add),w=6,f))var w=Math.ceil(C(y,m)/7);n.title=s(p,a("titleFormat")),n.start=p,n.end=end,n.visStart=m,n.visEnd=y,r(w,_,!0)},P.call(n,e,t,"month");var a=n.opt,r=n.renderBasic,i=n.skipHiddenDays,o=n.getCellsPerWeek,s=t.formatDate},o.basicWeek=function(e,t){var n=this;n.render=function(e,t){t&&g(e,7*t);var l=g(b(e),-(e.getDay()-a("firstDay")+7)%7),d=g(b(l),7),c=b(l);i(c);var f=b(d);i(f,-1,!0);var u=o();n.start=l,n.end=d,n.visStart=c,n.visEnd=f,n.title=s(c,g(b(f),-1),a("titleFormat")),r(1,u,!0)},P.call(n,e,t,"basicWeek");var a=n.opt,r=n.renderBasic,i=n.skipHiddenDays,o=n.getCellsPerWeek,s=t.formatDates},o.basicDay=function(e,t){var n=this;n.render=function(e,t){t&&g(e,t);i(e,t<0?-1:1);var s=b(e,!0),l=g(b(s),1);n.title=o(e,a("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,r(1,1,!1)},P.call(n,e,t,"basicDay");var a=n.opt,r=n.renderBasic,i=n.skipHiddenDays,o=t.formatDate},s({weekMode:"fixed"}),o.agendaWeek=function(e,t){var n=this;n.render=function(e,t){t&&g(e,7*t);var l=g(b(e),-(e.getDay()-a("firstDay")+7)%7),d=g(b(l),7),c=b(l);i(c);var f=b(d);i(f,-1,!0);var u=o();n.title=s(c,g(b(f),-1),a("titleFormat")),n.start=l,n.end=d,n.visStart=c,n.visEnd=f,r(u)},V.call(n,e,t,"agendaWeek");var a=n.opt,r=n.renderAgenda,i=n.skipHiddenDays,o=n.getCellsPerWeek,s=t.formatDates},o.agendaDay=function(e,t){var n=this;n.render=function(e,t){t&&g(e,t);i(e,t<0?-1:1);var s=b(e,!0),l=g(b(s),1);n.title=o(e,a("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,r(1)},V.call(n,e,t,"agendaDay");var a=n.opt,r=n.renderAgenda,i=n.skipHiddenDays,o=t.formatDate},s({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e){var t=e.fullCalendar,n=t.formatDate,a=t.parseISO8601,r=t.addDays,i=t.applyAll;t.sourceNormalizers.push(function(e){("gcal"==e.dataType||void 0===e.dataType&&(e.url||"").match(/^(http|https):\/\/www.google.com\/calendar\/feeds\//))&&(e.dataType="gcal",void 0===e.editable&&(e.editable=!1))}),t.sourceFetchers.push(function(t,o,s){if("gcal"==t.dataType)return function(t,o,s){var l=t.success,d=e.extend({},t.data||{},{"start-min":n(o,"u"),"start-max":n(s,"u"),singleevents:!0,"max-results":9999}),c=t.currentTimezone;c&&(d.ctz=c=c.replace(" ","_"));return e.extend({},t,{url:t.url.replace(/\/basic$/,"/full")+"?alt=json-in-script&callback=?",dataType:"jsonp",data:d,startParam:!1,endParam:!1,success:function(t){var n=[];t.feed.entry&&e.each(t.feed.entry,function(t,i){var o,s=i.gd$when[0].startTime,l=a(s,!0),d=a(i.gd$when[0].endTime,!0),f=-1==s.indexOf("T");e.each(i.link,function(e,t){"text/html"==t.type&&(o=t.href,c&&(o+=(-1==o.indexOf("?")?"?":"&")+"ctz="+c))}),f&&r(d,-1),n.push({id:i.gCal$uid.value,title:i.title.$t,url:o,start:l,end:d,allDay:f,location:i.gd$where[0].valueString,description:i.content.$t})});var o=[n].concat(Array.prototype.slice.call(arguments,1)),s=i(l,this,o);return e.isArray(s)?s:n}})}(t,o,s)}),t.gcalFeed=function(t,n){return e.extend({},n,{url:t,dataType:"gcal"})}}(jQuery),function(e){function t(t,n){var a,r=this;function i(e,t,n,a){e.each(t,function(t,r){void 0!==a.extended_detail_cache[r]&&n.find(".ext_det_"+r).each(function(t,n){var i=a.extended_detail_cache[r].clone(),o=e(n).data("ev");if(i.find(".postmeta-fc_start .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extDateFormat||"MMMM d, yyyy",a.options)),i.find(".postmeta-fc_start_time .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extTimeFormat||"h:mm tt",a.options)),i.find(".postmeta-fc_start_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",a.options)),i.find(".postmeta-fc_end .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extDateFormat||"MMMM d, yyyy",a.options)),i.find(".postmeta-fc_end_time .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extTimeFormat||"h:mm tt",a.options)),i.find(".postmeta-fc_end_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",a.options)),i.find(".fc-button-social-panels").length>0){var s=i.find(".fc-button-social-panels");new_rhp_vars=s.data("rhp_vars"),new_rhp_vars.shareLink=o.url,new_rhp_vars.shareRedirectURI=o.url,s.data("rhp_vars",new_rhp_vars)}i.find(".fe-image-holder").RHCLink(o,e(n).closest(".fullCalendar").fullCalendar("getView")),original=e(n).replaceWith(i),i.parent().find(".ext-list-loading").fadeOut("fast")})}),e("BODY").trigger("dbox.loaded")}function o(e,t){return n.trigger.apply(n,[e,t||r].concat(Array.prototype.slice.call(arguments,2),[r]))}function s(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function l(e,t){return e.start<t.start?1:e.start>t.start?-1:0}r.name="rhc_event",r.render=function(i,o){var s=n.options.eventList.stack&&1==parseInt(n.options.eventList.stack)||!1;r.direction=o,custom_delta=parseInt(n.options.eventList.delta),custom_delta=isNaN(custom_delta)?0:custom_delta,date_changed=!1,s&&custom_delta>0&&r.first_date&&r.direction<0&&i>r.first_date&&(i=fc.cloneDate(r.first_date),date_changed=!0);0==r.direction?r.first_date=fc.cloneDate(i):r.direction<0&&r.first_date<i&&(r.first_date=fc.cloneDate(i));o&&custom_delta>0&&(fc.addDays(i,custom_delta*o),o=0);date_changed&&n.gotoDate(i);custom_delta>0?(start=fc.cloneDate(i,!0),end=fc.addDays(fc.cloneDate(start),custom_delta),_end=fc.cloneDate(end)):_end=!1;r.start=fc.cloneDate(i,!0),a||(e('<div class="fc-events-holder"></div>').appendTo(t),a=!0);r.oldView||(r.oldView=new e.fullCalendar.views.month(e("<div>"),n));r.oldView&&(custom_delta?r.oldView.render(fc.cloneDate(i),o):r.oldView.render(i,o),_end=!1===_end?fc.cloneDate(r.oldView.visEnd):_end,r.oldView.visStart&&r.oldView.visEnd&&(r.title=r.oldView.title,custom_delta?(r.start=fc.cloneDate(start),r.end=fc.cloneDate(end),r.visStart=fc.cloneDate(start),r.visEnd=fc.cloneDate(end)):(r.start=fc.cloneDate(r.oldView.start),r.end=fc.cloneDate(r.oldView.end),r.visStart=fc.cloneDate(r.oldView.start),r.visEnd=fc.cloneDate(r.oldView.visEnd)),n.options.eventList.TitleFormat&&(n.options.eventList.TitleFormat=n.options.eventList.TitleFormat.replace(/&#91;/g,"["),n.options.eventList.TitleFormat=n.options.eventList.TitleFormat.replace(/&#93;/g,"]"),r.title=fc.formatDates(fc.cloneDate(r.visStart),fc.addDays(fc.cloneDate(_end),-1),n.options.eventList.TitleFormat,n.options))));if(n.options.eventList.upcoming&&"1"==n.options.eventList.upcoming){var l=new Date;l.setHours(0,0,0),dayspast=n.options.widgetlist.dayspast||0,l.setDate(l.getDate()-parseInt(dayspast)),r.visStart=r.visStart.getTime()>l.getTime()?r.visStart:l}var d=n.options.eventList.monthsahead?n.options.eventList.monthsahead:"";if((d=""==d.replace(" ","")?custom_delta>0?0:1:parseInt(d))>0){var c=new Date(r.visStart);c.setMonth(c.getMonth()+d),r.visEnd=c}var f=n.options.eventList.daysahead?n.options.eventList.daysahead:"";if((f=""==f.replace(" ","")?0:parseInt(f))>0){var c=new Date(r.visStart);c.setDate(c.getDate()+f-1),c.setHours(23,59,59),r.visEnd=c}if(parseInt(n.options.eventList.auto)&&parseInt(n.options.eventList.stack)){var u=e(t).parents(".rhc_holder").attr("id");void 0===e(document).data("rhc_event_scroll")&&(e(document).data("rhc_event_scroll",u),jQuery(document).scroll(function(){!function(t){if(!1===r.have_events)return;var a=e("#"+t+" .fc-view-rhc_event");if(a.is(":visible")&&!r.scroll_lockdown){var i=e(a).parents(".rhc_holder"),o=i.offset();if(window.mobile?paddingForMobile=1e3:paddingForMobile=0,e(window).scrollTop()+e(window).height()==e(document).height())r.scroll_lockdown=!0,e(a).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next");else{var s=n.options.eventList.scrolloffset&&""!=n.options.eventList.scrolloffset?n.options.eventList.scrolloffset:e(window).height()/2,s=s-paddingForMobile;document_bottom=e(document).scrollTop()+e(window).height(),bottom_position=o.top+i.outerHeight(),document_bottom>bottom_position+s&&(r.scroll_lockdown=!0,e(a).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next"))}}}(u)}))}},r.unselect=function(){},r.setHeight=function(e){t.css("min-height","200px"),t.css("height","auto")},r.setWidth=function(){},r.clearEvents=function(){},r.renderEvents=function(a,d){var c=e(rhc_event_tpl),f=c.find(".fc-event-list-item").clone().removeClass("fc-remove"),h=c.find(".fc-event-list-date").clone().removeClass("fc-remove"),p=c.find(".fc-event-list-no-events").clone().removeClass("fc-remove");n.options.eventList&&n.options.eventList.eventListNoEventsText&&p.find(".fc-no-list-events-message").html(n.options.eventList.eventListNoEventsText);widget_templates=!1,n.options.eventList&&n.options.eventList.eventlist_template&&""!=n.options.eventList.eventlist_template&&e(n.options.eventList.eventlist_template).length>0&&(widget_templates=!0,f=e(n.options.eventList.eventlist_template).find(".rhc-widget-upcoming-item"));var m=!(!n.options.eventList.stack||"1"!=n.options.eventList.stack);if(m&&r.direction>0)var v=t.find(".fc-events-holder");else{var v=t.find(".fc-events-holder").empty();r.rendered_events=[]}c.appendTo(v).find(".fc-remove").remove(),m&&e(v).find(".fc-event-list-no-events").parents(".fc-event-list-container").remove();if(a.length>0)if(r.have_events=!0,widget_templates){var g=n.options,y=n.options.widgetlist,_=a,w="#"+y.sel;y.dayspast=y.dayspast?y.dayspast:0;var b=e.fullCalendar.parseDate(y.end);if(!y.horizon||"hour"!=y.horizon&&"end"!=y.horizon){var k=[],C=new Date;C.setDate(C.getDate()-y.dayspast),y.historic&&""!=y.specific_date&&(C=e.fullCalendar.parseDate(y.specific_date));for(var x=0;x<_.length;x++){var D=new Date(_[x].start);C.setHours(0,0,0,0),D.setHours(0,0,0,0),D.getTime()<C.getTime()||(D.getTime()>b.getTime()||(k[k.length]=_[x]))}_=k}else{var k=[],C=new Date;C.setDate(C.getDate()-y.dayspast),y.historic&&"1"==y.historic&&(C=e.fullCalendar.parseDate(y.specific_date));for(var x=0;x<_.length;x++){if(_[x].end&&"end"==y.horizon){if(_[x].end.getTime()<C.getTime())continue}else if(_[x].start.getTime()<C.getTime())continue;_[x].start.getTime()>b.getTime()||(k[k.length]=_[x])}_=k}if(_.sort(_rhc_sort_events),y.premiere&&"1"==y.premiere){for(var k=[],x=0;x<_.length;x++)_[x].premiere&&(k[k.length]=_[x]);_=k}else if(y.premiere&&"2"==y.premiere){for(var T=[],k=[],x=0;x<_.length;x++)e.inArray(_[x]._id,T)>-1||(T.push(_[x]._id),k.push(_[x]));_=k}_=_.slice(0,y.number);var M=[];e.each(_,function(t,n){var a=f.clone(),r=n,i=r.description.split(" ");i=i.slice(0,y.words),r.description=i.join(" "),y.using_calendar_url&&""!=y.using_calendar_url&&(r.url=y.using_calendar_url);var s=r.url,l=f.clone();if(l.find(".rhc-title-link").html(r.title).data("rhc_event",r).attr("href",s).end().find(".rhc-event-link").data("rhc_event",r).attr("href",s).end().find(".rhc-title-in-link").html(r.title).end().find(".rhc-description").html(r.description).end().find(".rhc-widget-date").html("").end().find(".rhc-widget-time").html("").end().find(".rhc-widget-end-date").html("").end().find(".rhc-widget-end-time").html("").end(),""!=y.fcdate_format){l.find(".rhc-widget-date").html(e.fullCalendar.formatDate(r.start,y.fcdate_format,g)),l.find(".rhc-widget-end-date").html(e.fullCalendar.formatDate(r.end,y.fcdate_format,g)),dstart=e.fullCalendar.formatDate(r.start,"yyyy-MM-dd",g),dend=e.fullCalendar.formatDate(r.end,"yyyy-MM-dd",g);var d=Math.floor((Date.parse(dend)-Date.parse(dstart))/864e5);d>0?(k=e.fullCalendar.formatDate(r.start,y.fcdate_format,g)+" &#8211; "+e.fullCalendar.formatDate(r.end,y.fcdate_format,g),l.find(".rhc-widget-date-range").html(k),l.find(".rhc-day_diff0").hide()):(l.find(".rhc-widget-date-range").html(e.fullCalendar.formatDate(r.start,y.fcdate_format,g)),l.find(".rhc-day_diff1").hide())}""==y.fctime_format||r.allDay||(l.find(".rhc-widget-time").html(e.fullCalendar.formatDate(r.start,y.fctime_format,g)),l.find(".rhc-widget-end-time").html(e.fullCalendar.formatDate(r.end,y.fctime_format,g))),r.allDay&&(l.addClass("fc-is-allday"),l.find(".rhc-widget-time").hide()),l.find(".rhc-date-start").each(function(t,n){e(n).html(e.fullCalendar.formatDate(r.start,e(n).html(),g))});var u=e.fullCalendar.formatDate(r.start,"yyyyMMdd",g);-1==e.inArray(u,M)?M.push(u):l.find(".hide-repeat-date").addClass("repeated-date"),1==y.showimage?(l.addClass("featured-1"),r.image&&r.image[0]&&""!=r.image[0]&&e("<a></a>").addClass("rhc-image-link").data("rhc_event",r).attr("href",s).append(e("<img></img>").attr("src",r.image[0])).appendTo(l.find(".rhc-widget-upcoming-featured-image"))):(l.addClass("featured-0"),l.find(".rhc-widget-upcoming-featured-image").remove()),e(l).find(".rhc-title-link,.rhc-event-link,.rhc-image-link").click(function(e){var t={url:r.url};return r.gotodate&&(t.gotodate=r.gotodate),r.event_rdate&&(t.event_rdate=r.event_rdate),_rhc_widget_link_click(t,this)}),(a=l).find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),n.terms&&n.terms.length>0&&e.each(n.terms,function(t,n){if(a.find(".taxonomy-"+n.taxonomy).parent().find("a").length>0&&a.find(".taxonomy-"+n.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),n.name&&""!=n.name&&a.find(".taxonomy-"+n.taxonomy).length>0&&(""==n.url?e("<span>"+n.name+"</span>").appendTo(a.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):e("<a>"+n.name+"</a>").attr("href",n.url).appendTo(a.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),a.find(".taxonomy-"+n.taxonomy+"-gaddress").length>0&&n.gaddress&&""!=n.gaddress){a.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().find("a").length>0&&a.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var r="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(n.gaddress);e("<a>"+n.gaddress+"</a>").attr("href",r).attr("target","_blank").appendTo(a.find(".taxonomy-"+n.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}for(var i in n)"taxonomy"!=i&&(term_property_value=n[i],a.find(".taxonomy-"+n.taxonomy+"-"+i).length>0&&""!=term_property_value&&e("<span>"+term_property_value+"</span>").appendTo(a.find(".taxonomy-"+n.taxonomy+"-"+i)))}),l.find(".move-out").length>0&&l.find(".move-out").appendTo(w),triggerRes=o("eventRender",n,n,l),!1===triggerRes||c.find(".fc-event-list-holder").append(l),o("loading",null,!1)})}else{n.options.widgetlist.dayspast=n.options.widgetlist.dayspast?n.options.widgetlist.dayspast:0,events=[];var $=new Date;if($.setDate($.getDate()-n.options.widgetlist.dayspast),e.each(a,function(e,t){if(m&&r.rendered_events.length>0)for(var a=0;a<r.rendered_events.length;a++)if(test_event=r.rendered_events[a],"function"==typeof test_event.start.getTime&&"function"==typeof t.start.getTime&&test_event.id==t.id&&test_event.start.getTime()==t.start.getTime())return;if(r.rendered_events.push(t),!(n.options.eventList&&1==parseInt(n.options.eventList.removeended)&&null!=t.end&&t.end<$)){if(n.options.eventList&&"1"==n.options.eventList.outofrange){if(null!=t.end&&t.end<r.visStart)return}else{if(t.start<r.visStart)return;if(t.start>r.visEnd)return}events[events.length]=t}}),0==events.length)return;"1"==n.options.eventList.reverse?events.sort(l):events.sort(s);var E=[],S=!(!n.options.eventList.extendedDetails||"1"!=n.options.eventList.extendedDetails),L="",M=[];if(e.each(events,function(t,a){if(!(void 0!==n.options.eventList.display&&n.options.eventList.display>0&&t>=n.options.eventList.display)){var i=f.clone();a.gcal||""==a.url?i.find(".fc-event-list-title").parent().empty().append(e("<span></span>").addClass("fc-event-list-title").html(a.title)):a.direct_link?i.find(".fc-event-list-title").html(a.title).end().find("a.fc-event-link").attr("href",a.url).end():i.find(".fc-event-list-title").html(a.title).end().find("a.fc-event-link").attr("target","").attr("href","javascript:void(0);").bind("click",function(e){var t=n.options.eventClick?n.options.eventClick:fc_click;t(a,e,r)}).end();var s=!!a.local_feed;if(S&&s&&(i.find(".fe-extrainfo-container").addClass("skip-render").addClass("ext_det_"+a.id).hide().data("ev",a).before('<div class="ext-list-loading loading-events"><div class="ext-list-loading-1 ajax-loader loading-events"><div class="ext-list-loading-2x xspinner icon-xspinner-3"></div></div></div>'),-1==e.inArray(a.id,E)&&E.push(a.id)),i.find(".fc-event-list-description").html(a.description).end(),a.description&&""==a.description.replace(" ","")&&i.find(".fc-event-list-description").addClass("rhc-empty-description"),"none"==a.fc_click_link&&i.find("a.fc-event-link").addClass("fc-no-link"),a.image&&a.image[0]?i.find("img.fc-event-list-image").attr("src",a.image[0]):i.find(".fc-event-list-featured-image").empty(),a.allDay){i.find(".fc-time").remove(),i.find(".fc-end-time").remove();var l=n.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}else{i.find(".fc-time").html(e.fullCalendar.formatDate(a.start,n.options.eventList.extTimeFormat||"h:mmtt")),i.find(".fc-end-time").html(e.fullCalendar.formatDate(a.end,n.options.eventList.extTimeFormat||"h:mmtt"));var l=n.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}if(a.start?i.find(".fc-start").html(e.fullCalendar.formatDate(a.start,l,n.options)):i.find(".fc-start").remove(),a.end?i.find(".fc-end").html(e.fullCalendar.formatDate(a.end,l,n.options)):i.find(".fc-end").parent().addClass("rhc_event-empty-taxonomy").end().remove(),i.find(".fc-event-link.fc-event-list-title").each(function(t,n){parseInt(RHC.disable_event_link)&&"javascript:void(0);"==e(n).attr("href")&&e(n).replaceWith(e(n).text())}),i.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),a.terms&&a.terms.length>0&&e.each(a.terms,function(t,n){if(i.find(".taxonomy-"+n.taxonomy).parent().find("a").length>0&&i.find(".taxonomy-"+n.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),n.name&&""!=n.name&&i.find(".taxonomy-"+n.taxonomy).length>0&&(""==n.url?e("<span>"+n.name+"</span>").appendTo(i.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end()):e("<a>"+n.name+"</a>").attr("href",n.url).appendTo(i.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end())),i.find(".taxonomy-"+n.taxonomy+"-gaddress").length>0&&n.gaddress&&""!=n.gaddress){i.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().find("a").length>0&&i.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var a="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(n.gaddress);e("<a>"+n.gaddress+"</a>").attr("href",a).attr("target","_blank").appendTo(i.find(".taxonomy-"+n.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}}),a.meta&&a.meta.length>0&&e.each(a.meta,function(e,t){w=".fc-event-meta-"+t[0],val=t[1],i.find(w).html(val).end()}),triggerRes=o("eventRender",a,a,i),!1===triggerRes);else{if(n.options.eventList.ShowHeader&&1==parseInt(n.options.eventList.ShowHeader)){var d=a.start;if(e.fullCalendar.formatDate(d,"yyyyMMdd")!=e.fullCalendar.formatDate(L,"yyyyMMdd")){L=d;var u=h.clone();u.find(".fc-event-list-date-header").html(e.fullCalendar.formatDate(a.start,n.options.eventList.DateFormat||"dddd MMMM d, yyyy",n.options)),c.find(".fc-event-list-holder").append(u)}}c.find(".fc-event-list-holder").append(i)}}}),E.length>0){void 0===n.extended_detail_cache&&(n.extended_detail_cache={});var O=[];if(e.each(E,function(e,t){void 0===n.extended_detail_cache[t]&&O.push(t)}),0==O.length)i(e,E,c,n);else{url=RHC.ajaxurl,url+="?rhc_action=extended_details",E.length>0&&e.each(E,function(e,t){url=url+"&ids[]="+t}),ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:$.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u;var j={url:url,type:"GET",dataType:"html",not_used_data:{rhc_action:"extended_details",ids:E},success:function(a){e.each(E,function(r,i){e(a).find("."+i).length>0?n.extended_detail_cache[i]=e(a).find("."+i).clone():e(t).find(".skip-render.ext_det_"+i).removeClass("skip-render").removeClass("ext_det_"+i).fadeIn("fast").parent().find(".ext-list-loading").fadeOut("fast")}),i(e,E,c,n)},error:function(){e(t).find(".skip-render").show(),e(t).parent().find(".ext-list-loading").fadeOut("fast"),i(e,E,c,n)}};e.ajax(j)}}}else r.have_events=!1,c.find(".fc-event-list-holder").append(p),c.find(".fc-no-list-events-message").show();o("loading",null,!1)},r.trigger=o,r.viewChanged=function(e){if(e&&e.visStart&&e.visEnd){if(r.title=e.title,r.visStart=e.start,r.visEnd=e.visEnd,r.oldView=e,n.options.eventList.upcoming&&"1"==n.options.eventList.upcoming){var t=new Date;r.visStart=r.visStart.getTime()>t.getTime()?r.visStart:t}var a=n.options.eventList.monthsahead?n.options.eventList.monthsahead:"";if((a=""==a.replace(" ","")?1:parseInt(a))>0){var i=new Date(r.visStart);i.setMonth(i.getMonth()+a),r.visEnd=i}var o=n.options.eventList.daysahead?n.options.eventList.daysahead:"";if((o=""==o.replace(" ","")?0:parseInt(o))>0){var i=new Date(r.visStart);i.setDate(i.getDate()+o-1),i.setHours(23,59,59),r.visEnd=i}}},r.beforeAnimation=function(e){},r.setEventData=function(e){},r.clearEventData=function(){},r.triggerEventDestroy=function(){},r.element=t,r.oldView=null,r.calendar=n,fc=e.fullCalendar,r.direction=0,r.first_date=null,r.scroll_lockdown=!1,r.loading=function(t,n,a){t?(r.scroll_lockdown=!0,e(n.element).parents(".rhc_holder").addClass("stacking-loading")):(r.scroll_lockdown=!1,e(n.element).parents(".rhc_holder").removeClass("stacking-loading"))},r.have_events=!1,r.rendered_events=[],n.options.eventList.daysahead&&parseInt(n.options.eventList.delta)>parseInt(n.options.eventList.daysahead)&&(n.options.eventList.delta=n.options.eventList.daysahead)}e.fullCalendar.views.WeekEventList=function(n,a){var r,i=this,o=e.fullCalendar.addDays,s=e.fullCalendar.cloneDate,l=e.fullCalendar.formatDates;options=a.options,t.call(i,n,a),i.render=function(t,d){d&&o(t,7*d);var c=o(s(t),-(t.getDay()-(p="firstDay",options[p])+7)%7),f=o(s(c),7),u=s(c),h=s(f);var p;a.options.titleFormat.week&&(a.options.titleFormat.week=a.options.titleFormat.week.replace(/&#91;/g,"["),a.options.titleFormat.week=a.options.titleFormat.week.replace(/&#93;/g,"]"),i.title=l(u,o(s(h),-1),a.options.titleFormat.week,a.options));i.start=c,i.end=f,i.visStart=u,i.visEnd=h,r||(e('<div class="fc-events-holder"></div>').appendTo(n),r=!0)},i.viewChanged=function(){}},e.fullCalendar.views.rhc_event=t,e.fullCalendar.views.rhc_detail=function(t,n){var a,r=this;r.name="rhc_detail",r.render=function(n,i){r.start=n,a||(e('<div class="fc-detail-view-holder"><div class="fc-detail-view-content">TODO: a single event details. The button will be removed on the top right controls, and this view will be triggered when selecting an event.</div><div class="fc-detail-view-wp_footer" style="display:none;"></div></div>').appendTo(t),a=!0)},r.unselect=function(){},r.setHeight=function(e){t.css("min-height","200px"),t.css("height","auto")},r.setWidth=function(){},r.clearEvents=function(){e(".fc-detail-view-content").html("")},r.renderEvents=function(){var t={id:n.last_clicked_event.id};e.post(n.options.singleSource,t,function(t){"OK"==t.R&&(0==e("body .fc-single-item-holder").length&&e("body").append('<div class="fc-single-item-holder"></div>'),e("body .fc-single-item-holder").empty(),e(t.DATA.footer).each(function(t,n){if(n.nodeName&&"SCRIPT"==n.nodeName){var a=document.createElement("script");e(n).attr("type")&&(a.type=e(n).attr("type")||""),e(n).attr("src")?a.src=e(n).attr("src")||"":a.text=e(n).html()||"",document.body.appendChild(a)}else e("body .fc-single-item-holder").append(n)}),e(".fc-detail-view-content").html(t.DATA.body))},"json")},r.trigger=function(){},r.viewChanged=function(){},r.beforeAnimation=function(e){},r.element=t}}(jQuery);var CryptoJS=CryptoJS||function(e,t){var n={},a=n.lib={},r=function(){},i=a.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var r=0;r<e;r++)t[a+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(a+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[a+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],a=0;a<t;a+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],a=0;a<e;a++){var r=t[a>>>2]>>>24-a%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(n,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],a=0;a<e;a++)n.push(String.fromCharCode(t[a>>>2]>>>24-a%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a++)n[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,a=n.words,r=n.sigBytes,i=this.blockSize,s=r/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,r=e.min(4*t,r),t){for(var l=0;l<t;l+=i)this._doProcessBlock(a,l);l=a.splice(0,t),n.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new u.HMAC.init(e,n).finalize(t)}}});var u=n.algo={};return n}(Math);function fc_mouseover(e,t,n){}function fc_event_details(e,t,n){e.id=e.id.replace(/[^a-zA-Z0-9]/g,"_"),e.gcal&&e.description&&(e.description=e.description.replace(/\n/g,"<br />")),jQuery(document).ready(function(a){var r=n.calendar.options.tooltip.target||"_self";e.fc_click_target&&(r=e.fc_click_target),n.calendar.rhc_search(n.calendar,t,!0);var i="fct-"+e.id;if(a("BODY").find("#"+i).length>0&&a("BODY").find("#"+i).remove(),0==a("BODY").find("#"+i).length&&a("BODY").find("#fct-item-template").clone().attr("id",i).addClass("fct-tooltip").bind("close-tooltip",function(e){a(this).animate({opacity:0},"fast","swing",function(e){a(this).remove()})}).find(".fc-close-tooltip a").on("click",function(e){a(".fct-tooltip").trigger("close-tooltip")}).end().appendTo("BODY"),a("BODY").find("#"+i).length>0){var o=a(t.target).offset(),s=n.element.offset(),l=o.left<s.left+n.element.width()/2,d=l?"fc-tip-left":"fc-tip-right";a(".fct-tooltip:not(#"+i+")").trigger("close-tooltip");var c=a("BODY").find("#"+i);if(a("BODY").trigger("rhc_tooltip_before_show",[e,c,n]),c.stop().addClass(d).find(".fc-description").html(e.description).end().css("opacity",0).show(),1!=parseInt(n.calendar.options.tooltip.excerpt)&&c.find(".fc-description").remove(),e.color&&c.css("border-left-color",e.color),e.source&&e.source.fc_click_target&&"_nolink"==e.source.fc_click_target&&(e.url=!1),parseInt(n.calendar.options.tooltip.image)||(e.image=!1),e.url){var f=e.url;if(e.fc_rrule&&e.fc_rrule,tooltip_click=function(t){jQuery("form#calendarizeit_repeat_instance").remove();return jQuery('<form id="calendarizeit_repeat_instance" method="post"></form>').attr("target",r).attr("action",e.url).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(e){return e.stopPropagation(),!0}).submit(),!1},!!(n.calendar.options.tooltip&&n.calendar.options.tooltip.disableTitleLink&&"1"==n.calendar.options.tooltip.disableTitleLink)||e.gcal||"javascript:void(0);"==e.url)c.find(".fc-title").html(e.title);else if(e.direct_link)a("<a></a>").attr("href",f).html(e.title).attr("target",r).appendTo(c.find(".fc-title"));else{var u=a("<a></a>");-1!==f.indexOf(window.location.hostname)&&u.bind("click",tooltip_click),u.attr("href",f).html(e.title).html(e.title).attr("target",r).appendTo(c.find(".fc-title"))}e.image&&e.image[0]&&(disableTitleLink=void 0!==n.calendar.options.tooltip.disableTitleLink&&parseInt(n.calendar.options.tooltip.disableTitleLink),disableTitleLink?a("<img />").attr("src",e.image[0]).appendTo(c.find(".fc-image")):e.direct_link?a("<a></a>").attr("href",f).attr("target",r).append(a("<img />").attr("src",e.image[0])).appendTo(c.find(".fc-image")):a("<a></a>").attr("href",f).bind("click",tooltip_click).attr("target",r).append(a("<img />").attr("src",e.image[0])).appendTo(c.find(".fc-image")))}else c.find(".fc-title").html(e.title),e.image&&e.image[0]&&a("<img />").attr("src",e.image[0]).appendTo(c.find(".fc-image"));c.find(".fc-start,.fc-end,.fc-hide").hide(),e.allDay?(e.start&&c.find(".fc-start").append(a("<span></span>").html(a.fullCalendar.formatDate(e.start,n.calendar.options.tooltip.startDateAllDay,n.calendar.options))).show(),e.end&&c.find(".fc-end").append(a("<span></span>").html(a.fullCalendar.formatDate(e.end,n.calendar.options.tooltip.endDateAllDay||n.calendar.options.tooltip.startDateAllDay,n.calendar.options))).show()):(e.start&&c.find(".fc-start").append(a("<span></span>").html(a.fullCalendar.formatDate(e.start,n.calendar.options.tooltip.startDate,n.calendar.options))).show(),e.end&&c.find(".fc-end").append(a("<span></span>").html(a.fullCalendar.formatDate(e.end,n.calendar.options.tooltip.endDate||n.calendar.options.tooltip.startDate,n.calendar.options))).show()),e.terms&&e.terms.length>0&&a.each(e.terms,function(t,i){if(i.gaddress&&e.local_feed){var o=".fc-term-"+i.taxonomy+"-gaddress";c.find(o).find("a").length>0&&c.find(o).append('<span class="rhc-tooltip tax-term-divider"></span>'),a("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(i.gaddress)).html(i.gaddress).attr("target","_blank").appendTo(c.find(o).show())}c.find(".fc-tax-"+i.taxonomy).length>0&&(""==i.name?c.find(".fc-tax-"+i.taxonomy).hide():(c.find(".fc-tax-"+i.taxonomy).find("a").length>0&&c.find(".fc-tax-"+i.taxonomy).append('<span class="rhc-tooltip tax-term-divider"></span>'),i.gaddress&&0==e.local_feed?a("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(i.gaddress)).html(i.name).attr("target",r).appendTo(c.find(".fc-tax-"+i.taxonomy)):i.url&&""!=i.url&&n.calendar.options.tooltip.taxonomy_links?a("<a></a>").attr("href",i.url).html(i.name).attr("target",r).appendTo(c.find(".fc-tax-"+i.taxonomy)):a("<span></span>").html(i.name).appendTo(c.find(".fc-tax-"+i.taxonomy)),c.find(".fc-tax-"+i.taxonomy).find(".tax-label").html(i.taxonomy_label).end().show()))}),o.top=o.top-c.height()/2+a(t.srcElement).height()/2;var h=n.element.offset().top-o.top-5;h>0&&(o.top=o.top+h,c.find(".fct-arrow-holder").css("margin-top",-1*h)),o.left=l?o.left+a(t.target).width():o.left+-1*c.width(),"agendaDay"==n.name&&(o.left=o.left-c.width()+50),c.css("min-height","").css("height","auto").offset(o);var p=document.documentElement.clientWidth||window.innerWidth;client_right=a(document).scrollLeft()+p;var m=o.left+c.width();m>client_right&&(o.left=o.left-(m-client_right)-12,c.offset(o)),c.animate({opacity:1},"fast","swing"),c.unbind("mouseleave").bind("mouseleave",function(e){var t=this;return setTimeout(function(){if(a(t).is(":hover"))return!1;n.calendar.options.tooltip_on_hover&&"1"==n.calendar.options.tooltip_on_hover&&a(t).trigger("close-tooltip")},200),!0}),a("BODY").trigger("rhc_tooltip_after_show",[e,c,n])}})}function no_link(e,t,n){return t.stopPropagation(),!1}function fc_click_no_action(e,t,n){return t.stopPropagation(),!1}function fc_click(e,t,n){var a=e.fc_click_link?e.fc_click_link:"view";if(n&&"rhc_event"==n.name&&"view"==a&&(a="page"),"none"==a)return!1;if(void 0===e.fc_click_target&&(e.fc_click_target="_self"),e.url&&"page"==a){if("undefined"==typeof url)var r=!1;else r=-1==e.url.indexOf(window.location.hostname);return e.fc_click_target&&""!=e.fc_click_target&&!r?(fc_event_links_to_page(e,t,n),!1):(jQuery(this).prop("target",e.fc_click_target),!0)}return fc_event_details(e,t,n),!1}function fc_event_links_to_page(e,t,n){jQuery("form#calendarizeit_repeat_instance").remove();var a='<form id="calendarizeit_repeat_instance" method="post" target="'+e.fc_click_target+'"></form>';jQuery(a).attr("action",e.url).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(e){return e.stopPropagation(),!0}).submit()}function fc_select(e,t,n,a,r){jQuery(document).ready(function(e){var t=e(a.target).offset(),n=e(a.target).width();e(".fc-dialog").CalendarizeDialog("open",{offset:t,margin_left:n})})}function _add_param_to_url(e,t,n){if("javascript:void(0);"==e)return e;var a="",r=e.split("#");2==r.length?(e=r[0],hash="#"+r[1]):hash="";var o=(d=e.split("?"))[0],s=d[1],l="";if(s){var d=s.split("&");for(i=0;i<d.length;i++)d[i].split("=")[0]!=t&&(a+=l+d[i],l="&")}return o+"?"+a+(l+""+t+"="+n)+hash}function _add_repeat_instance_data_to_url(e){if(e.repeat_instance&&(e.fc_rrule&&""!=e.fc_rrule||e.fc_rdate&&""!=e.fc_rdate))if(e.using_calendar_url)(t=jQuery.fullCalendar.formatDate(e.start,"yyyy-MM-dd"))&&""!=t&&(e.url=_add_param_to_url(e.url,"gotodate",t));else if(e.src_start&&e.fc_date_time&&e.src_start==e.fc_date_time);else{var t=jQuery.fullCalendar.formatDate(e.start,"yyyyMMddHHmmss"),n=jQuery.fullCalendar.formatDate(e.end,"yyyyMMddHHmmss");t&&""!=t&&(n&&""!=n&&(t=t+","+n),e.url=""==e.url?"":_add_param_to_url(e.url,"event_rdate",t))}return e}function _add_repeat_instance_data_to_event(e){if(e.repeat_instance&&(e.fc_rrule&&""!=e.fc_rrule||e.fc_rdate&&""!=e.fc_rdate))if(e.using_calendar_url)(t=jQuery.fullCalendar.formatDate(e.start,"yyyy-MM-dd"))&&""!=t&&(e.gotodate=t);else if(e.src_start&&e.fc_date_time&&e.src_start==e.fc_date_time);else{var t=jQuery.fullCalendar.formatDate(e.start,"yyyyMMddHHmmss"),n=jQuery.fullCalendar.formatDate(e.end,"yyyyMMddHHmmss");t&&""!=t&&(n&&""!=n&&(t=t+","+n),e.event_rdate=t,e.url=""==e.url?"":_add_param_to_url(e.url,"event_rdate",e.event_rdate))}return e}function exdate_to_array_of_dates(e){if(void 0===e)return[];var t=""==e?[]:e.split(",");if(t.length>0){var n=[];for(a=0;a<t.length;a++){var r=t[a];n[n.length]=new Date(r.substring(0,4),r.substring(4,6)-1,r.substring(6,8),r.substring(9,11),r.substring(11,13),r.substring(13,15))}return n}return[]}function init_rhc(){jQuery(document).ready(function($){init_sc_ical_feed(),$("BODY").bind("dbox.loaded",function(){init_sc_ical_feed()}),$(".rhc_holder").each(function(i,el){var ui_theme=$(el).data("rhc_ui_theme");""!=ui_theme&&$("#fullcalendar-theme-css").attr("href",ui_theme);var rhc_options=$(el).data("rhc_options");eval("$(el).Calendarize("+rhc_options+")")}),$(".fc-button-custom").hover(function(){$(this).addClass("fc-state-hover")},function(){$(this).removeClass("fc-state-hover")}),$(window).resize(function(){$(".rhcalendar.not-widget .fullCalendar ").each(function(e,t){set_fc_small(t)})}),$("BODY").data("rhc_tooltip_before_show")||$("BODY").data("rhc_tooltip_before_show",!0).bind("rhc_tooltip_before_show",rhc_tooltip_before_show),$("BODY").data("rhc_tooltip_contend_loaded")||$("BODY").data("rhc_tooltip_contend_loaded",!0).bind("rhc_tooltip_contend_loaded",rhc_tooltip_contend_loaded),$(".rhc-next").on("click",function(e){})})}function init_sc_ical_feed(){jQuery(document).ready(function(e){e(".rhc-ical-feed-cont").length>0&&e(".rhc-ical-feed-cont").each(function(t,n){if("1"!=e(n).data("sc_ical_feed_init")){e(n).data("sc_ical_feed_init","1");var a=this,r=e(this).parent(),i=e(this).data("icalendar_button"),o=e(this).attr("data-theme"),s=(e(this).attr("data-title"),function(t,n){e(t).width(e(t).data("width"));var a=e(n.target).offset(),r=e(n.target).width();e(t).removeClass("ical-tooltip-holder").addClass("ical-tooltip").CalendarizeDialog("open",{offset:a,margin_left:r})});if(e(a).find(".ical-close").unbind("click").click(function(t){e(a).CalendarizeDialog("close")}),s){var l=e("<span class='fc-button fc-button-icalendar "+o+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+i+"</span><span class='fc-button-effect'><span></span></span></span></span>");l&&(l.click(function(e){l.hasClass(o+"-state-disabled")||s(a,e)}).mousedown(function(){l.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){l.removeClass(o+"-state-down")}).hover(function(){l.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){l.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(r),l.addClass(o+"-corner-left"),l.addClass(o+"-corner-right"))}}})})}function init_rhc_date_local_tz(){jQuery(document).ready(function(e){(new Date).getTimezoneOffset();e(".rhc-local-tz .rhc_date").each(function(t,n){var a=e(n).closest(".rhc-local-tz").data("format_options");a="object"==typeof a?a:{};var r=e(n).data("udate");if(r){var i=e(n).data("fc_date_format");i&&e(n).html(jQuery.fullCalendar.formatDate(new Date(1e3*r),i,a)).addClass("rhc-local-tz-rend")}})})}function get_event_ocurrences(e){var t=jQuery.fullCalendar.parseDate(e.start);if(e.fc_rrule=""==e.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":e.fc_rrule,scheduler=new Scheduler(t,e.fc_rrule,!0),""!=e.fc_interval&&e.fc_exdate){var n=exdate_to_array_of_dates(e.fc_exdate);n.length>0&&scheduler.add_exception_dates(n)}if(e.fc_rdate&&""!=e.fc_rdate){var a=exdate_to_array_of_dates(e.fc_rdate);a.length>0&&scheduler.add_rdates(a)}occurrences=scheduler.occurrences_between(start,end)}function set_fc_small(e){if(jQuery(e).parent().hasClass("not-widget")){var t,n=parseInt(jQuery(e).width());if(mobile_width=RHC.mobile_width||480,n>0&&n<=mobile_width)"agendaWeek"==(t=jQuery(e).fullCalendar("getView")).name&&(jQuery(e).data("restore_agenda_week",!0),jQuery(e).fullCalendar("changeView","basicWeek")),"agendaDay"==t.name&&(jQuery(e).data("restore_agenda_day",!0),jQuery(e).fullCalendar("changeView","basicDay")),jQuery(e).parent().addClass("fc-small"),jQuery(e).find("td:first-child").each(function(e,t){jQuery(t).find("> div").css("min-height","")});else jQuery(e).parent().removeClass("fc-small"),"basicWeek"==(t=jQuery(e).fullCalendar("getView")).name&&jQuery(e).data("restore_agenda_week")&&(jQuery(e).data("restore_agenda_week",!1),jQuery(e).fullCalendar("changeView","agendaWeek")),"basicDay"==t.name&&jQuery(e).data("restore_agenda_day")&&(jQuery(e).data("restore_agenda_day",!1),jQuery(e).fullCalendar("changeView","agendaDay"))}}function rhc_tooltip_before_show(e,t,n,a){return jQuery(document).ready(function(r){if(a.calendar.options.tooltip.enableCustom&&t.local_feed)if(n.find(".fct-dbox").hide(),RHC.tooltip_details[t.id]&&"loading"==RHC.tooltip_details[t.id])setTimeout(function(){rhc_tooltip_before_show(e,t,n,a)},200);else if(RHC.tooltip_details[t.id]){if(!0===RHC.tooltip_details[t.id])return n.find(".fct-dbox").show(),!0;n.find(".fct-dbox").empty().show().append(RHC.tooltip_details[t.id].clone()),t.allDay?(t.start&&n.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.start,a.calendar.options.tooltip.startDateAllDay,a.calendar.options)),t.end&&n.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.end,a.calendar.options.tooltip.endDateAllDay||a.calendar.options.tooltip.startDateAllDay,a.calendar.options))):(t.start&&n.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.start,a.calendar.options.tooltip.startDate,a.calendar.options)),t.end&&n.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.end,a.calendar.options.tooltip.endDate||a.calendar.options.tooltip.startDate,a.calendar.options))),n.find(".rhc_date").each(function(e,n){field=jQuery(n).data("fc_field"),date_format=jQuery(n).data("fc_date_format"),(value=t[field])&&jQuery(n).html(jQuery.fullCalendar.formatDate(value,date_format,a.calendar.options))}),r("BODY").trigger("rhc_tooltip_contend_loaded",[e,t,n,a])}else r.post(RHC.ajaxurl,{rhc_action:"rhc_tooltip_detail",id:t.id,event_rdate:t.event_rdate},function(i){r(i).find(".fe-extrainfo-holder").length>0?(RHC.tooltip_details[t.id]=r(i).clone(),rhc_tooltip_before_show(e,t,n,a)):RHC.tooltip_details[t.id]=!0},"html")}),!0}function cb_event_mouseover(e,t,n){return jQuery(document).ready(function(t){if(n.calendar.options.tooltip.enableCustom&&e.local_feed)if(RHC.tooltip_details[e.id]);else{RHC.tooltip_details[e.id]="loading",url=RHC.ajaxurl,tmp=decodeURIComponent(url),res=tmp.split("?"),res.length>1?url=url+"&rhc_action=rhc_tooltip_detail&id="+e.id+"&event_rdate="+e.event_rdate:url=url+"?rhc_action=rhc_tooltip_detail&id="+e.id+"&event_rdate="+e.event_rdate;var a=new Date;ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:a.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u,t.get(url,{},function(n){t(n).find(".fe-extrainfo-holder").length>0?RHC.tooltip_details[e.id]=t(n).clone():RHC.tooltip_details[e.id]=!0},"html")}}),!0}function rhc_tooltip_contend_loaded(e){init_sc_ical_feed()}function calendar_widget_day_click(e,t,n,a,r,i,o){var s=jQuery(o).find(".rhc_calendar_widget_day_click_holder");return s.children().length>0?s.children().fadeOut("fast",function(){_calendar_widget_day_click(e,t,n,a,r,i,o)}):_calendar_widget_day_click(e,t,n,a,r,i,o),!0}function _calendar_widget_day_click(e,t,n,a,r,i,o){if(client_events=jQuery("#"+i.calendar_id).find(".fullCalendar").fullCalendar("clientEvents"),client_events.length>0){var s=[],l=[],d=jQuery.fullCalendar.cloneDate(e);d.setHours(0,0,0),jQuery.each(client_events,function(e,t){if(ev_uid=t.id+"-"+t._start.getTime(),-1==jQuery.inArray(ev_uid,s)){var n=jQuery.fullCalendar.cloneDate(t._start);n.setHours(0,0,0),n.getTime()==d.getTime()&&(s.push(ev_uid),l.push(t))}}),l.sort(_rhc_sort_events);var c=jQuery(o).find(".rhc_calendar_widget_day_click_holder"),f=jQuery(o).find(".rhc_calendar_widget_day_click_template").children();c.empty(),jQuery.each(l,function(e,t){t.fc_click_link="page";var n=f.clone();n.find(".rhc_title").append(jQuery(jQuery("<span></span>").html(t.title)).RHCLink(t,a)),jQuery(o).is(".rhc-image-full")?t.image_full&&t.image_full[0]&&n.find(".rhc_featured_image").append(jQuery(jQuery("<img />").attr("src",t.image_full[0])).RHCLink(t,a)):t.image&&t.image[0]&&n.find(".rhc_featured_image").append(jQuery(jQuery("<img />").attr("src",t.image[0])).RHCLink(t,a)),n.find(".rhc_date").each(function(e,n){field=jQuery(n).data("fc_field"),date_format=jQuery(n).data("fc_date_format"),(value=t[field])&&jQuery(n).html(jQuery.fullCalendar.formatDate(value,date_format,i))}),t.allDay&&n.find(".rhc-event-time").hide(),n.find(".rhc_description").html(t.description),t.terms&&t.terms.length>0&&jQuery.each(t.terms,function(e,t){if(n.find(".taxonomy-"+t.taxonomy).parent().find("a").length>0&&n.find(".taxonomy-"+t.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),t.name&&""!=t.name&&n.find(".taxonomy-"+t.taxonomy).length>0&&(""==t.url?jQuery("<span>"+t.name+"</span>").appendTo(n.find(".taxonomy-"+t.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):jQuery("<a>"+t.name+"</a>").attr("href",t.url).appendTo(n.find(".taxonomy-"+t.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),n.find(".taxonomy-"+t.taxonomy+"-gaddress").length>0&&t.gaddress&&""!=t.gaddress){n.find(".taxonomy-"+t.taxonomy+"-gaddress").parent().find("a").length>0&&n.find(".taxonomy-"+t.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var a="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(t.gaddress);jQuery("<a>"+t.gaddress+"</a>").attr("href",a).attr("target","_blank").appendTo(n.find(".taxonomy-"+t.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}});var r=t.color||t.source.color||"",s=t.textColor||t.source.textColor||"";s=s.length<=1?"#ffffff":s,r.length>1&&s.length>1&&n.find(".rhc-widget-event-list-date").css("background-color",r).css("color",s),i.widget_autoclick&&1==parseInt(i.widget_autoclick)?n.find(".rhc-widget-event-list-head").parents(".rhc-widget-event-list").addClass("open").find(".rhc-widget-event-list-body").show():n.find(".rhc-widget-event-list-head").unbind("click").bind("click",function(e){var t=jQuery(this).parents(".rhc-widget-event-list");t.toggleClass("open"),t.is(".open")?t.find(".rhc-widget-event-list-body").slideDown("fast"):t.find(".rhc-widget-event-list-body").slideUp("fast")}),i.widget_autohover&&1==parseInt(i.widget_autohover)?n.find(".rhc-widget-event-list-head").addClass("hover"):n.find(".rhc-widget-event-list-head").mouseenter(function(){jQuery(this).addClass("hover")}).mouseleave(function(){jQuery(this).removeClass("hover")});var l=t.local_id||0;if(l>0){var d=i.events_source+i.events_source_query,u=(d=d.replace("get_calendar_events","get_icalendar_events"))+"&ics=1";u=u+"&ID="+l,n.find(".rhc-icon-ical").click(function(e){window.open(u,"_self")})}t.terms&&t.terms.length>0&&jQuery.each(t.terms,function(e,a){var r=a.glon||!1,o=a.glat||!1,s=a.gaddress||!1,l="",d=n.find(".rhc-map-view"),c=d.data("size"),f=d.data("zoom"),u=d.data("maptype"),p=t.color||t.source.color||"";if(p=p.length>1?p.toUpperCase(p).replace("#","0x"):"blue",!1!==r&&!1!==o?l="http://maps.googleapis.com/maps/api/staticmap?center="+o+","+r+"&zoom="+f+"&size="+c+"&maptype="+u+"&markers=color:"+p+"%7C"+o+","+r:!1!==s&&""!=s&&(l="http://maps.googleapis.com/maps/api/staticmap?center="+escape(s)+"&zoom="+f+"&size="+c+"&maptype="+u+"&markers=color:"+p+"%7C"+escape(s)),""!=l&&"none"!=i.widget_google_map)if(n.find(".rhc-icon-map").unbind("click").bind("click",function(e){var t=n.find(".rhc-map-view .sws-gmap3-cont");if(t.data("gmap_inited"));else if(n.find(".rhc-map-view .sws-gmap3-cont").length>0){t.data("gmap_inited",!0),ratio=n.find(".rhc-map-view").data("ratio"),arr=ratio.split(":"),ratio=arr[1]/arr[0],w=n.find(".rhc-map-view").width(),h=w*ratio,t.height(h);var a=t.data("maptype"),r=t.data("uid"),i=t.data("address");return void rhc_gmap3_init({glat:t.data("glat"),glon:t.data("glon"),zoom:t.data("zoom"),disableDefaultUI:!1,map_type:google.maps.MapTypeId[a],uid:r,name:"",info_windows:"sws-gmap3-info-"+r,markers:"#sws-gmap3-marker-"+r,address:i,scrollwheel:1,traffic:!1})}jQuery(this).parents(".rhc-widget-event-list").find(".rhc-map-view").slideToggle("fast")}).show(),"static"==i.widget_google_map)""!=l&&n.find(".rhc-map-view").empty().hide().append(jQuery("<img />").attr("src",l));else if("interactive"==i.widget_google_map){var m='<div class="sws-gmap3-frame"><div id="map_canvas{uid}" class="sws-gmap3-cont"></div></div><div id="sws-gmap3-marker-{uid}" class="sws-gmap3-marker">|||::</div><div class="sws-gmap3-marker"><div id="sws-gmap3-info-{uid}" >{info_windows}</div></div>',v=t.id+"-"+t.start.getTime();m=(m=m.replace(/\{uid\}/g,v)).replace(/\{info_windows\}/g,a.name),n.find(".rhc-map-view").empty().append(m),n.find(".rhc-map-view .sws-gmap3-cont").data("glat",o).data("glon",r).data("zoom",f).data("maptype",u).data("uid",v).data("address",s)}}),"undefined"!=typeof rhp_vars&&(n.find(".rhc-icon-facebook").length>0&&n.find(".rhc-icon-facebook").show().unbind("click").bind("click",function(e){e.preventDefault(),FB.init({appId:rhp_vars.fb_appID,status:!0,cookie:!0,version:"v2.4"});var n={method:"share",href:t.url,link:t.url,name:t.title,caption:t.title,description:t.description};FB.ui(n,function(e){})}),n.find(".rhc-icon-twitter").length>0&&n.find(".rhc-icon-twitter").show().unbind("click").bind("click",function(e){encodeURIComponent(t.url),encodeURIComponent(t.description);var n="https://twitter.com/share?&url="+t.url+"&text="+t.title+"&counturl="+t.url;window.open(n,"Twitter","width=660,height=400,scrollbars=no;resizable=no")}),n.find(".rhc-icon-linkedin").length>0&&n.find(".rhc-icon-linkedin").show().unbind("click").bind("click",function(e){var n=encodeURIComponent(t.url),a="http://www.linkedin.com/shareArticle?mini=true&url="+n+"&title="+encodeURIComponent(t.title)+"&summary="+encodeURIComponent(t.description)+n+"&source="+encodeURIComponent(t.url);window.open(a,"LinkedIn","width=660,height=400,scrollbars=no;resizable=no")}),n.find(".rhc-icon-googleplus").length>0&&n.find(".rhc-icon-googleplus").show().unbind("click").bind("click",function(e){var n="https://plus.google.com/share?url="+encodeURIComponent(t.url);window.open(n,"Google+","width=660,height=400,scrollbars=no;resizable=no")})),n.hide(),c.append(n.fadeIn("fast"))}),jQuery("BODY").trigger("dbox.loaded")}}function _rhc_sort_events(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function btn_tax_dropdown(e,t){}function dayclick_tooltip_evenlits(e,t,n,a,r,i){console.log("day click",e,i)}function rhc_console(){console&&console.log.apply(console,arguments)}!function(e){function t(e,t,n,a,r,i,o){return((e=e+(t&n|~t&a)+r+o)<<i|e>>>32-i)+t}function n(e,t,n,a,r,i,o){return((e=e+(t&a|n&~a)+r+o)<<i|e>>>32-i)+t}function a(e,t,n,a,r,i,o){return((e=e+(t^n^a)+r+o)<<i|e>>>32-i)+t}function r(e,t,n,a,r,i,o){return((e=e+(n^(t|~a))+r+o)<<i|e>>>32-i)+t}for(var i=CryptoJS,o=(l=i.lib).WordArray,s=l.Hasher,l=i.algo,d=[],c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;l=l.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var s=e[f=i+o];e[f]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var l,c,f=e[i+0],u=(s=e[i+1],e[i+2]),h=e[i+3],p=e[i+4],m=e[i+5],v=e[i+6],g=e[i+7],y=e[i+8],_=e[i+9],w=e[i+10],b=e[i+11],k=e[i+12],C=e[i+13],x=e[i+14],D=e[i+15],T=o[0],M=r(M=r(M=r(M=r(M=a(M=a(M=a(M=a(M=n(M=n(M=n(M=n(M=t(M=t(M=t(M=t(M=o[1],c=t(c=o[2],l=t(l=o[3],T=t(T,M,c,l,f,7,d[0]),M,c,s,12,d[1]),T,M,u,17,d[2]),l,T,h,22,d[3]),c=t(c,l=t(l,T=t(T,M,c,l,p,7,d[4]),M,c,m,12,d[5]),T,M,v,17,d[6]),l,T,g,22,d[7]),c=t(c,l=t(l,T=t(T,M,c,l,y,7,d[8]),M,c,_,12,d[9]),T,M,w,17,d[10]),l,T,b,22,d[11]),c=t(c,l=t(l,T=t(T,M,c,l,k,7,d[12]),M,c,C,12,d[13]),T,M,x,17,d[14]),l,T,D,22,d[15]),c=n(c,l=n(l,T=n(T,M,c,l,s,5,d[16]),M,c,v,9,d[17]),T,M,b,14,d[18]),l,T,f,20,d[19]),c=n(c,l=n(l,T=n(T,M,c,l,m,5,d[20]),M,c,w,9,d[21]),T,M,D,14,d[22]),l,T,p,20,d[23]),c=n(c,l=n(l,T=n(T,M,c,l,_,5,d[24]),M,c,x,9,d[25]),T,M,h,14,d[26]),l,T,y,20,d[27]),c=n(c,l=n(l,T=n(T,M,c,l,C,5,d[28]),M,c,u,9,d[29]),T,M,g,14,d[30]),l,T,k,20,d[31]),c=a(c,l=a(l,T=a(T,M,c,l,m,4,d[32]),M,c,y,11,d[33]),T,M,b,16,d[34]),l,T,x,23,d[35]),c=a(c,l=a(l,T=a(T,M,c,l,s,4,d[36]),M,c,p,11,d[37]),T,M,g,16,d[38]),l,T,w,23,d[39]),c=a(c,l=a(l,T=a(T,M,c,l,C,4,d[40]),M,c,f,11,d[41]),T,M,h,16,d[42]),l,T,v,23,d[43]),c=a(c,l=a(l,T=a(T,M,c,l,_,4,d[44]),M,c,k,11,d[45]),T,M,D,16,d[46]),l,T,u,23,d[47]),c=r(c,l=r(l,T=r(T,M,c,l,f,6,d[48]),M,c,g,10,d[49]),T,M,x,15,d[50]),l,T,m,21,d[51]),c=r(c,l=r(l,T=r(T,M,c,l,k,6,d[52]),M,c,h,10,d[53]),T,M,w,15,d[54]),l,T,s,21,d[55]),c=r(c,l=r(l,T=r(T,M,c,l,y,6,d[56]),M,c,D,10,d[57]),T,M,v,15,d[58]),l,T,C,21,d[59]),c=r(c,l=r(l,T=r(T,M,c,l,p,6,d[60]),M,c,b,10,d[61]),T,M,u,15,d[62]),l,T,_,21,d[63]);o[0]=o[0]+T|0,o[1]=o[1]+M|0,o[2]=o[2]+c|0,o[3]=o[3]+l|0},_doFinalize:function(){var t=this._data,n=t.words,a=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(a/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,a=0;4>a;a++)r=n[a],n[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=s._createHelper(l),i.HmacMD5=s._createHmacHelper(l)}(Math),function($){var methods={init:function(e){if(void 0!==e){var t=$.extend({editable:!1,mode:"view"},e);return $(".fc-dialog").CalendarizeDialog(),this.each(function(){if(!$(this).data("Calendarize")){if($(this).data("Calendarize",t).Calendarize("mode",t.mode),0==$(this).find(".rhc-sidelist").length&&($('<div class="rhc-sidelist-holder"><div class="rhc-sidelist-tab"><div class="rhc-sidelist-tab-label"></div></div><div class="rhc-sidelist-head"></div><div class="rhc-sidelist"></div></div>').appendTo(this),$(this).find(".rhc-sidelist-tab").click(function(e){$(this).parents(".rhc-sidelist-holder").toggleClass("sidelist-open")}),parseInt(t.modes[t.mode].options.sidelist.open)&&$(this).find(".rhc-sidelist-tab").trigger("click")),0==$(this).find("fullCalendar > .fc-head-control").length){var e=".fc-header";$(this).find(e).length>0&&($(this).find(e).after('<div class="fc-head-control rh-flat-ui"><div class="tax_filter_nav"><a href="#" class="tax_filter_previous btn btn-small btn-taxfilter fui-arrow-left"></a></div><div class="tax_filter_holder_viewport"><div class="tax_filter_holder"></div></div></div>'),$(this).find(".tax_filter_previous").click(function(e){var t=$(this).parents(".fc-head-control").find(".tax_filter_holder");if(t.stop(!1,!0),t.find(".tax_filter_item_holder").length>0){var n=t.find(".tax_filter_item_holder").first();n.stop(!1,!0);var a=-1*n.outerWidth(!0),r=n.css("opacity");n.animate({opacity:0},400,"swing"),t.animate({"margin-left":a},500,"swing",function(){n.stop(!1,!0).appendTo(t).css("opacity",r),$(this).css("margin-left",0)})}}))}0==$(this).find(".fc-lower-head-tools").length&&($(this).find(".fc-header").after('<div class="fc-lower-head-tools"></div>'),0==$(this).find(".fc-lower-head-tools .fc-filters-dialog").length&&$(this).find(".fc-filters-dialog-holder .fc-filters-dialog").clone().appendTo($(this).find(".fc-lower-head-tools")));var a=.6*parseInt($(this).find(".fc-content").innerHeight());a=a<300?300:a,$(this).find(".fc-lower-head-tools .fc-filters-dialog").find(".fbd-unchecked").css("max-height",a+"px"),$(this).find(".fc-filters-dialog .fbd-tabs").on("click",function(e){$(this).parent().parent().find(".fbd-tabs").removeClass("fbd-active-tab").end().find(".fbd-tabs-panel").hide().end().find($(this).find("a").data("tab-target")).show(),$(this).addClass("fbd-active-tab")}).first().trigger("click"),$(this).find('.fbd-cell input[type="checkbox"]').attr("checked",!1),$(this).find('.fbd-cell input[type="checkbox"]').on("click",function(e){if($(this).is(":checked"))var t=$(this).parent().parent().parent().parent().find(".fbd-checked");else t=$(this).parent().parent().parent().parent().find(".fbd-unchecked");n($(this).parent().parent(),t)}),$(this).find(".fullCalendar .fbd-dg-apply,.fullCalendar .fbd-dg-remove").attr("rel",$(this).attr("id")),$(this).find(".fullCalendar .fbd-dg-apply").on("click",function(e){return methods.apply_filter.apply($(this),[])}),$(this).find(".fbd-close-tooltip a").unbind("click").click(function(e){$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fbd-dg-remove").on("click",function(e){$(this).parents(".rhc_holder").find("input[name=s]").val("").trigger("change"),$("#"+$(this).attr("rel")).find("input[type=checkbox].fbd-filter").each(function(e,t){if(void 0!==$(t).attr("checked")){$(t).attr("checked",!1);var a=$(this).parent().parent().parent().parent().find(".fbd-unchecked");n($(this).parents(".fbd-cell"),a)}}).end().find(".fbd-dg-apply").trigger("click"),$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fc-header").on("click",function(e){$(".fct-tooltip").trigger("close-tooltip")}),$(document).keyup(function(e){27==e.keyCode&&($(".fct-tooltip").trigger("close-tooltip"),$(".fc-filters-dialog:visible").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){$(this).hide()}))}),0==$(this).find("fc-view-loading-bottom").length&&$(this).find(".fullCalendar .fc-footer").before($('<div class="fc-view-loading-bottom"></div>').append($('<div class="fc-view-loading-bottom-1"><div class="fc-view-loading-bottom-2 fc-next-arrow"></div></div>').click(function(e){$(this).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next")}))),$(this).trigger("rhc_loaded")}})}function n(e,t){if(e.hasClass("fbd-cell")||(e=e.parents(".fbd-cell")),t.hasClass("fbd-checked"))var n={opacity:0,left:-30};else n={opacity:0,left:30};var r="linear",i="fast";if(0==t.find(".fbd-cell").length)$(e).animate(n,i,r,function(){$(this).appendTo(t).css("left",-1*n.left).animate({opacity:1,left:0})});else{var o=t.find(".fbd-cell");if(parseInt($(e).data("tab-index"))>parseInt($(o[o.length-1]).data("tab-index")))$(e).animate(n,i,r,function(){$(this).appendTo(t).css("left",-1*n.left).animate({opacity:1,left:0})});else if(parseInt($(e).data("tab-index"))<parseInt($(o[0]).data("tab-index")))$(e).animate(n,i,r,function(){$(o[0]).before(e).prev().css("left",-1*n.left).animate({opacity:1,left:0})});else for(a=0;a<o.length;a++){var s=o[a];if(parseInt($(e).data("tab-index"))>parseInt($(o[a]).data("tab-index"))&&parseInt($(e).data("tab-index"))<parseInt($(o[a+1]).data("tab-index"))){$(e).animate(n,i,r,function(){$(s).after($(this).css("left",-1*n.left).animate({opacity:1,left:0}))});break}}}}},mode:function(e){var t=this,n=$(this).data("Calendarize");if(n&&n.modes){var a=$.extend(n.common,n.modes[e].options);preload_events(this,a),a.for_widget?(a.eventRender=function(e,t,n){return cb_event_render(i,!0,e,t,n,a)},a.eventAfterAllRender=function(e){return hide_widget_event_list(i,!1,null,null,e,a),cb_event_render_all(i,!0,null,null,e,a)},a.dayClick=function(e,n,r,i){return cb_dayclick(e,n,r,i,a,t)}):(a.eventRender=function(e,t,n){return"rhc_grid"!=n.name&&$(".fc-event-title",t).html(e.title),cb_event_render(i,!1,e,t,n,a)},a.eventAfterAllRender=function(e){return cb_event_render_all(i,!1,null,null,e,a)}),a.loading=function(e,n){return cb_events_loading(t,this,e,n,i,a)},a.eventDataTransform=function(e){if(e.start&&e.start.getFullYear){e.terms||(e.terms=[]);var t=parseInt(e.start.getMonth()),n={filter_type:"AND",term_priority:t,description:$.fullCalendar.formatDate(e.start,"MMMM",a),taxonomy:"core_month",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.month?a.tax_filter_label.month:"month",slug:$.fullCalendar.formatDate(e.start,"M",a)};e.terms.unshift(n);var r=e.start.getFullYear();n={filter_type:"AND",term_priority:parseInt(r),description:r,taxonomy:"core_year",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.year?a.tax_filter_label.year:"year",slug:parseInt(r)};if(e.terms.unshift(n),e.end){for(year_end=e.end.getFullYear(),current_year=r,i=0;i++<10&&year_end>current_year;){current_year++;n={filter_type:"AND",term_priority:parseInt(current_year),description:current_year,taxonomy:"core_year",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.year?a.tax_filter_label.year:"year",slug:parseInt(current_year)};e.terms.unshift(n)}if(month_end=parseInt(e.end.getMonth()),start_date=new Date(r,t,15,0,0,0,0),end_date=new Date(year_end,month_end,15,0,0,0,0),current_date=new Date(new Date(start_date).setMonth(start_date.getMonth()+1)),end_date.getTime()>start_date.getTime())for(var i=0;i<11;i++){n={filter_type:"AND",term_priority:parseInt(current_date.getMonth()),description:$.fullCalendar.formatDate(current_date,"MMMM",a),taxonomy:"core_month",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.month?a.tax_filter_label.month:"month",slug:$.fullCalendar.formatDate(current_date,"M",a)};if(e.terms.unshift(n),!(end_date.getTime()>current_date.getTime()))break;current_date=new Date(new Date(current_date).setMonth(current_date.getMonth()+1))}}}return e};a.eventSources=[],"1"!=a.json_only&&a.eventSources.push(function(e,t,n){$.fn.Calendarize.events_source(e,t,n,a)}),a.json_feed&&a.json_feed.length>0&&("1"==a.json_only&&(a.events=null,a.singleSource=null),a.json_feed&&a.json_feed.length>0&&$.each(a.json_feed,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){a.eventSources[a.eventSources.length]=function(e,n,r){$.fn.Calendarize.rhc_feed_src(e,n,r,t,a)}}else{a.eventSources[a.eventSources.length]=function(e,n,r){$.fn.Calendarize.ext_events_source(e,n,r,t,a)}}})),a.viewRender=function(e,t){cb_view_display(a.for_widget,i,e,t)},a.eventMouseover=function(e,t,n){cb_event_mouseover(e,t,n),a.tooltip_on_hover&&"1"==a.tooltip_on_hover&&"view"==e.fc_click_link&&$(t.target).closest("a").click(),$(t.target).closest("a").addClass("event-hovered")},a.eventMouseout=function(e,t,n){$(t.target).closest("a").removeClass("event-hovered")},a.calendar_id=$(this).attr("id"),f=$(this).find(".fullCalendar").fullCalendar(a),n.editable&&0==f.find(".fc-edit-tools").length&&f.prepend('<div class="fc-edit-tools"></div>'),0==f.find(".fc-footer").length&&(f.append('<div class="fc-footer"></div>'),a.icalendar_align&&$(".fc-footer").css("text-align",a.icalendar_align).addClass("dlg-align-"+a.icalendar_align)),a.header&&0==(a.header.center+a.header.left+a.header.right).length&&($(this).find(".fc-header").css("display","none"),$(this).find(".fc-edit-tools").css("display","none"),$(this).find(".fc-head-control").css("display","none"),$(this).find(".fc-lower-head-tools").css("display","none"),$(this).find(".fc-header").attr("hello",1));var r=f.find(".fc-footer"),i=f,o=a.theme?"ui":"fc";if($(".ical-tooltip-template").length>0){var s=$(".ical-tooltip-template").first().data("button_text");add_footer_button({calendar:f,calendarize:t,e:r,tm:o,label:s,buttonName:"icalendar",buttonClick:ical_footer_button_click})}a.gotodate&&""!=a.gotodate&&$(this).find(".fullCalendar").fullCalendar("gotoDate",$.fullCalendar.parseDate(a.gotodate)),$(this).find(".fullCalendar").data("starting_date",$(this).find(".fullCalendar").fullCalendar("getDate")),render_tax_filters.apply(this,[a])}},destroy:function(){return this.each(function(){var e=$(this),t=e.data("Calendarize");$(window).unbind(".Calendarize"),t.Calendarize.remove(),e.removeData("Calendarize")})},apply_filter:function(e){return e=void 0===e||e,this.each(function(){var t="#"+$(this).attr("rel");$(t+" .fullCalendar").find(".bg_matched").each(function(e,t){$(t).css("background-color",$(t).data("original_bg")||"")});var n=[];$(t+" .fullCalendar").find(".fbd-filter-group").each(function(e,t){var a=[];$(t).find("input[type=checkbox].fbd-filter:checked").each(function(e,t){a[a.length]=$(t).val()}),a.length>0&&(n[n.length]={taxonomy:$(this).data("taxonomy"),terms:a.join(","),terms_array:a})});var a=$(t).data("Calendarize"),r=a.modes[a.mode].options;r.calendar_id=$(t).attr("id");var i=$(t+" .fullCalendar"),o=i.fullCalendar("getView");o.clear_events=!0,"rhc_year"==o.name&&(o.clearEvents(),i.find(".fc-have-event").removeClass("fc-have-event"));var s="";if(n&&$.each(n,function(e,t){r.replace_square_brackets?s+="&tax%5B"+t.taxonomy+"%5D="+t.terms:s+="&tax["+t.taxonomy+"]="+t.terms}),$(t).find(".fc-lower-head-tools  input[name=s]").length){var l=$(t).find(".fc-lower-head-tools  input[name=s]").val();""!=l&&(s+="&s="+escape(l))}r.events_source_query_original=r.events_source_query_original?r.events_source_query_original:r.events_source_query,""!=s?(i.fullCalendar("removeEventSources"),r.events_source_query=r.events_source_query_original+s):(i.fullCalendar("removeEventSources"),r.events_source_query=r.events_source_query_original);if(i.fullCalendar("addEventSource",function(e,t,n){$.fn.Calendarize.events_source(e,t,n,r)}),0==n.length)r.json_feed&&r.json_feed.length>0&&$.each(r.json_feed,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){i.fullCalendar("addEventSource",function(e,n,a){$.fn.Calendarize.rhc_feed_src(e,n,a,t,r)})}else{i.fullCalendar("addEventSource",function(e,n,a){$.fn.Calendarize.ext_events_source(e,n,a,t,r)})}});else{var d=[];$.each(n,function(e,t){$.each(t.terms_array,function(e,n){r.json_feed&&r.json_feed.length>0&&$.each(r.json_feed,function(e,a){if(!($.inArray(a,d)>-1)&&a.terms&&a.terms.length>0)for(e=0;e<a.terms.length;e++)if(a.terms[e].taxonomy==t.taxonomy&&a.terms[e].slug==n)return void(-1==$.inArray(a,d)&&d.push(a))})})}),$.each(d,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){i.fullCalendar("addEventSource",function(e,n,a){$.fn.Calendarize.rhc_feed_src(e,n,a,t,r)})}else{i.fullCalendar("addEventSource",function(e,n,a){$.fn.Calendarize.ext_events_source(e,n,a,t,r)})}})}"rhc_gmap"!=o.name&&"rhc_grid"!=o.name||(o.clear_events=!0,$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date"))),e&&$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click"),$(this).closest(".fullCalendar").find(".fc-no-list-events-message").hide()})}};$.fn.Calendarize=function(e){return methods[e]?methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.Calendarize"):methods.init.apply(this,arguments)};var rhc_events_cache=[];function allday_group(e,t){return _allday_group=void 0!==t.allday_group&&0<parseInt(t.allday_group)?parseInt(t.allday_group):0,0<_allday_group&&$.each(e,function(e,t){void 0!==t.color&&""!=t.color&&(1==_allday_group?t.title='<span style="display:none;">'+t.color+"</span>"+t.title:2==_allday_group&&void 0!==t.menu_order&&(t.title='<span style="display:none;">'+parseInt(t.menu_order)+"</span>"+t.title))}),e}function preload_events(o,fc_options){fc_options.preload&&$(o).find(".rhc-preload").length&&$(o).find(".rhc-preload").each(function(i,el){if(!$(el).data("preloaded")){$(el).data("preloaded",!0);try{if(cache=$(el).data("request"),cache=eval(cache),cache)if($(el).data("events")?(tmp_events=$(el).data("events"),data=eval(tmp_events)):data=$.parseJSON($(el).html()),external_source=$(el).data("external_source")||!1,"OK"==data.R){if(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url)){cache.events=data.EVENTS;var events=[];start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=rhc_events_to_fc_events(start,end,data,!0),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}else if(external_source&&"object"==typeof data&&(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url))){cache.events=data.EVENTS;var events=data;start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}catch(e){}}})}function in_rhc_events_cache(e,t,n){for(var a=0;a<rhc_events_cache.length;a++)if(rhc_events_cache[a].start<=e&&rhc_events_cache[a].end>=t&&rhc_events_cache[a].url==n)return!0;return!1}function handle_local_tz(e,t,n){if(local_tz="local_tz"in t?parseInt(t.local_tz):0,0==local_tz)return e;if("GMT_OFFSET"in n){var a=-1*n.GMT_OFFSET*60;if(a==(new Date).getTimezoneOffset())return e;for(var r=0;r<e.length;r++)if(!e[r].allDay){"object"==typeof e[r].start&&(e[r].start=date_change_offset(e[r].start,a)),"object"==typeof e[r]._start&&(e[r]._start=date_change_offset(e[r]._start,a)),"object"==typeof e[r].end&&(e[r].end=date_change_offset(e[r].end,a)),"object"==typeof e[r]._end&&(e[r]._end=date_change_offset(e[r]._end,a));var i=jQuery.fullCalendar.formatDate(e[r].start,"yyyyMMddHHmmss"),o=jQuery.fullCalendar.formatDate(e[r].end,"yyyyMMddHHmmss");i&&""!=i&&(o&&""!=o&&(i=i+","+o),e[r].event_rdate=i,e[r].url=""==e[r].url?"":_add_param_to_url(e[r].url,"event_rdate",e[r].event_rdate))}}return e}function date_change_offset(e,t){return new Date(e.getTime()-6e4*(e.getTimezoneOffset()-t))}function handle_field_map(e){return e.MAP&&e.MAP.length>0&&e.EVENTS&&e.EVENTS.length>0&&(new_events=[],jQuery.each(e.EVENTS,function(t,n){new_ev={},jQuery.each(e.MAP,function(e,t){n[t[0]]&&(new_ev[t[1]]=n[t[0]])}),void 0===new_ev.allDay&&(new_ev.allDay=!1),new_ev.terms&&new_ev.terms.length>0&&(new_terms=[],jQuery.each(new_ev.terms,function(t,n){new_terms[t]="object"==typeof n?n:e.TERMS[n]}),new_ev.terms=new_terms,new_terms=[],jQuery.each(new_ev.terms,function(t,n){new_term={},jQuery.each(e.MAP,function(e,t){n[t[0]]&&(new_term[t[1]]=n[t[0]])}),new_terms[new_terms.length]=new_term}),new_ev.terms=new_terms),new_events[new_events.length]=new_ev}),e.EVENTS=new_events),e}function rhc_events_to_fc_events(e,t,n,a){var r=[];if((n=handle_field_map(n)).EVENTS.length>0&&$(n.EVENTS).each(function(n,i){if(i.premiere=!0,i.description=void 0===i.description?"":i.description,i.local_feed=void 0===i.local_feed?a:i.local_feed,(!i.color||""==i.color||"#"==i.color)&&i.terms&&i.terms.length>0)for(var o=0;o<i.terms.length;o++){var s=!!(i.terms[o].background_color&&i.terms[o].background_color.length>1)&&i.terms[o].background_color,l=!!(i.terms[o].color&&i.terms[o].color.length>1)&&i.terms[o].color;if((s=(l=s&&!1===l?"#fff":l)&&!1===s?"#fff":s)&&l){i.color=s,i.textColor=l;break}}if(void 0!==i.start&&null!=i.start)if(i.src_start=i.start,i.fc_rrule=i.fc_rrule?i.fc_rrule:"",""==i.fc_rrule&&""==i.fc_rdate)r[r.length]=i;else{var d=!1,c=new Date($.fullCalendar.parseDate(i.start));if(i.end){var f=new Date($.fullCalendar.parseDate(i.end));d=f.getTime()-c.getTime()}var u=$.fullCalendar.parseDate(i.start);i.fc_rrule=""==i.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":i.fc_rrule;try{if(scheduler=new Scheduler(u,i.fc_rrule,!0),""!=i.fc_interval&&i.fc_exdate){var h=exdate_to_array_of_dates(i.fc_exdate);h.length>0&&scheduler.add_exception_dates(h)}if(i.fc_rdate&&""!=i.fc_rdate){var p=exdate_to_array_of_dates(i.fc_rdate);p.length>0&&scheduler.add_rdates(p)}occurrences=scheduler.occurrences_between(e,t),occurrences.length>0&&$(occurrences).each(function(e,t){var n=new Date(t),a=$.extend(!0,{},i);if(a.premiere=n.getTime()==c.getTime(),a._start=n,a.start=n,a.fc_start=$.fullCalendar.formatDate(n,"yyyy-MM-dd"),a.fc_start_time=$.fullCalendar.formatDate(n,"HH:mm:ss"),a.fc_date_time=$.fullCalendar.formatDate(n,"yyyy-MM-dd HH:mm:ss"),d){var o=n.getTime()+d,s=new Date;s.setTime(o),a._end=s,a.end=s,a.fc_end=$.fullCalendar.formatDate(s,"yyyy-MM-dd"),a.fc_end_time=$.fullCalendar.formatDate(s,"HH:mm:ss")}else a.end=a.start,a._end=a._start;a.repeat_instance=!0,a=_add_repeat_instance_data_to_event(a),r[r.length]=a}),c<=e&&f>e&&(i.start=c,i.end=f,r[r.length]=i)}catch(e){console.log(e.message,i)}}}),r.length>0&&!r[0].local_feed){r.sort(_rhc_sort_events);var i=[];$(r).each(function(e,t){if(!t.local_feed){if(i.length>0)for(var n=0;n<i.length;n++)if(cev=i[n],t.id==cev.id&&t.start.getTime()==cev.start.getTime()&&t.network==cev.network)return!0;i.push(t)}}),r=i}return r}$.fn.Calendarize.rhc_feed_src=function(e,t,n,a,r){jQuery(document).ready(function(i){for(var o=new Date,s=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:o.getTime(),l={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),_:s,"data[]":[]},d=0;d<rhc_events_cache.length;d++)if(rhc_events_cache[d].start<=l.start&&rhc_events_cache[d].end>=l.end&&rhc_events_cache[d].url==a.url)return parseInt(r.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void n(rhc_events_cache[d].events);var c=l;c.url=a.url,i.post(a.url,l,function(a){if("OK"==a.R){var r;r=rhc_events_to_fc_events(e,t,a,!1),c.events=r,in_rhc_events_cache(c.start,c.end,c.url)||(rhc_events_cache[rhc_events_cache.length]=c),n(r)}else a.R},"json")})},$.fn.Calendarize.ext_events_source=function(e,t,n,a,r){jQuery(document).ready(function(i){for(var o=new Date,s=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:o.getTime(),l={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),_:s,"data[]":[]},d=0;d<rhc_events_cache.length;d++)if(rhc_events_cache[d].start<=l.start&&rhc_events_cache[d].end>=l.end&&rhc_events_cache[d].url==a.url)return parseInt(r.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void n(rhc_events_cache[d].events);var c=l;c.url=a.url,i.post(a.url,l,function(e){c.events=e,in_rhc_events_cache(c.start,c.end,c.url)||(rhc_events_cache[rhc_events_cache.length]=c),n(c.events)},"json")})},$.fn.Calendarize.events_source=function(e,t,n,a){jQuery(document).ready(function(r){var i=[];r(".calendarize_meta_data").each(function(e,t){"checkbox"==t.type?i[i.length]=[t.name,r(t).is(":checked")?1:0]:i[i.length]=[t.name,r(t).val()]});var o=a.events_source+a.events_source_query;"undefined"!=typeof icl_lang?o+="&lang="+icl_lang:"undefined"!=typeof icl_vars&&icl_vars.current_language&&(o+="&lang="+icl_vars.current_language),a.calendar_id&&""!=a.calendar_id?(vo=r("#"+a.calendar_id).find(".fullCalendar").fullCalendar("getView"),view_name=vo.name):view_name="";for(var s=new Date,l=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:s.getTime(),d={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),rhc_shrink:a.shrink?parseInt(a.shrink):"",view:view_name,ver:l,_:"","data[]":i},c=0;c<rhc_events_cache.length;c++)if(rhc_events_cache[c].start<=d.start&&rhc_events_cache[c].end>=d.end&&rhc_events_cache[c].url==o)return parseInt(a.debugjs)&&rhc_console("Loading from rhc_events_cache."),void n(rhc_events_cache[c].events);var f=d;function u(r){if(null===r||"object"!=typeof r)return!1;if("OK"==r.R){var i=[];i=allday_group(i=handle_local_tz(i=rhc_events_to_fc_events(e,t,r,!0),a,r),a),f.events=i,in_rhc_events_cache(f.start,f.end,f.url)||(rhc_events_cache[rhc_events_cache.length]=f),n(i)}else r.R}f.url=o,o=o+"&start="+d.start+"&end="+d.end+"&rhc_shrink="+d.rhc_shrink+"&view="+d.view+"&ver="+d.ver,i.length>0&&r.each(i,function(e,t){o=(o=o+"&data["+e+"][0]="+t[0])+"&data["+e+"][1]="+t[1]}),queryString=o.substring(o.indexOf("?")+1),hash=CryptoJS.MD5(queryString),d._=hash.toString(CryptoJS.enc.Hex),o=o+"&_="+d._,r.ajax({url:o,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",cache:!0,success:function(e){u(e)},error:function(e,t,n){if("parsererror"==t){var a=!1;try{response=e.responseText.replace(/<!--[\s\S]*?-->/g,""),u(i=r.parseJSON(response)),a=!0}catch(e){}if(!a)try{if(j=e.responseText.indexOf('{"R":'),j>0){var o=e.responseText;o=o.substring(j),u(i=r.parseJSON(o)),a=!0}else-1==j&&console.log("RHC:ajax response is not valid.  Try using the Api url option in the troubleshooting section")}catch(e){}a||console.log("RHC:Could not recover data from bad ajax response; try turning on the option Catch php warnings in troubleshooting.  Or disable php warnings.")}}})})},$.fn.RHCLink=function(e,t){var n=t,a=t.calendar,r=a.options,i=($.extend({eventClick:"fc_click"},r),e.fc_click_target||"_self");return e.gcal||""==e.url?$(this):e.direct_link?$(this).wrap($("<a></a>").attr("href",e.url).attr("target",i)).parent():$(this).wrap($("<a></a>").attr("target",i).attr("href",e.url).unbind("click").bind("click",function(t){return(a.options.eventClick?a.options.eventClick:fc_click)(e,t,n)})).parent()};var sidelist_events=[];function cb_event_render(e,t,n,a,r,i){if(e||(e=$(r.element).parents(".fullCalendar")),$("body").trigger("cb_event_render_begin",[e,t,n,a,r,i]),showothermonth=i&&i.showothermonth?parseInt(i.showothermonth):1,showothermonth=r&&r.name&&"month"==r.name?showothermonth:1,"month"==r.name&&$(a).parents(".rhcalendar.not-widget").hasClass("fc-small")&&(showothermonth=0),0==showothermonth&&n.start&&n.end&&r.start&&r.end){if(n.end.getTime()<r.start.getTime())return!1;if(n.start.getTime()>=r.end.getTime())return!1}if(0==showothermonth&&n.start&&null==n.end&&r.start&&r.end){if(n.start.getTime()<r.start.getTime())return!1;if(n.start.getTime()>=r.end.getTime())return!1}if(event_skip=i&&i.event_skip?parseInt(i.event_skip):0,event_skip&&(void 0===r.event_skip&&(r.event_skip=event_skip),r.event_skip>0))return r.event_skip--,!1;if(1==parseInt(i.upcoming)){var o=new Date;if(n.allDay&&o.setHours(0,0,0,0),n.start.getTime()<o.getTime())return!1}if(norepeat=r.get_norepeat?r.get_norepeat(i.norepeat||!1):i.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&r&&n&&n.id){if(r.rendered=r.rendered?r.rendered:[],-1!=$.inArray(n.id,r.rendered))return!1;r.rendered.push(n.id)}if(i.taxonomycolor&&"1"==i.taxonomycolor&&n.terms){var s=[];$.each(n.terms,function(e,t){str="tax_"+t.taxonomy+"_"+t.slug,str=str.replace(/ /g,"_"),s.push(str)}),s.length>0&&$(a).addClass(s.join(" "))}if(n.venue_directory&&"rhc_gmap"!=r.name)return!1;if("rhc_gmap"==r.name&&n.start)if(1==parseInt(i.gmap_view.upcoming)){if(n.start.getTime()<r.visStart.getTime())return!1}else if(n.end&&2==parseInt(i.gmap_view.upcoming)&&n.end.getTime()<r.visStart.getTime())return!1;var l=$(e).data("rhc_tax_filters");if(l&&l.length>0){var d=!0,c=[],f=[];if($.each(n.terms,function(e,t){$.each(l,function(e,n){-1==$.inArray(n.taxonomy,f)&&f.push(n.taxonomy),n.taxonomy==t.taxonomy&&(t.gaddress&&t.gaddress==n.term?(d=!1,c.push(t.taxonomy)):t.description&&t.description==n.term?(d=!1,c.push(t.taxonomy)):t.name&&t.name==n.term&&(d=!1,c.push(t.taxonomy)))})}),!d&&f.length>0&&$.each(f,function(e,t){-1==$.inArray(t,c)&&(d=!0)}),d)return!1}if(max_events=i&&i.max_events?parseInt(i.max_events):0,max_events){if(void 0===r.max_events&&(r.max_events=max_events,r.rendered_events_count=0),r.rendered_events_count>=r.max_events)return!1;r.rendered_events_count++}if(t){var u=0;if(n.start&&n.end){var h=new Date(n.start),p=new Date(n.end);h.setHours(0,0,0,0),p.setHours(0,0,0,0),u=Math.floor((p.getTime()-h.getTime())/864e5)}var m=n._start.getDate();if(0==u)$(r.element).find(".fc-day-number").each(function(e,t){m==$(t).html()&&(n.start.getMonth()==r.start.getMonth()?$(t).parent().parent().hasClass("fc-other-month")||$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"):$(t).parent().parent().hasClass("fc-other-month")&&$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"))});else{h=new Date(n.start),p=new Date(n.start);h.setHours(0,0,0),p.setHours(23,59,59),$(r.element).find(".fc-day-number").each(function(e,t){current_date_str=$(t).closest(".fc-day").data("date"),current_date=new Date(current_date_str+"T00:00:00Z"),current_date.setTime(current_date.getTime()+60*h.getTimezoneOffset()*1e3),current_date.getTime()<=p.getTime()&&current_date.getTime()>=h.getTime()&&$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none")})}return!1}if(sidelist_events.push(n),i.matchBackground&&"1"==i.matchBackground){loop_date=new Date(n._start),compare_date=n._end||n._start;for(var v=0;loop_date<=compare_date&&(sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",original_bg=$(r.element).find(sel).css("background-color"),$(r.element).find(sel).data("original_bg",original_bg).addClass("bg_matched").css("background-color",$(a).length&&$(a).get(0).tagName&&$(a).css("background-color")||""),loop_date.setDate(loop_date.getDate()+1),!(v++>5e3)););}if(render_something=!1,i.month_event_image&&"1"==i.month_event_image&&"month"==r.name&&n.month_image&&n.month_image[0]&&(loop_date=new Date(n._start),sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",ratio=n.month_image[2]/n.month_image[1],container_w=r.element.find(sel).outerWidth(),_w=container_w,_h=_w*ratio,$(a).addClass("has-fc-image").find(".fc-event-inner").prepend($("<div></div>").addClass("fc-image-cont").append($("<img />").attr("src",n.month_image[0]).attr("height",parseInt(_h)).css("height",parseInt(_h)).addClass("fc-image"))),render_something=!0),"month"==r.name){if(i.render_events=void 0===i.render_events?1:i.render_events,0==parseInt(i.render_events)){if(!render_something)return!1;$(a).find(".fc-event-title").hide(),$(a).find(".fc-event-time").hide(),$(a).css("background-color","transparent")}void 0===i.fixed_title||0==i.fixed_title.length||($(a).find(".fc-event-time").html("&nbsp;"),$(a).find(".fc-event-title").html(i.fixed_title))}i.early_dynamic_tooltip&&"1"==i.early_dynamic_tooltip&&cb_event_mouseover(n,null,r),i.tooltip_close_on_title_leave&&parseInt(i.tooltip_close_on_title_leave)&&$(a).mouseleave(function(e){handle=setTimeout(function(){0==$(".fc-event.event-hovered").length&&$(".fct-tooltip").is(":visible")&&($(".fct-tooltip:visible").first().is(":hover")||$(".fct-tooltip:visible").trigger("close-tooltip"))},200)})}function hide_widget_event_list(e,t,n,a,r,i){var o=jQuery(e).parents(".rhc_holder").find(".rhc_calendar_widget_day_click_holder");o.children().length>0&&o.children().fadeOut("fast",function(){})}function cb_event_render_all(e,t,n,a,r,i){if(void 0===e&&(e=$(r.element).parents(".rhcalendar.rhc_holder")),norepeat=r.get_norepeat?r.get_norepeat(i.norepeat||!1):i.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&r&&(r.rendered=r.handle_rendered?r.handle_rendered():[]),has_sidelist_holder=$(e).parent().find(".rhc-sidelist").length>0,events=sidelist_events||[],events.length>0){var o=$(e).parent().find(".rhc-sidelist-holder .rhc-sidelist-tab-label");o.length>0&&i.sidelist&&i.sidelist.labels&&i.sidelist.labels.tab&&o.html(i.sidelist.labels.tab),render_sidelist(e,events,r.name,i)}sidelist_events=[],$.inArray(r.name,["rhc_event","rhc_gmap"]),$("body").trigger("cb_view_display",[t,e,r,a])}function render_tax_filters(e){var t=e&&e.taxfilter?e.taxfilter:{holder_class:"rh-flat-ui fc-head-control",selectpicker:!0,size:10,menu_class:"tax_filter_menu_medium",multiple:!(!e.tax_filter_multiple||!parseInt(e.tax_filter_multiple))},n=$(this);e.btn_tax_parent_only?arr_btn_tax_parent_only=e.btn_tax_parent_only.split(","):arr_btn_tax_parent_only=[],$(this).find("[class*='fc-button-btn_tax_']").length>0&&n.addClass("rhc-has-tax-filter"),$(this).find("[class*='fc-button-btn_tax_']").each(function(e,a){var r=(a.className.match(/(^|\s)(fc\-button\-btn_tax_([^\s]*))/)||[,,""])[3],i=$('<select class="selectpicker"></select>');if(t.multiple&&i.attr("multiple",!0),i.attr("data-taxonomy",r).append($('<option value="">'+$(this).html()+"</option>")),n.find(".fbd-filter[data-taxonomy='"+r+"']").each(function(e,t){var n=$(t).data("bgcolor")||"transparent";if(arr_btn_tax_parent_only.length>0&&parseInt($(t).data("parent")))for(var a=0;a<arr_btn_tax_parent_only.length;a++)if(r==arr_btn_tax_parent_only[a])return;i.append($('<option data-bgcolor="'+n+'" value="'+$(t).val()+'">'+$(t).closest("label").find(".fbd-term-label").html()+"</option>"))}),i.find("option").length>1?($(a).replaceWith(i),i.wrap($('<div class="tax_filter_holder fc-button fc-state-default"></div>').addClass(t.holder_class).addClass(t.menu_class))):($(a).remove(),console.log("Taxonomy filter added to calendar, but disabled in options.  Also turning off the hierarchical filter can help.")),t.selectpicker){i.selectpicker({style:"btn-small btn-taxfilter btn_tax",size:t.size});var o=!1,s=i.parent().find(".dropdown-menu");i.find("option").each(function(e,t){bgcolor=$(t).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(o=!0),s.find('li[rel="'+e+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),o&&s.addClass("rhc-with-tax-color")}i.unbind("change",tax_filter_change).bind("change",{taxonomy:r,holder:n,dropdown:i},tax_filter_change)})}function tax_filter_change(e){$(this).attr("rel",$(e.data.holder).attr("id"));var t=$(this).val(),n=[];"string"==typeof(t=null==t?"":t)?""==t||n.push(t):$.each(t,function(e,t){if(""==t)return!0;n.push(t)});var a=e.data.dropdown;return $(n).toArray().length>0?(a.find("option").first().prop("selected",!1),a.find("option").first().removeAttr("selected")):(a.find("option").first().prop("selected",!0),a.find("option").first().attr("selected","selected")),a.selectpicker("render"),e.data.holder.find(".fbd-filter[data-taxonomy='"+e.data.taxonomy+"']").each(function(e,t){-1==$.inArray($(t).val(),n)?$(t).attr("checked",!1):$(t).attr("checked",!0)}),methods.apply_filter.apply($(this),[!1]),!0}function render_sidelist(e,t,n,a){$.each(t,function(t,r){!(r.skip_sidelist||!1)&&"rhc_gmap"==n&&has_sidelist_holder&&a.sidelist&&a.sidelist.template&&$(a.sidelist.template).length>0&&($(e).parent().find(".rhc-sidelist-holder").addClass("has-events"),sidelist=$(e).parent().find(".rhc-sidelist"),render_sidelist_event(sidelist,r,a))}),$(".rhc-sidelist-event-item").show()}function render_sidelist_event(e,t,n){jQuery(document).ready(function(a){var r=new Date(t.start),i=new Date;if(i.setHours(0,0,0,0),r.getTime()<i.getTime())return!1;var o=a(n.sidelist.template).clone();if(o.attr("id","").addClass("rhc-sidelist-event-item"),t.url&&""!=t.url&&"javascript:void(0);"!=t.url){var s=n.sidelist.link_target||"_BLANK";s=""==s?"_BLANK":s;var l=a('<a href="'+t.url+'">'+t.title+"</a>").attr("target",s).attr("href","javascript:void(0);").bind("click",function(e){var a=n.eventClick?n.eventClick:fc_click;t.fc_click_link="page",t.fc_click_target=s,a(t,e,null)})}else l=a("<span></span").html(t.title);o.find(".rhc-sidelist-title").empty().append(l);var d=o.find(".rhc-sidelist-date").html();if(o.find(".rhc-sidelist-date").html(a.fullCalendar.formatDate(t.start,d,n)),t.image&&t.image[0]&&""!=t.image[0])var c=a("<img></img>").attr("src",t.image[0]);t.venue_directory&&o.addClass("venue-directory-item").find(".rhc-sidelist-date").hide(),o.find(".rhc-sidelist-image").append(c),e.append(o.show())})}function cb_events_loading(e,t,n,a,r,i){i.for_widget?(a.loading&&a.loading(n,a,i),handle_loading_overlay(e,t,n,a,r,i),n?$(e).find(".fc-have-event").each(function(e,t){$(this).removeClass("fc-state-highlight").removeClass("fc-have-event").css("background-image","")}):cb_events_loaded(t,r,a,i)):(a.loading&&a.loading(n,a,i),n||cb_events_loaded(t,r,a,i),handle_loading_overlay(e,t,n,a,r,i))}function handle_loading_overlay(e,t,n,a,r,i){void 0!==i.loadingOverlay&&"1"==i.loadingOverlay&&(n?(0==$(e).find(".fc-content .fc-view-loading").length&&$(e).find(".fullCalendar .fc-content").prepend($('<div class="fc-view-loading"></div>').hide().append('<div class="fc-view-loading-1 ajax-loader"><div class="fc-view-loading-2x xspinner icon-xspinner-3"></div></div>')),$(e).addClass("is-loading").find(".fc-view-loading").addClass("loading-events").find(".ajax-loader").addClass("loading-events").end().stop().fadeIn()):$(e).removeClass("is-loading").find(".fc-view-loading").stop().fadeOut("fast",function(){$(e).find().remove(".fc-view-loading"),"rhc_event"==a.name&&$(e).find(".fc-view-rhc_event").css("min-height","")}))}function cb_events_loaded(e,t,n,a){if(calendar=e,(!a.tax_filter||"1"==a.tax_filter)&&0!=$(calendar).find(".fc-head-control").length){var r=$(calendar).fullCalendar("clientEvents"),i=[];if($.each(r,function(e,t){t.terms&&t.terms.length>0&&$.each(t.terms,function(e,n){if(a.tax_filter_include&&a.tax_filter_include.length>0){if(-1==$.inArray(n.taxonomy,a.tax_filter_include))return}else if(a.tax_filter_skip&&-1!=$.inArray(n.taxonomy,a.tax_filter_skip))return;for(var r=-1,o=0;o<i.length;o++)if(i[o].taxonomy==n.taxonomy){r=o;break}var s="",l={value:s=n.gaddress?n.gaddress:n.description?n.description:n.name?n.name:"unknown",order:n.term_priority?parseInt(n.term_priority):0,local_feed:t.local_feed,term:n};-1==r?i[i.length]={taxonomy:n.taxonomy,label:n.taxonomy_label,terms:[s],uterms:[l],print_priority:n.print_priority?parseInt(n.print_priority):0,filter_type:n.filter_type?n.filter_type:"",color:n.color||"",background_color:n.background_color||""}:-1==$.inArray(s,i[r].terms)&&(i[r].terms.push(s),i[r].uterms.push(l))})}),a.tax_filter_include&&a.tax_filter_include.length>0&&i.length>0&&(new_taxonomies=[],$.each(a.tax_filter_include,function(e,t){$.each(i,function(e,n){t==n.taxonomy&&(new_taxonomies[new_taxonomies.length]=n)})}),i=new_taxonomies),i.length>0){var o=$(calendar).find(".fc-head-control .tax_filter_holder");o.empty(),o.parents(".fc-head-control").removeClass("has-filters"),a.btn_tax_parent_only?arr_btn_tax_parent_only=a.btn_tax_parent_only.split(","):arr_btn_tax_parent_only=[],$.each(i,function(e,t){if(0!=t.terms.length){t.uterms.sort(cb_sort_tax_filter),t.terms=[];var n=!1,a=!1;$.each(t.uterms,function(e,r){n&&n!=r.order&&(a=!0),n=r.order,t.terms.push(r.value)}),a||(t.terms.sort(),t.uterms.sort(cb_sort_alphanum));var r=$("<select></select>").attr("title",t.label).attr("multiple","multiple").addClass("tax_filter_field").addClass("selectpicker").data("taxonomy",t.taxonomy).data("taxonomy_filter_type",t.filter_type).append('<option value="">'+t.label+"</option>");$.each(t.uterms,function(e,n){if(arr_btn_tax_parent_only.length>0&&parseInt(n.term.parent))for(var a=0;a<arr_btn_tax_parent_only.length;a++)if(t.taxonomy==arr_btn_tax_parent_only[a])return;bgcolor=n.term.background_color||"transparent",option_label=n.term&&n.term.name?n.term.name:n.value,_option=$('<option value="'+n.value+'">'+option_label+"</option>").data("term",n),_option.attr("data-bgcolor",bgcolor),r.append(_option)}),r.appendTo(o).wrap('<div class="tax_filter_item_holder"></div>').selectpicker({style:"btn-small btn-taxfilter"});var i=!1,s=r.parent().find(".dropdown-menu");r.find("option").each(function(e,t){bgcolor=$(t).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(i=!0),s.find('li[rel="'+e+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),i&&s.addClass("rhc-with-tax-color"),o.parents(".fc-head-control").addClass("has-filters")}}),o.find(".tax_filter_field").change(function(e){var t=$(this).parents(".fullCalendar"),n=[];$(t).find(".tax_filter_field").each(function(e,t){$(t).find("option:selected").each(function(e,a){var r=$(a).attr("value");if(""!=r){var i=$(t).data("taxonomy_filter_type"),o=$(a).data("term");n.push({taxonomy:$(t).data("taxonomy"),term:r,filter_type:i,slug:o.term&&o.term.slug?o.term.slug:null,term_id:o.term&&o.term.term_id?o.term.term_id:null,local_feed:o.local_feed})}})}),$(t).parent().find(".rhc-sidelist").length>0&&($(t).parent().find(".rhc-sidelist-holder").removeClass("has-events"),$(t).parent().find(".rhc-sidelist").empty()),args={tax_filters:n},a.show_ad&&(args.show_ad=a.show_ad),$(t).data("rhc_tax_filters",n).fullCalendar("rerenderEvents"),$("BODY").trigger("rhc_filter",args)})}}}function cb_view_display(e,t,n,a){t||(t=$(n.element).parents(".fullCalendar")),set_fc_small(t);var r=$(t).fullCalendar("getView");"rhc_gmap"==r.name?$(t).find(".fc-head-control").addClass("show-control"):$(t).find(".fc-head-control").removeClass("show-control"),"rhc_event"==r.name?$(a).parents(".rhc_holder").addClass("view-rhc_event"):$(a).parents(".rhc_holder").removeClass("view-rhc_event"),$(t).data("rhc_tax_filters",[]),$(t).find(".tax_filter_field").each(function(e,t){$(t).val("")});var i=new Date;if(n.visStart<=i&&n.visEnd>=i?$(a).parents(".rhc_holder").addClass("has-current-date").removeClass("not-current-date"):$(a).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),"month"==n.name&&$(a).parents(".rhc_holder").find(".fc-today").length>0&&$(a).parents(".rhc_holder").find(".fc-today").is(".fc-other-month")&&$(a).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),$(a).parents(".rhc_holder").is(".flat-ui-cal")){var o=$(t).parents(".rhc_holder").data("Calendarize"),s=o.modes[o.mode].options;if($(a).parents(".rhc_holder").is(".has-current-date")){try{var l=$("<div/>").html(s.widget_hformat).text()}catch(e){l=null}var d=l||"'<span class=''fuiw-dayname''>'dddd'</span><span class=''fuiw-month''>'MMMM'</span><span class=''fuiw-year''>'yyyy'</span><span class=''fuiw-day''>'d'</span>'";$(t).find(".fc-header-title h2").html($.fullCalendar.formatDate(i,d,s))}else{str=$(t).find(".fc-header-title h2").html(),str=str.trim();var c=str.split(" ");2==c.length&&(d=isNaN(c[1])?"<span class='fuiw-month'>"+c[1]+"</span><span class='fuiw-year'>"+c[0]+"</span>":"<span class='fuiw-month'>"+c[0]+"</span><span class='fuiw-year'>"+c[1]+"</span>",$(t).find(".fc-header-title h2").html(d))}_skip=!(!s.widget_onechardaylabel||1!=parseInt(s.widget_onechardaylabel)),_skip||$(t).find(".fc-day-header").each(function(e,t){$(t).html($(t).html().substring(0,1))})}}function cb_sort_tax_filter(e,t){return e.order>t.order?1:e.order<t.order?-1:0}function cb_sort_alphanum(e,t){a=e.value.toString(),b=t.value.toString();var n=/[^a-zA-Z]/g,r=/[^0-9]/g,i=a.replace(n,""),o=b.replace(n,"");if(i===o){var s=parseInt(a.replace(r,""),10),l=parseInt(b.replace(r,""),10);return s===l?0:s>l?1:-1}return i>o?1:-1}function add_footer_button(e){var t=$.extend({calendarize:null,calendar:null,e:null,tm:"fc",buttonName:"undefined",label:"",buttonClick:function(e,t,n){}},e);tm=t.tm;var n=$("<span class='fc-button fc-button-"+t.buttonName+" "+tm+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+t.label+"</span><span class='fc-button-effect'><span></span></span></span></span>");n&&(n.click(function(e){n.hasClass(tm+"-state-disabled")||t.buttonClick(this,e,t)}).mousedown(function(){n.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){n.removeClass(tm+"-state-down")}).hover(function(){n.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){n.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(t.e),n.addClass(tm+"-corner-left"),n.addClass(tm+"-corner-right"))}function ical_footer_button_click(e,t,n){var a=n.calendarize;if(f,$(e).parent().find(".ical-tooltip").length>0)$(e).parent().find(".ical-tooltip").remove();else{var r=$(a).data("Calendarize"),i=r.modes[r.mode].options,o=i.events_source+i.events_source_query,s=(o=o.replace("get_calendar_events","get_icalendar_events"))+"&ics=1",l=i.feed&&""!=i.feed?"&feed="+i.feed:"";o+=l,s+=l;var d=$(".ical-tooltip-template").first().clone();d.removeClass("ical-tooltip-template").addClass("ical-tooltip").addClass("rhc-ical-dialog").find(".ical-url").html(o).end().find(".ical-clip").attr("href",o).on("click",function(e){return $(this).focus(),$(this).select(),!1}).end().find(".ical-close").on("click",function(e){$(this).parents(".fc-footer").find(".fc-button-icalendar").trigger("click")}).end().find(".ical-ics").attr("href",s).end().show(),$(e).after(d),setTimeout(function(){d.addClass("rhc-ical-dialog-open")},50)}}function cb_dayclick(e,t,n,a,r,i){var o;if(r.dayclick){if(o=!(!r.dayclick||""==r.dayclick||!window[r.dayclick])&&window[r.dayclick])return o(e,t,n,a,r,i)}else if(o=!(!r.widget_dayclick||""==r.widget_dayclick||!window[r.widget_dayclick])&&window[r.widget_dayclick])calendar_widget_day_click(e,t,n,a,rhc_events_cache,r,i);else if(r.widget_link){if(r.widget_link_view)var s=r.widget_link_view;else s="agendaDay";$('<form method="post" />').attr("action",r.widget_link).append('<input type="hidden" name="gotodate" value="'+$.fullCalendar.formatDate(e,"yyyy-MM-dd")+'" />').append('<input type="hidden" name="defaultview" value="'+s+'" />').append('<input type="hidden" name="fcalendar" value="'+(r.ev_calendar?r.ev_calendar:"")+'" />').append('<input type="hidden" name="fvenue" value="'+(r.ev_venue?r.ev_venue:"")+'" />').append('<input type="hidden" name="forganizer" value="'+(r.ev_organizer?r.ev_organizer:"")+'" />').appendTo(i).submit()}}}(jQuery),function(e){var t={init:function(t){var n=e.extend({draggable:!0},t);return this.each(function(){e(this).data("CalendarizeDialog")||(e(this).data("CalendarizeDialog",n),n.draggable&&e(this).draggable({handle:".ui-widget-header"}),e(this).find(".ui-dialog-titlebar-close").on("click",function(t){e(this).parent().parent().parent().CalendarizeDialog("close")}),j),e(this).hide()})},open:function(t){opacity=e(this).css("opacity"),e(this).css("opacity",0).show().css("margin-left",0).offset(t.offset).css("margin-left",t.margin_left);var n=this.get()[0].getBoundingClientRect();n.right>e(window).width()&&(margin_left=t.margin_left+-1*(5+n.right-e(window).width()),e(this).css("margin-left",margin_left)),e(this).animate({opacity:opacity},200,function(){})},close:function(){e(this).hide()}};e.fn.CalendarizeDialog=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.CalendarizeDialog"):t.init.apply(this,arguments)}}(jQuery),function(e){var t={init:function(t){e.extend({todo:!1},t);return this.each(function(){var t,a=e(this);if(!a.data("rhc_gmap"))return a.data("rhc_gmap",!0),function(t,a,r){r++;if(r>10)return!1;if("interactive"!=t.data("type"))return!1;if(0==a.length)return!1;function i(a,i){return function(o,s){s==google.maps.GeocoderStatus.OK&&(latlng=o[0].geometry.location,a[i].lat=latlng.lat(),a[i].lon=latlng.lng());return function(t,a,r){r++;if(r>10)return!1;if("interactive"!=t.data("type"))return!1;if(0==a.length)return!1;function i(e,a){return function(i,o){o==google.maps.GeocoderStatus.OK&&(latlng=i[0].geometry.location,e[a].lat=latlng.lat(),e[a].lon=latlng.lng());return n(t,e,r)}}for(var o=0;o<a.length;o++)if(!a[o].lat&&!a[o].lon&&a[o].address){var s=new google.maps.Geocoder;return void s.geocode({address:a[o].address},i(a,o))}t.uniqueId();ratio=t.data("ratio");ratio=""==ratio?"4:3":ratio;ratio_arr=ratio.split(":");h=t.width()*ratio_arr[1]/ratio_arr[0];t.height(h);maptype=t.data("maptype")||"ROADMAP";settings={mapTypeId:google.maps.MapTypeId[maptype],center:new google.maps.LatLng(a[0].lat,a[0].lon)};t.data("zoom")&&(settings.zoom=t.data("zoom"));var l=new google.maps.Map(t.get(0),settings);var d=new google.maps.LatLngBounds;var c=new google.maps.InfoWindow;e.each(a,function(e,t){var n;marker=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:l}),d.extend(marker.position),google.maps.event.addListener(marker,"click",(n=marker,function(){c.setContent(t.info||t.name||t.address),c.open(l,n)}))});a.length>1&&l.fitBounds(d)}(t,a,r)}}for(var o=0;o<a.length;o++)if(!a[o].lat&&!a[o].lon&&a[o].address){var s=new google.maps.Geocoder;return void s.geocode({address:a[o].address},i(a,o))}t.uniqueId();ratio=t.data("ratio");ratio=""==ratio?"4:3":ratio;ratio_arr=ratio.split(":");h=t.width()*ratio_arr[1]/ratio_arr[0];t.height(h);maptype=t.data("maptype")||"ROADMAP";settings={mapTypeId:google.maps.MapTypeId[maptype],center:new google.maps.LatLng(a[0].lat,a[0].lon)};t.data("zoom")&&(settings.zoom=t.data("zoom"));var l=new google.maps.Map(t.get(0),settings);var d=new google.maps.LatLngBounds;var c=new google.maps.InfoWindow;e.each(a,function(e,t){var n;marker=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:l}),d.extend(marker.position),google.maps.event.addListener(marker,"click",(n=marker,function(){c.setContent(t.info||t.name||t.address),c.open(l,n)}))});a.length>1&&l.fitBounds(d)}(a,(t=[],a.children().each(function(n,a){t.push({name:e(a).html(),lon:e(a).data("glon"),lat:e(a).data("glat"),info:e(a).data("ginfo"),address:e(a).data("gaddress"),marker_active:e(a).data("marker_active"),marker_inactive:e(a).data("marker_active"),marker_size:e(a).data("marker_size")})}),t),0),!0})}};function n(t,a,r){r++;if(r>10)return false;if("interactive"!=t.data("type"))return false;if(a.length==0)return false;function i(e,a){var i=function(i,o){if(o==google.maps.GeocoderStatus.OK){latlng=i[0].geometry.location;e[a].lat=latlng.lat();e[a].lon=latlng.lng()}return n(t,e,r)};return i}for(var o=0;o<a.length;o++){if(!a[o].lat&&!a[o].lon&&a[o].address){var s=new google.maps.Geocoder;s.geocode({address:a[o].address},i(a,o));return}}t.uniqueId();ratio=t.data("ratio");ratio=""==ratio?"4:3":ratio;ratio_arr=ratio.split(":");h=t.width()*ratio_arr[1]/ratio_arr[0];t.height(h);maptype=t.data("maptype")||"ROADMAP";settings={mapTypeId:google.maps.MapTypeId[maptype],center:new google.maps.LatLng(a[0].lat,a[0].lon)};if(t.data("zoom")){settings.zoom=t.data("zoom")}var l=new google.maps.Map(t.get(0),settings);var d=new google.maps.LatLngBounds;var c=new google.maps.InfoWindow;e.each(a,function(e,t){marker=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:l});d.extend(marker.position);google.maps.event.addListener(marker,"click",function(e,n){return function(){c.setContent(t.info||t.name||t.address);c.open(l,e)}}(marker,e))});if(a.length>1){l.fitBounds(d)}}e.fn.rhcGmap=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.rhcGmap"):t.init.apply(this,arguments)}}(jQuery),jQuery(document).ready(function(e){init_rhc(),init_rhc_date_local_tz();try{window.matchMedia("print").addListener(function(){try{e(".rhc_holder .fullCalendar").fullCalendar("refetchEvents"),e(".rhc_holder .fullCalendar").fullCalendar("render")}catch(e){console.log("error",e)}})}catch(e){console.log(e)}});